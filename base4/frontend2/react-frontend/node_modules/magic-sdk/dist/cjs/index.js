"use strict";var et=Object.create;var ge=Object.defineProperty;var rt=Object.getOwnPropertyDescriptor;var tt=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,ot=Object.prototype.hasOwnProperty;var ke=(_,m)=>()=>(m||_((m={exports:{}}).exports,m),m.exports),it=(_,m)=>{for(var O in m)ge(_,O,{get:m[O],enumerable:!0})},pe=(_,m,O,C)=>{if(m&&typeof m=="object"||typeof m=="function")for(let W of tt(m))!ot.call(_,W)&&W!==O&&ge(_,W,{get:()=>m[W],enumerable:!(C=rt(m,W))||C.enumerable});return _},ae=(_,m,O)=>(pe(_,m,"default"),O&&pe(O,m,"default")),er=(_,m,O)=>(O=_!=null?et(nt(_)):{},pe(m||!_||!_.__esModule?ge(O,"default",{value:_,enumerable:!0}):O,_)),at=_=>pe(ge({},"__esModule",{value:!0}),_);var tr=ke((rr,Oe)=>{"use strict";(function(_){if(typeof rr=="object"&&typeof Oe<"u")Oe.exports=_();else if(typeof define=="function"&&define.amd)define([],_);else{var m;typeof window<"u"?m=window:typeof global<"u"?m=global:typeof self<"u"?m=self:m=this,m.localforage=_()}})(function(){var _,m,O;return function C(W,Z,L){function V(K,J){if(!Z[K]){if(!W[K]){var y=typeof require=="function"&&require;if(!J&&y)return y(K,!0);if(D)return D(K,!0);var w=new Error("Cannot find module '"+K+"'");throw w.code="MODULE_NOT_FOUND",w}var T=Z[K]={exports:{}};W[K][0].call(T.exports,function(F){var $=W[K][1][F];return V($||F)},T,T.exports,C,W,Z,L)}return Z[K].exports}for(var D=typeof require=="function"&&require,z=0;z<L.length;z++)V(L[z]);return V}({1:[function(C,W,Z){(function(L){"use strict";var V=L.MutationObserver||L.WebKitMutationObserver,D;if(V){var z=0,K=new V(F),J=L.document.createTextNode("");K.observe(J,{characterData:!0}),D=function(){J.data=z=++z%2}}else if(!L.setImmediate&&typeof L.MessageChannel<"u"){var y=new L.MessageChannel;y.port1.onmessage=F,D=function(){y.port2.postMessage(0)}}else"document"in L&&"onreadystatechange"in L.document.createElement("script")?D=function(){var P=L.document.createElement("script");P.onreadystatechange=function(){F(),P.onreadystatechange=null,P.parentNode.removeChild(P),P=null},L.document.documentElement.appendChild(P)}:D=function(){setTimeout(F,0)};var w,T=[];function F(){w=!0;for(var P,k,M=T.length;M;){for(k=T,T=[],P=-1;++P<M;)k[P]();M=T.length}w=!1}W.exports=$;function $(P){T.push(P)===1&&!w&&D()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(C,W,Z){"use strict";var L=C(1);function V(){}var D={},z=["REJECTED"],K=["FULFILLED"],J=["PENDING"];W.exports=y;function y(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=J,this.queue=[],this.outcome=void 0,h!==V&&$(this,h)}y.prototype.catch=function(h){return this.then(null,h)},y.prototype.then=function(h,A){if(typeof h!="function"&&this.state===K||typeof A!="function"&&this.state===z)return this;var E=new this.constructor(V);if(this.state!==J){var N=this.state===K?h:A;T(E,N,this.outcome)}else this.queue.push(new w(E,h,A));return E};function w(h,A,E){this.promise=h,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(h){D.resolve(this.promise,h)},w.prototype.otherCallFulfilled=function(h){T(this.promise,this.onFulfilled,h)},w.prototype.callRejected=function(h){D.reject(this.promise,h)},w.prototype.otherCallRejected=function(h){T(this.promise,this.onRejected,h)};function T(h,A,E){L(function(){var N;try{N=A(E)}catch(H){return D.reject(h,H)}N===h?D.reject(h,new TypeError("Cannot resolve promise with itself")):D.resolve(h,N)})}D.resolve=function(h,A){var E=P(F,A);if(E.status==="error")return D.reject(h,E.value);var N=E.value;if(N)$(h,N);else{h.state=K,h.outcome=A;for(var H=-1,j=h.queue.length;++H<j;)h.queue[H].callFulfilled(A)}return h},D.reject=function(h,A){h.state=z,h.outcome=A;for(var E=-1,N=h.queue.length;++E<N;)h.queue[E].callRejected(A);return h};function F(h){var A=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof A=="function")return function(){A.apply(h,arguments)}}function $(h,A){var E=!1;function N(Q){E||(E=!0,D.reject(h,Q))}function H(Q){E||(E=!0,D.resolve(h,Q))}function j(){A(H,N)}var X=P(j);X.status==="error"&&N(X.value)}function P(h,A){var E={};try{E.value=h(A),E.status="success"}catch(N){E.status="error",E.value=N}return E}y.resolve=k;function k(h){return h instanceof this?h:D.resolve(new this(V),h)}y.reject=M;function M(h){var A=new this(V);return D.reject(A,h)}y.all=ue;function ue(h){var A=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=h.length,N=!1;if(!E)return this.resolve([]);for(var H=new Array(E),j=0,X=-1,Q=new this(V);++X<E;)ee(h[X],X);return Q;function ee(fe,a){A.resolve(fe).then(u,function(v){N||(N=!0,D.reject(Q,v))});function u(v){H[a]=v,++j===E&&!N&&(N=!0,D.resolve(Q,H))}}}y.race=re;function re(h){var A=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=h.length,N=!1;if(!E)return this.resolve([]);for(var H=-1,j=new this(V);++H<E;)X(h[H]);return j;function X(Q){A.resolve(Q).then(function(ee){N||(N=!0,D.resolve(j,ee))},function(ee){N||(N=!0,D.reject(j,ee))})}}},{1:1}],3:[function(C,W,Z){(function(L){"use strict";typeof L.Promise!="function"&&(L.Promise=C(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(C,W,Z){"use strict";var L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var z=D();function K(){try{if(!z||!z.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function J(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if(n.name!=="TypeError")throw n;for(var r=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new r,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}typeof Promise>"u"&&C(3);var y=Promise;function w(e,t){t&&e.then(function(r){t(null,r)},function(r){t(r)})}function T(e,t,r){typeof t=="function"&&e.then(t),typeof r=="function"&&e.catch(r)}function F(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function $(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var P="local-forage-detect-blob-support",k=void 0,M={},ue=Object.prototype.toString,re="readonly",h="readwrite";function A(e){for(var t=e.length,r=new ArrayBuffer(t),o=new Uint8Array(r),i=0;i<t;i++)o[i]=e.charCodeAt(i);return r}function E(e){return new y(function(t){var r=e.transaction(P,h),o=J([""]);r.objectStore(P).put(o,"key"),r.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)},r.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function N(e){return typeof k=="boolean"?y.resolve(k):E(e).then(function(t){return k=t,k})}function H(e){var t=M[e.name],r={};r.promise=new y(function(o,i){r.resolve=o,r.reject=i}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function j(e){var t=M[e.name],r=t.deferredOperations.pop();if(r)return r.resolve(),r.promise}function X(e,t){var r=M[e.name],o=r.deferredOperations.pop();if(o)return o.reject(t),o.promise}function Q(e,t){return new y(function(r,o){if(M[e.name]=M[e.name]||G(),e.db)if(t)H(e),e.db.close();else return r(e.db);var i=[e.name];t&&i.push(e.version);var n=z.open.apply(z,i);t&&(n.onupgradeneeded=function(f){var s=n.result;try{s.createObjectStore(e.storeName),f.oldVersion<=1&&s.createObjectStore(P)}catch(c){if(c.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+f.oldVersion+" to version "+f.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw c}}),n.onerror=function(f){f.preventDefault(),o(n.error)},n.onsuccess=function(){var f=n.result;f.onversionchange=function(s){s.target.close()},r(f),j(e)}})}function ee(e){return Q(e,!1)}function fe(e){return Q(e,!0)}function a(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==t&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var n=e.db.version+1;n>e.version&&(e.version=n)}return!0}return!1}function u(e){return new y(function(t,r){var o=new FileReader;o.onerror=r,o.onloadend=function(i){var n=btoa(i.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},o.readAsBinaryString(e)})}function v(e){var t=A(atob(e.data));return J([t],{type:e.type})}function g(e){return e&&e.__local_forage_encoded_blob}function b(e){var t=this,r=t._initReady().then(function(){var o=M[t._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return T(r,e,e),r}function I(e){H(e);for(var t=M[e.name],r=t.forages,o=0;o<r.length;o++){var i=r[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,ee(e).then(function(n){return e.db=n,a(e)?fe(e):n}).then(function(n){e.db=t.db=n;for(var f=0;f<r.length;f++)r[f]._dbInfo.db=n}).catch(function(n){throw X(e,n),n})}function R(e,t,r,o){o===void 0&&(o=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(n){if(o>0&&(!e.db||n.name==="InvalidStateError"||n.name==="NotFoundError"))return y.resolve().then(function(){if(!e.db||n.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),fe(e)}).then(function(){return I(e).then(function(){R(e,t,r,o-1)})}).catch(r);r(n)}}function G(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ce(e){var t=this,r={db:null};if(e)for(var o in e)r[o]=e[o];var i=M[r.name];i||(i=G(),M[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=b);var n=[];function f(){return y.resolve()}for(var s=0;s<i.forages.length;s++){var c=i.forages[s];c!==t&&n.push(c._initReady().catch(f))}var l=i.forages.slice(0);return y.all(n).then(function(){return r.db=i.db,ee(r)}).then(function(d){return r.db=d,a(r,t._defaultConfig.version)?fe(r):d}).then(function(d){r.db=i.db=d,t._dbInfo=r;for(var p=0;p<l.length;p++){var S=l[p];S!==t&&(S._dbInfo.db=r.db,S._dbInfo.version=r.version)}})}function se(e,t){var r=this;e=F(e);var o=new y(function(i,n){r.ready().then(function(){R(r._dbInfo,re,function(f,s){if(f)return n(f);try{var c=s.objectStore(r._dbInfo.storeName),l=c.get(e);l.onsuccess=function(){var d=l.result;d===void 0&&(d=null),g(d)&&(d=v(d)),i(d)},l.onerror=function(){n(l.error)}}catch(d){n(d)}})}).catch(n)});return w(o,t),o}function de(e,t){var r=this,o=new y(function(i,n){r.ready().then(function(){R(r._dbInfo,re,function(f,s){if(f)return n(f);try{var c=s.objectStore(r._dbInfo.storeName),l=c.openCursor(),d=1;l.onsuccess=function(){var p=l.result;if(p){var S=p.value;g(S)&&(S=v(S));var B=e(S,p.key,d++);B!==void 0?i(B):p.continue()}else i()},l.onerror=function(){n(l.error)}}catch(p){n(p)}})}).catch(n)});return w(o,t),o}function ar(e,t,r){var o=this;e=F(e);var i=new y(function(n,f){var s;o.ready().then(function(){return s=o._dbInfo,ue.call(t)==="[object Blob]"?N(s.db).then(function(c){return c?t:u(t)}):t}).then(function(c){R(o._dbInfo,h,function(l,d){if(l)return f(l);try{var p=d.objectStore(o._dbInfo.storeName);c===null&&(c=void 0);var S=p.put(c,e);d.oncomplete=function(){c===void 0&&(c=null),n(c)},d.onabort=d.onerror=function(){var B=S.error?S.error:S.transaction.error;f(B)}}catch(B){f(B)}})}).catch(f)});return w(i,r),i}function fr(e,t){var r=this;e=F(e);var o=new y(function(i,n){r.ready().then(function(){R(r._dbInfo,h,function(f,s){if(f)return n(f);try{var c=s.objectStore(r._dbInfo.storeName),l=c.delete(e);s.oncomplete=function(){i()},s.onerror=function(){n(l.error)},s.onabort=function(){var d=l.error?l.error:l.transaction.error;n(d)}}catch(d){n(d)}})}).catch(n)});return w(o,t),o}function sr(e){var t=this,r=new y(function(o,i){t.ready().then(function(){R(t._dbInfo,h,function(n,f){if(n)return i(n);try{var s=f.objectStore(t._dbInfo.storeName),c=s.clear();f.oncomplete=function(){o()},f.onabort=f.onerror=function(){var l=c.error?c.error:c.transaction.error;i(l)}}catch(l){i(l)}})}).catch(i)});return w(r,e),r}function ur(e){var t=this,r=new y(function(o,i){t.ready().then(function(){R(t._dbInfo,re,function(n,f){if(n)return i(n);try{var s=f.objectStore(t._dbInfo.storeName),c=s.count();c.onsuccess=function(){o(c.result)},c.onerror=function(){i(c.error)}}catch(l){i(l)}})}).catch(i)});return w(r,e),r}function cr(e,t){var r=this,o=new y(function(i,n){if(e<0){i(null);return}r.ready().then(function(){R(r._dbInfo,re,function(f,s){if(f)return n(f);try{var c=s.objectStore(r._dbInfo.storeName),l=!1,d=c.openKeyCursor();d.onsuccess=function(){var p=d.result;if(!p){i(null);return}e===0||l?i(p.key):(l=!0,p.advance(e))},d.onerror=function(){n(d.error)}}catch(p){n(p)}})}).catch(n)});return w(o,t),o}function lr(e){var t=this,r=new y(function(o,i){t.ready().then(function(){R(t._dbInfo,re,function(n,f){if(n)return i(n);try{var s=f.objectStore(t._dbInfo.storeName),c=s.openKeyCursor(),l=[];c.onsuccess=function(){var d=c.result;if(!d){o(l);return}l.push(d.key),d.continue()},c.onerror=function(){i(c.error)}}catch(d){i(d)}})}).catch(i)});return w(r,e),r}function dr(e,t){t=$.apply(this,arguments);var r=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var o=this,i;if(!e.name)i=y.reject("Invalid arguments");else{var n=e.name===r.name&&o._dbInfo.db,f=n?y.resolve(o._dbInfo.db):ee(e).then(function(s){var c=M[e.name],l=c.forages;c.db=s;for(var d=0;d<l.length;d++)l[d]._dbInfo.db=s;return s});e.storeName?i=f.then(function(s){if(s.objectStoreNames.contains(e.storeName)){var c=s.version+1;H(e);var l=M[e.name],d=l.forages;s.close();for(var p=0;p<d.length;p++){var S=d[p];S._dbInfo.db=null,S._dbInfo.version=c}var B=new y(function(x,Y){var U=z.open(e.name,c);U.onerror=function(q){var he=U.result;he.close(),Y(q)},U.onupgradeneeded=function(){var q=U.result;q.deleteObjectStore(e.storeName)},U.onsuccess=function(){var q=U.result;q.close(),x(q)}});return B.then(function(x){l.db=x;for(var Y=0;Y<d.length;Y++){var U=d[Y];U._dbInfo.db=x,j(U._dbInfo)}}).catch(function(x){throw(X(e,x)||y.resolve()).catch(function(){}),x})}}):i=f.then(function(s){H(e);var c=M[e.name],l=c.forages;s.close();for(var d=0;d<l.length;d++){var p=l[d];p._dbInfo.db=null}var S=new y(function(B,x){var Y=z.deleteDatabase(e.name);Y.onerror=function(){var U=Y.result;U&&U.close(),x(Y.error)},Y.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},Y.onsuccess=function(){var U=Y.result;U&&U.close(),B(U)}});return S.then(function(B){c.db=B;for(var x=0;x<l.length;x++){var Y=l[x];j(Y._dbInfo)}}).catch(function(B){throw(X(e,B)||y.resolve()).catch(function(){}),B})})}return w(i,t),i}var vr={_driver:"asyncStorage",_initStorage:ce,_support:K(),iterate:de,getItem:se,setItem:ar,removeItem:fr,clear:sr,length:ur,key:cr,keys:lr,dropInstance:dr};function hr(){return typeof openDatabase=="function"}var oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mr="~~local_forage_type~",Le=/^~~local_forage_type~([^~]+)~/,me="__lfsc__:",Ee=me.length,Se="arbf",Ae="blob",Pe="si08",Me="ui08",Fe="uic8",Ue="si16",We="si32",ze="ur16",Ye="ui32",Ke="fl32",He="fl64",Ve=Ee+Se.length,Ge=Object.prototype.toString;function je(e){var t=e.length*.75,r=e.length,o,i=0,n,f,s,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var l=new ArrayBuffer(t),d=new Uint8Array(l);for(o=0;o<r;o+=4)n=oe.indexOf(e[o]),f=oe.indexOf(e[o+1]),s=oe.indexOf(e[o+2]),c=oe.indexOf(e[o+3]),d[i++]=n<<2|f>>4,d[i++]=(f&15)<<4|s>>2,d[i++]=(s&3)<<6|c&63;return l}function Re(e){var t=new Uint8Array(e),r="",o;for(o=0;o<t.length;o+=3)r+=oe[t[o]>>2],r+=oe[(t[o]&3)<<4|t[o+1]>>4],r+=oe[(t[o+1]&15)<<2|t[o+2]>>6],r+=oe[t[o+2]&63];return t.length%3===2?r=r.substring(0,r.length-1)+"=":t.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function yr(e,t){var r="";if(e&&(r=Ge.call(e)),e&&(r==="[object ArrayBuffer]"||e.buffer&&Ge.call(e.buffer)==="[object ArrayBuffer]")){var o,i=me;e instanceof ArrayBuffer?(o=e,i+=Se):(o=e.buffer,r==="[object Int8Array]"?i+=Pe:r==="[object Uint8Array]"?i+=Me:r==="[object Uint8ClampedArray]"?i+=Fe:r==="[object Int16Array]"?i+=Ue:r==="[object Uint16Array]"?i+=ze:r==="[object Int32Array]"?i+=We:r==="[object Uint32Array]"?i+=Ye:r==="[object Float32Array]"?i+=Ke:r==="[object Float64Array]"?i+=He:t(new Error("Failed to get type for BinaryArray"))),t(i+Re(o))}else if(r==="[object Blob]"){var n=new FileReader;n.onload=function(){var f=mr+e.type+"~"+Re(this.result);t(me+Ae+f)},n.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(f){console.error("Couldn't convert value into a JSON string: ",e),t(null,f)}}function pr(e){if(e.substring(0,Ee)!==me)return JSON.parse(e);var t=e.substring(Ve),r=e.substring(Ee,Ve),o;if(r===Ae&&Le.test(t)){var i=t.match(Le);o=i[1],t=t.substring(i[0].length)}var n=je(t);switch(r){case Se:return n;case Ae:return J([n],{type:o});case Pe:return new Int8Array(n);case Me:return new Uint8Array(n);case Fe:return new Uint8ClampedArray(n);case Ue:return new Int16Array(n);case ze:return new Uint16Array(n);case We:return new Int32Array(n);case Ye:return new Uint32Array(n);case Ke:return new Float32Array(n);case He:return new Float64Array(n);default:throw new Error("Unkown type: "+r)}}var De={serialize:yr,deserialize:pr,stringToBuffer:je,bufferToString:Re};function Xe(e,t,r,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,o)}function gr(e){var t=this,r={db:null};if(e)for(var o in e)r[o]=typeof e[o]!="string"?e[o].toString():e[o];var i=new y(function(n,f){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(s){return f(s)}r.db.transaction(function(s){Xe(s,r,function(){t._dbInfo=r,n()},function(c,l){f(l)})},f)});return r.serializer=De,i}function ie(e,t,r,o,i,n){e.executeSql(r,o,i,function(f,s){s.code===s.SYNTAX_ERR?f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(c,l){l.rows.length?n(c,s):Xe(c,t,function(){c.executeSql(r,o,i,n)},n)},n):n(f,s)},n)}function br(e,t){var r=this;e=F(e);var o=new y(function(i,n){r.ready().then(function(){var f=r._dbInfo;f.db.transaction(function(s){ie(s,f,"SELECT * FROM "+f.storeName+" WHERE key = ? LIMIT 1",[e],function(c,l){var d=l.rows.length?l.rows.item(0).value:null;d&&(d=f.serializer.deserialize(d)),i(d)},function(c,l){n(l)})})}).catch(n)});return w(o,t),o}function _r(e,t){var r=this,o=new y(function(i,n){r.ready().then(function(){var f=r._dbInfo;f.db.transaction(function(s){ie(s,f,"SELECT * FROM "+f.storeName,[],function(c,l){for(var d=l.rows,p=d.length,S=0;S<p;S++){var B=d.item(S),x=B.value;if(x&&(x=f.serializer.deserialize(x)),x=e(x,B.key,S+1),x!==void 0){i(x);return}}i()},function(c,l){n(l)})})}).catch(n)});return w(o,t),o}function Qe(e,t,r,o){var i=this;e=F(e);var n=new y(function(f,s){i.ready().then(function(){t===void 0&&(t=null);var c=t,l=i._dbInfo;l.serializer.serialize(t,function(d,p){p?s(p):l.db.transaction(function(S){ie(S,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,d],function(){f(c)},function(B,x){s(x)})},function(S){if(S.code===S.QUOTA_ERR){if(o>0){f(Qe.apply(i,[e,c,r,o-1]));return}s(S)}})})}).catch(s)});return w(n,r),n}function wr(e,t,r){return Qe.apply(this,[e,t,r,1])}function Ir(e,t){var r=this;e=F(e);var o=new y(function(i,n){r.ready().then(function(){var f=r._dbInfo;f.db.transaction(function(s){ie(s,f,"DELETE FROM "+f.storeName+" WHERE key = ?",[e],function(){i()},function(c,l){n(l)})})}).catch(n)});return w(o,t),o}function Er(e){var t=this,r=new y(function(o,i){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(f){ie(f,n,"DELETE FROM "+n.storeName,[],function(){o()},function(s,c){i(c)})})}).catch(i)});return w(r,e),r}function Sr(e){var t=this,r=new y(function(o,i){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(f){ie(f,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(s,c){var l=c.rows.item(0).c;o(l)},function(s,c){i(c)})})}).catch(i)});return w(r,e),r}function Ar(e,t){var r=this,o=new y(function(i,n){r.ready().then(function(){var f=r._dbInfo;f.db.transaction(function(s){ie(s,f,"SELECT key FROM "+f.storeName+" WHERE id = ? LIMIT 1",[e+1],function(c,l){var d=l.rows.length?l.rows.item(0).key:null;i(d)},function(c,l){n(l)})})}).catch(n)});return w(o,t),o}function Rr(e){var t=this,r=new y(function(o,i){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(f){ie(f,n,"SELECT key FROM "+n.storeName,[],function(s,c){for(var l=[],d=0;d<c.rows.length;d++)l.push(c.rows.item(d).key);o(l)},function(s,c){i(c)})})}).catch(i)});return w(r,e),r}function Dr(e){return new y(function(t,r){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,n){for(var f=[],s=0;s<n.rows.length;s++)f.push(n.rows.item(s).name);t({db:e,storeNames:f})},function(i,n){r(n)})},function(o){r(o)})})}function Tr(e,t){t=$.apply(this,arguments);var r=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var o=this,i;return e.name?i=new y(function(n){var f;e.name===r.name?f=o._dbInfo.db:f=openDatabase(e.name,"","",0),e.storeName?n({db:f,storeNames:[e.storeName]}):n(Dr(f))}).then(function(n){return new y(function(f,s){n.db.transaction(function(c){function l(B){return new y(function(x,Y){c.executeSql("DROP TABLE IF EXISTS "+B,[],function(){x()},function(U,q){Y(q)})})}for(var d=[],p=0,S=n.storeNames.length;p<S;p++)d.push(l(n.storeNames[p]));y.all(d).then(function(){f()}).catch(function(B){s(B)})},function(c){s(c)})})}):i=y.reject("Invalid arguments"),w(i,t),i}var Br={_driver:"webSQLStorage",_initStorage:gr,_support:hr(),iterate:_r,getItem:br,setItem:wr,removeItem:Ir,clear:Er,length:Sr,key:Ar,keys:Rr,dropInstance:Tr};function Nr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Je(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function xr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Or(){return!xr()||localStorage.length>0}function Cr(e){var t=this,r={};if(e)for(var o in e)r[o]=e[o];return r.keyPrefix=Je(e,t._defaultConfig),Or()?(t._dbInfo=r,r.serializer=De,y.resolve()):y.reject()}function Lr(e){var t=this,r=t.ready().then(function(){for(var o=t._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);n.indexOf(o)===0&&localStorage.removeItem(n)}});return w(r,e),r}function Pr(e,t){var r=this;e=F(e);var o=r.ready().then(function(){var i=r._dbInfo,n=localStorage.getItem(i.keyPrefix+e);return n&&(n=i.serializer.deserialize(n)),n});return w(o,t),o}function Mr(e,t){var r=this,o=r.ready().then(function(){for(var i=r._dbInfo,n=i.keyPrefix,f=n.length,s=localStorage.length,c=1,l=0;l<s;l++){var d=localStorage.key(l);if(d.indexOf(n)===0){var p=localStorage.getItem(d);if(p&&(p=i.serializer.deserialize(p)),p=e(p,d.substring(f),c++),p!==void 0)return p}}});return w(o,t),o}function Fr(e,t){var r=this,o=r.ready().then(function(){var i=r._dbInfo,n;try{n=localStorage.key(e)}catch{n=null}return n&&(n=n.substring(i.keyPrefix.length)),n});return w(o,t),o}function Ur(e){var t=this,r=t.ready().then(function(){for(var o=t._dbInfo,i=localStorage.length,n=[],f=0;f<i;f++){var s=localStorage.key(f);s.indexOf(o.keyPrefix)===0&&n.push(s.substring(o.keyPrefix.length))}return n});return w(r,e),r}function Wr(e){var t=this,r=t.keys().then(function(o){return o.length});return w(r,e),r}function zr(e,t){var r=this;e=F(e);var o=r.ready().then(function(){var i=r._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return w(o,t),o}function Yr(e,t,r){var o=this;e=F(e);var i=o.ready().then(function(){t===void 0&&(t=null);var n=t;return new y(function(f,s){var c=o._dbInfo;c.serializer.serialize(t,function(l,d){if(d)s(d);else try{localStorage.setItem(c.keyPrefix+e,l),f(n)}catch(p){(p.name==="QuotaExceededError"||p.name==="NS_ERROR_DOM_QUOTA_REACHED")&&s(p),s(p)}})})});return w(i,r),i}function Kr(e,t){if(t=$.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var o=this,i;return e.name?i=new y(function(n){e.storeName?n(Je(e,o._defaultConfig)):n(e.name+"/")}).then(function(n){for(var f=localStorage.length-1;f>=0;f--){var s=localStorage.key(f);s.indexOf(n)===0&&localStorage.removeItem(s)}}):i=y.reject("Invalid arguments"),w(i,t),i}var Hr={_driver:"localStorageWrapper",_initStorage:Cr,_support:Nr(),iterate:Mr,getItem:Pr,setItem:Yr,removeItem:zr,clear:Lr,length:Wr,key:Fr,keys:Ur,dropInstance:Kr},Vr=function(t,r){return t===r||typeof t=="number"&&typeof r=="number"&&isNaN(t)&&isNaN(r)},Gr=function(t,r){for(var o=t.length,i=0;i<o;){if(Vr(t[i],r))return!0;i++}return!1},$e=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},ve={},Ze={},le={INDEXEDDB:vr,WEBSQL:Br,LOCALSTORAGE:Hr},jr=[le.INDEXEDDB._driver,le.WEBSQL._driver,le.LOCALSTORAGE._driver],ye=["dropInstance"],Te=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ye),Xr={description:"",driver:jr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Qr(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function Be(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&($e(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var Jr=function(){function e(t){V(this,e);for(var r in le)if(le.hasOwnProperty(r)){var o=le[r],i=o._driver;this[r]=i,ve[i]||this.defineDriver(o)}this._defaultConfig=Be({},Xr),this._config=Be({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(r){if((typeof r>"u"?"undefined":L(r))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in r){if(o==="storeName"&&(r[o]=r[o].replace(/\W/g,"_")),o==="version"&&typeof r[o]!="number")return new Error("Database version must be a number.");this._config[o]=r[o]}return"driver"in r&&r.driver?this.setDriver(this._config.driver):!0}else return typeof r=="string"?this._config[r]:this._config},e.prototype.defineDriver=function(r,o,i){var n=new y(function(f,s){try{var c=r._driver,l=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!r._driver){s(l);return}for(var d=Te.concat("_initStorage"),p=0,S=d.length;p<S;p++){var B=d[p],x=!Gr(ye,B);if((x||r[B])&&typeof r[B]!="function"){s(l);return}}var Y=function(){for(var he=function(qr){return function(){var kr=new Error("Method "+qr+" is not implemented by the current driver"),qe=y.reject(kr);return w(qe,arguments[arguments.length-1]),qe}},Ne=0,Zr=ye.length;Ne<Zr;Ne++){var xe=ye[Ne];r[xe]||(r[xe]=he(xe))}};Y();var U=function(he){ve[c]&&console.info("Redefining LocalForage driver: "+c),ve[c]=r,Ze[c]=he,f()};"_support"in r?r._support&&typeof r._support=="function"?r._support().then(U,s):U(!!r._support):U(!0)}catch(q){s(q)}});return T(n,o,i),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(r,o,i){var n=ve[r]?y.resolve(ve[r]):y.reject(new Error("Driver not found."));return T(n,o,i),n},e.prototype.getSerializer=function(r){var o=y.resolve(De);return T(o,r),o},e.prototype.ready=function(r){var o=this,i=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return T(i,r,r),i},e.prototype.setDriver=function(r,o,i){var n=this;$e(r)||(r=[r]);var f=this._getSupportedDrivers(r);function s(){n._config.driver=n.driver()}function c(p){return n._extend(p),s(),n._ready=n._initStorage(n._config),n._ready}function l(p){return function(){var S=0;function B(){for(;S<p.length;){var x=p[S];return S++,n._dbInfo=null,n._ready=null,n.getDriver(x).then(c).catch(B)}s();var Y=new Error("No available storage method found.");return n._driverSet=y.reject(Y),n._driverSet}return B()}}var d=this._driverSet!==null?this._driverSet.catch(function(){return y.resolve()}):y.resolve();return this._driverSet=d.then(function(){var p=f[0];return n._dbInfo=null,n._ready=null,n.getDriver(p).then(function(S){n._driver=S._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=l(f)})}).catch(function(){s();var p=new Error("No available storage method found.");return n._driverSet=y.reject(p),n._driverSet}),T(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(r){return!!Ze[r]},e.prototype._extend=function(r){Be(this,r)},e.prototype._getSupportedDrivers=function(r){for(var o=[],i=0,n=r.length;i<n;i++){var f=r[i];this.supports(f)&&o.push(f)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var r=0,o=Te.length;r<o;r++)Qr(this,Te[r])},e.prototype.createInstance=function(r){return new e(r)},e}(),$r=new Jr;W.exports=$r},{3:3}]},{},[4])(4)})});var or=ke((be,nr)=>{"use strict";(function(_,m){typeof be=="object"&&typeof nr<"u"?m(be):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],m):m(_.LocalforageDriverMemory={})})(typeof self<"u"?self:be,function(_){"use strict";var m="localforage-driver-memory";function O(a){var u=typeof Symbol=="function"&&a[Symbol.iterator],v=0;return u?u.call(a):{next:function(){return a&&v>=a.length&&(a=void 0),{value:a&&a[v++],done:!a}}}}function C(a,u){a=a||[],u=u||{};try{return new Blob(a,u)}catch(I){if(I.name!=="TypeError")throw I;for(var v=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,g=new v,b=0;b<a.length;b+=1)g.append(a[b]);return g.getBlob(u.type)}}var W=/^~~local_forage_type~([^~]+)~/,Z=9,L=Z+4,V=Object.prototype.toString;function D(a){var u=a.length*.75,v=a.length;a[a.length-1]==="="&&(u--,a[a.length-2]==="="&&u--);for(var g=new ArrayBuffer(u),b=new Uint8Array(g),I=0,R=0;I<v;I+=4){var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I]),ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I+1]),se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I+2]),de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[I+3]);b[R++]=G<<2|ce>>4,b[R++]=(ce&15)<<4|se>>2,b[R++]=(se&3)<<6|de&63}return g}function z(a){for(var u=new Uint8Array(a),v="",g=0;g<u.length;g+=3)v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[u[g]>>2],v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(u[g]&3)<<4|u[g+1]>>4],v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(u[g+1]&15)<<2|u[g+2]>>6],v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[u[g+2]&63];return u.length%3===2?v=v.substring(0,v.length-1)+"=":u.length%3===1&&(v=v.substring(0,v.length-2)+"=="),v}function K(a,u){var v="";if(a&&(v=V.call(a)),a&&(v==="[object ArrayBuffer]"||a.buffer&&V.call(a.buffer)==="[object ArrayBuffer]")){var g=void 0,b="__lfsc__:";a instanceof ArrayBuffer?(g=a,b+="arbf"):(g=a.buffer,v==="[object Int8Array]"?b+="si08":v==="[object Uint8Array]"?b+="ui08":v==="[object Uint8ClampedArray]"?b+="uic8":v==="[object Int16Array]"?b+="si16":v==="[object Uint16Array]"?b+="ur16":v==="[object Int32Array]"?b+="si32":v==="[object Uint32Array]"?b+="ui32":v==="[object Float32Array]"?b+="fl32":v==="[object Float64Array]"?b+="fl64":u(new Error("Failed to get type for BinaryArray"))),u(b+z(g))}else if(v==="[object Blob]"){var I=new FileReader;I.onload=function(){var R="~~local_forage_type~"+a.type+"~"+z(this.result);u("__lfsc__:blob"+R)},I.readAsArrayBuffer(a)}else try{u(JSON.stringify(a))}catch(R){console.error("Couldn't convert value into a JSON string: ",a),u(null,R)}}function J(a){if(a.substring(0,Z)!=="__lfsc__:")return JSON.parse(a);var u=a.substring(L),v=a.substring(Z,L),g;if(v==="blob"&&W.test(u)){var b=u.match(W);g=b[1],u=u.substring(b[0].length)}var I=D(u);switch(v){case"arbf":return I;case"blob":return C([I],{type:g});case"si08":return new Int8Array(I);case"ui08":return new Uint8Array(I);case"uic8":return new Uint8ClampedArray(I);case"si16":return new Int16Array(I);case"ur16":return new Uint16Array(I);case"si32":return new Int32Array(I);case"ui32":return new Uint32Array(I);case"fl32":return new Float32Array(I);case"fl64":return new Float64Array(I);default:throw new Error("Unkown type: "+v)}}function y(a){var u,v;if(a===null||typeof a!="object"||"isActiveClone"in a)return a;var g=a instanceof Date?new Date(a):a.constructor();try{for(var b=O(Object.keys(a)),I=b.next();!I.done;I=b.next()){var R=I.value;Object.prototype.hasOwnProperty.call(a,R)&&(a.isActiveClone=null,g[R]=y(a[R]),delete a.isActiveClone)}}catch(G){u={error:G}}finally{try{I&&!I.done&&(v=b.return)&&v.call(b)}finally{if(u)throw u.error}}return g}function w(a,u){return(a.name||u.name)+"/"+(a.storeName||u.storeName)+"/"}function T(a,u){u&&a.then(function(v){u(null,v)},function(v){u(v)})}function F(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function $(a,u){var v=this;if(u=F.apply(this,arguments),a=typeof a!="function"&&a||{},!a.name){var g=this.config();a.name=a.name||g.name,a.storeName=a.storeName||g.storeName}var b;return a.name?b=new Promise(function(I){a.storeName?I(w(a,v._defaultConfig)):I(a.name+"/")}):b=Promise.reject("Invalid arguments"),{promise:b,callback:u}}function P(a){return typeof a!="string"&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}var k={bufferToString:z,deserialize:J,serialize:K,stringToBuffer:D},M={},ue=function(){function a(u){this.kp=u,this.data={}}return a.resolve=function(u){return M[u]||(M[u]=new a(u)),M[u]},a.prototype.clear=function(){this.data={}},a.prototype.drop=function(){this.clear(),delete M[this.kp]},a.prototype.get=function(u){return this.data[u]},a.prototype.key=function(u){return this.keys()[u]},a.prototype.keys=function(){return Object.keys(this.data)},a.prototype.rm=function(u){delete this.data[u]},a.prototype.set=function(u,v){this.data[u]=v},a}();function re(a){var u=a?y(a):{},v=w(u,this._defaultConfig),g=ue.resolve(v);return this._dbInfo=u,this._dbInfo.serializer=k,this._dbInfo.keyPrefix=v,this._dbInfo.mStore=g,Promise.resolve()}function h(a){var u=this,v=this.ready().then(function(){u._dbInfo.mStore.clear()});return T(v,a),v}function A(a,u){var v=$.apply(this,arguments),g=v.promise,b=v.callback,I=g.then(function(R){ue.resolve(R).drop()});return T(I,b),g}function E(a,u){var v=this;a=P(a);var g=this.ready().then(function(){var b=v._dbInfo.mStore.get(a);return b==null?null:v._dbInfo.serializer.deserialize(b)});return T(g,u),g}function N(a,u){var v=this,g=this.ready().then(function(){for(var b=v._dbInfo.mStore,I=b.keys(),R=0;R<I.length;R++){var G=b.get(I[R]);if(G&&(G=v._dbInfo.serializer.deserialize(G)),G=a(G,I[R],R+1),G!==void 0)return G}});return T(g,u),g}function H(a,u){var v=this,g=this.ready().then(function(){var b;try{b=v._dbInfo.mStore.key(a),b===void 0&&(b=null)}catch{b=null}return b});return T(g,u),g}function j(a){var u=this,v=this.ready().then(function(){return u._dbInfo.mStore.keys()});return T(v,a),v}function X(a){var u=this.keys().then(function(v){return v.length});return T(u,a),u}function Q(a,u){var v=this;a=P(a);var g=this.ready().then(function(){v._dbInfo.mStore.rm(a)});return T(g,u),g}function ee(a,u,v){var g=this;a=P(a);var b=this.ready().then(function(){u===void 0&&(u=null);var I=u;return new Promise(function(R,G){g._dbInfo.serializer.serialize(u,function(ce,se){if(se)G(se);else try{g._dbInfo.mStore.set(a,ce),R(I)}catch(de){G(de)}})})});return T(b,v),b}var fe=!0;_._support=fe,_._driver=m,_._initStorage=re,_.clear=h,_.dropInstance=A,_.getItem=E,_.iterate=N,_.key=H,_.keys=j,_.length=X,_.removeItem=Q,_.setItem=ee,Object.defineProperty(_,"__esModule",{value:!0})})});var ne={};it(ne,{Magic:()=>ct});module.exports=at(ne);var Ie=require("@magic-sdk/provider"),we=er(tr()),Ce=er(or());var te=require("@magic-sdk/provider"),ir=require("@magic-sdk/types"),ft={display:"block",visibility:"hidden",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",opacity:"0",zIndex:"-1"};function st(_){for(let[m,O]of Object.entries(ft))_.style[m]=O}function ut(_){return!![].slice.call(document.querySelectorAll(".magic-iframe")).find(O=>O.src.includes(_))}var _e=class extends te.ViewController{activeElement=null;iframe;relayerSrc=(0,te.createURL)(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href;init(){this.test="hello",this.iframe=new Promise(m=>{let O=()=>{if(ut(encodeURIComponent(this.parameters)))(0,te.createDuplicateIframeWarning)().log();else{let C=document.createElement("iframe");C.classList.add("magic-iframe"),C.dataset.magicIframeLabel=(0,te.createURL)(this.endpoint).host,C.title="Secure Modal",C.src=this.relayerSrc,C.allow="clipboard-read; clipboard-write",st(C),document.body.appendChild(C),m(C)}};["loaded","interactive","complete"].includes(document.readyState)?O():window.addEventListener("load",O,!1)}),this.iframe.then(m=>{m instanceof HTMLIFrameElement&&m.addEventListener("load",async()=>{this.heartbeatDebounce()})}),window.addEventListener("message",m=>{if(m.origin===this.endpoint&&m.data.msgType&&(m.data.msgType.includes(ir.MagicIncomingWindowMessage.MAGIC_PONG)&&(this.lastPongTime=Date.now()),m.data&&this.messageHandlers.size)){m.data.response=m.data.response??{},this.stopHeartBeat();for(let O of this.messageHandlers.values())O(m)}}),window.addEventListener("beforeunload",()=>{this.stopHeartBeat()})}async showOverlay(){let m=await this.iframe;m.style.visibility="visible",m.style.zIndex="2147483647",m.style.opacity="1",this.activeElement=document.activeElement,m.focus()}async hideOverlay(){let m=await this.iframe;m.style.visibility="hidden",m.style.zIndex="-1",m.style.opacity="0",this.activeElement?.focus&&this.activeElement.focus(),this.activeElement=null}async _post(m){let O=await this.iframe;if(O&&O.contentWindow)O.contentWindow.postMessage(m,this.endpoint);else throw(0,te.createModalNotReadyError)()}async checkRelayerExistsInDOM(){let m=await this.iframe;return!m||!m.contentWindow?!1:!![].slice.call(document.querySelectorAll(".magic-iframe")).find(C=>C.src.includes(encodeURIComponent(this.parameters)))}async reloadRelayer(){let m=await this.iframe;if(this.stopHeartBeat(),!m){this.init(),console.warn("Magic SDK: Modal lost, re-initiating");return}if(!m.contentWindow){document.body.appendChild(m),console.warn("Magic SDK: Modal did not append in the iframe, re-initiating");return}m&&(m.src=this.relayerSrc)}};ae(ne,require("@magic-sdk/commons"),module.exports);var ct=(0,Ie.createSDK)(Ie.SDKBase,{platform:"web",sdkName:"magic-sdk",version:"29.1.0",defaultEndpoint:"https://auth.magic.link/",ViewController:_e,configureStorage:async()=>{let _=we.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return await _.defineDriver(Ce),await _.setDriver([we.default.INDEXEDDB,we.default.LOCALSTORAGE,Ce._driver]),_}});
//# sourceMappingURL=index.js.map
