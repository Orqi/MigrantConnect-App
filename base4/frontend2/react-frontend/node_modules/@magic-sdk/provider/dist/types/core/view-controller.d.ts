import { MagicIncomingWindowMessage, MagicOutgoingWindowMessage, JsonRpcRequestPayload, MagicMessageEvent, MagicMessageRequest } from '@magic-sdk/types';
import { JsonRpcResponse } from './json-rpc';
interface RemoveEventListenerFunction {
    (): void;
}
export declare abstract class ViewController {
    protected readonly endpoint: string;
    protected readonly parameters: string;
    protected readonly networkHash: string;
    isReadyForRequest: boolean;
    protected readonly messageHandlers: Set<(event: MagicMessageEvent) => any>;
    protected isConnectedToInternet: boolean;
    protected lastPongTime: null | number;
    protected heartbeatIntervalTimer: ReturnType<typeof setInterval> | null;
    protected heartbeatDebounce: () => void;
    /**
     * Create an instance of `ViewController`
     *
     * @param endpoint - The URL for the relevant iframe context.
     * @param parameters - The unique, encoded query parameters for the
     * relevant iframe context.
     * @param networkHash - The hash of the network that this sdk instance is connected to
     * for multi-chain scenarios
     */
    constructor(endpoint: string, parameters: string, networkHash: string);
    protected abstract init(): void;
    protected abstract _post(data: MagicMessageRequest): Promise<void>;
    protected abstract hideOverlay(): void;
    protected abstract showOverlay(): void;
    protected abstract checkRelayerExistsInDOM(): Promise<boolean>;
    protected abstract reloadRelayer(): Promise<void>;
    /**
     * Send a payload to the Magic `<iframe>` for processing and automatically
     * handle the acknowledging follow-up event(s).
     *
     * @param msgType - The type of message to encode with the data.
     * @param payload - The JSON RPC payload to emit via `window.postMessage`.
     */
    post<ResultType = any>(msgType: MagicOutgoingWindowMessage, payload: JsonRpcRequestPayload[]): Promise<JsonRpcResponse<ResultType>[]>;
    post<ResultType = any>(msgType: MagicOutgoingWindowMessage, payload: JsonRpcRequestPayload): Promise<JsonRpcResponse<ResultType>>;
    /**
     * Listen for events received with the given `msgType`.
     *
     * @param msgType - The `msgType` encoded with the event data.
     * @param handler - A handler function to execute on each event received.
     * @return A `void` function to remove the attached event.
     */
    on(msgType: MagicIncomingWindowMessage, handler: (this: Window, event: MagicMessageEvent) => any): RemoveEventListenerFunction;
    waitForReady(): Promise<void>;
    /**
     * Listen for messages sent from the underlying Magic `<WebView>`.
     */
    private listen;
    /**
     * Sends periodic pings to check the connection.
     * If no pong is received or itâ€™s stale, the iframe is reloaded.
     */
    private heartBeatCheck;
    protected stopHeartBeat(): void;
}
export {};
