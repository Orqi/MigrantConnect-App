{"ast":null,"code":"var zt = Object.create;\nvar Ce = Object.defineProperty;\nvar Yt = Object.getOwnPropertyDescriptor;\nvar Qt = Object.getOwnPropertyNames;\nvar Zt = Object.getPrototypeOf,\n  er = Object.prototype.hasOwnProperty;\nvar tr = (r, e) => () => (e || r((e = {\n    exports: {}\n  }).exports, e), e.exports),\n  rr = (r, e) => {\n    for (var t in e) Ce(r, t, {\n      get: e[t],\n      enumerable: !0\n    });\n  },\n  nr = (r, e, t, s) => {\n    if (e && typeof e == \"object\" || typeof e == \"function\") for (let n of Qt(e)) !er.call(r, n) && n !== t && Ce(r, n, {\n      get: () => e[n],\n      enumerable: !(s = Yt(e, n)) || s.enumerable\n    });\n    return r;\n  };\nvar sr = (r, e, t) => (t = r != null ? zt(Zt(r)) : {}, nr(e || !r || !r.__esModule ? Ce(t, \"default\", {\n  value: r,\n  enumerable: !0\n}) : t, r));\nvar Nt = tr((ls, ke) => {\n  \"use strict\";\n\n  var pn = Object.prototype.hasOwnProperty,\n    I = \"~\";\n  function se() {}\n  Object.create && (se.prototype = Object.create(null), new se().__proto__ || (I = !1));\n  function mn(r, e, t) {\n    this.fn = r, this.context = e, this.once = t || !1;\n  }\n  function Mt(r, e, t, s, n) {\n    if (typeof t != \"function\") throw new TypeError(\"The listener must be a function\");\n    var o = new mn(t, s || r, n),\n      i = I ? I + e : e;\n    return r._events[i] ? r._events[i].fn ? r._events[i] = [r._events[i], o] : r._events[i].push(o) : (r._events[i] = o, r._eventsCount++), r;\n  }\n  function fe(r, e) {\n    --r._eventsCount === 0 ? r._events = new se() : delete r._events[e];\n  }\n  function v() {\n    this._events = new se(), this._eventsCount = 0;\n  }\n  v.prototype.eventNames = function () {\n    var e = [],\n      t,\n      s;\n    if (this._eventsCount === 0) return e;\n    for (s in t = this._events) pn.call(t, s) && e.push(I ? s.slice(1) : s);\n    return Object.getOwnPropertySymbols ? e.concat(Object.getOwnPropertySymbols(t)) : e;\n  };\n  v.prototype.listeners = function (e) {\n    var t = I ? I + e : e,\n      s = this._events[t];\n    if (!s) return [];\n    if (s.fn) return [s.fn];\n    for (var n = 0, o = s.length, i = new Array(o); n < o; n++) i[n] = s[n].fn;\n    return i;\n  };\n  v.prototype.listenerCount = function (e) {\n    var t = I ? I + e : e,\n      s = this._events[t];\n    return s ? s.fn ? 1 : s.length : 0;\n  };\n  v.prototype.emit = function (e, t, s, n, o, i) {\n    var a = I ? I + e : e;\n    if (!this._events[a]) return !1;\n    var c = this._events[a],\n      d = arguments.length,\n      l,\n      u;\n    if (c.fn) {\n      switch (c.once && this.removeListener(e, c.fn, void 0, !0), d) {\n        case 1:\n          return c.fn.call(c.context), !0;\n        case 2:\n          return c.fn.call(c.context, t), !0;\n        case 3:\n          return c.fn.call(c.context, t, s), !0;\n        case 4:\n          return c.fn.call(c.context, t, s, n), !0;\n        case 5:\n          return c.fn.call(c.context, t, s, n, o), !0;\n        case 6:\n          return c.fn.call(c.context, t, s, n, o, i), !0;\n      }\n      for (u = 1, l = new Array(d - 1); u < d; u++) l[u - 1] = arguments[u];\n      c.fn.apply(c.context, l);\n    } else {\n      var P = c.length,\n        w;\n      for (u = 0; u < P; u++) switch (c[u].once && this.removeListener(e, c[u].fn, void 0, !0), d) {\n        case 1:\n          c[u].fn.call(c[u].context);\n          break;\n        case 2:\n          c[u].fn.call(c[u].context, t);\n          break;\n        case 3:\n          c[u].fn.call(c[u].context, t, s);\n          break;\n        case 4:\n          c[u].fn.call(c[u].context, t, s, n);\n          break;\n        default:\n          if (!l) for (w = 1, l = new Array(d - 1); w < d; w++) l[w - 1] = arguments[w];\n          c[u].fn.apply(c[u].context, l);\n      }\n    }\n    return !0;\n  };\n  v.prototype.on = function (e, t, s) {\n    return Mt(this, e, t, s, !1);\n  };\n  v.prototype.once = function (e, t, s) {\n    return Mt(this, e, t, s, !0);\n  };\n  v.prototype.removeListener = function (e, t, s, n) {\n    var o = I ? I + e : e;\n    if (!this._events[o]) return this;\n    if (!t) return fe(this, o), this;\n    var i = this._events[o];\n    if (i.fn) i.fn === t && (!n || i.once) && (!s || i.context === s) && fe(this, o);else {\n      for (var a = 0, c = [], d = i.length; a < d; a++) (i[a].fn !== t || n && !i[a].once || s && i[a].context !== s) && c.push(i[a]);\n      c.length ? this._events[o] = c.length === 1 ? c[0] : c : fe(this, o);\n    }\n    return this;\n  };\n  v.prototype.removeAllListeners = function (e) {\n    var t;\n    return e ? (t = I ? I + e : e, this._events[t] && fe(this, t)) : (this._events = new se(), this._eventsCount = 0), this;\n  };\n  v.prototype.off = v.prototype.removeListener;\n  v.prototype.addListener = v.prototype.on;\n  v.prefixed = I;\n  v.EventEmitter = v;\n  typeof ke < \"u\" && (ke.exports = v);\n});\nfunction or(r) {\n  let e = {\n    exports: {}\n  };\n  return r(e, e.exports), e.exports;\n}\nvar ir = Number.MAX_SAFE_INTEGER || 9007199254740991;\nvar $e = {\n    SEMVER_SPEC_VERSION: \"2.0.0\",\n    MAX_LENGTH: 256,\n    MAX_SAFE_INTEGER: ir,\n    MAX_SAFE_COMPONENT_LENGTH: 16\n  },\n  ar = typeof process == \"object\" && process.env && process.env.NODE_DEBUG && /\\bsemver\\b/i.test(process.env.NODE_DEBUG) ? (...r) => console.error(\"SEMVER\", ...r) : () => {},\n  h = ar,\n  ee = or(function (r, e) {\n    let {\n        MAX_SAFE_COMPONENT_LENGTH: t\n      } = $e,\n      s = (e = r.exports = {}).re = [],\n      n = e.src = [],\n      o = e.t = {},\n      i = 0,\n      a = (c, d, l) => {\n        let u = i++;\n        h(u, d), o[c] = u, n[u] = d, s[u] = new RegExp(d, l ? \"g\" : void 0);\n      };\n    a(\"NUMERICIDENTIFIER\", \"0|[1-9]\\\\d*\"), a(\"NUMERICIDENTIFIERLOOSE\", \"[0-9]+\"), a(\"NONNUMERICIDENTIFIER\", \"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\"), a(\"MAINVERSION\", `(${n[o.NUMERICIDENTIFIER]})\\\\.(${n[o.NUMERICIDENTIFIER]})\\\\.(${n[o.NUMERICIDENTIFIER]})`), a(\"MAINVERSIONLOOSE\", `(${n[o.NUMERICIDENTIFIERLOOSE]})\\\\.(${n[o.NUMERICIDENTIFIERLOOSE]})\\\\.(${n[o.NUMERICIDENTIFIERLOOSE]})`), a(\"PRERELEASEIDENTIFIER\", `(?:${n[o.NUMERICIDENTIFIER]}|${n[o.NONNUMERICIDENTIFIER]})`), a(\"PRERELEASEIDENTIFIERLOOSE\", `(?:${n[o.NUMERICIDENTIFIERLOOSE]}|${n[o.NONNUMERICIDENTIFIER]})`), a(\"PRERELEASE\", `(?:-(${n[o.PRERELEASEIDENTIFIER]}(?:\\\\.${n[o.PRERELEASEIDENTIFIER]})*))`), a(\"PRERELEASELOOSE\", `(?:-?(${n[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${n[o.PRERELEASEIDENTIFIERLOOSE]})*))`), a(\"BUILDIDENTIFIER\", \"[0-9A-Za-z-]+\"), a(\"BUILD\", `(?:\\\\+(${n[o.BUILDIDENTIFIER]}(?:\\\\.${n[o.BUILDIDENTIFIER]})*))`), a(\"FULLPLAIN\", `v?${n[o.MAINVERSION]}${n[o.PRERELEASE]}?${n[o.BUILD]}?`), a(\"FULL\", `^${n[o.FULLPLAIN]}$`), a(\"LOOSEPLAIN\", `[v=\\\\s]*${n[o.MAINVERSIONLOOSE]}${n[o.PRERELEASELOOSE]}?${n[o.BUILD]}?`), a(\"LOOSE\", `^${n[o.LOOSEPLAIN]}$`), a(\"GTLT\", \"((?:<|>)?=?)\"), a(\"XRANGEIDENTIFIERLOOSE\", `${n[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`), a(\"XRANGEIDENTIFIER\", `${n[o.NUMERICIDENTIFIER]}|x|X|\\\\*`), a(\"XRANGEPLAIN\", `[v=\\\\s]*(${n[o.XRANGEIDENTIFIER]})(?:\\\\.(${n[o.XRANGEIDENTIFIER]})(?:\\\\.(${n[o.XRANGEIDENTIFIER]})(?:${n[o.PRERELEASE]})?${n[o.BUILD]}?)?)?`), a(\"XRANGEPLAINLOOSE\", `[v=\\\\s]*(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:${n[o.PRERELEASELOOSE]})?${n[o.BUILD]}?)?)?`), a(\"XRANGE\", `^${n[o.GTLT]}\\\\s*${n[o.XRANGEPLAIN]}$`), a(\"XRANGELOOSE\", `^${n[o.GTLT]}\\\\s*${n[o.XRANGEPLAINLOOSE]}$`), a(\"COERCE\", `(^|[^\\\\d])(\\\\d{1,${t}})(?:\\\\.(\\\\d{1,${t}}))?(?:\\\\.(\\\\d{1,${t}}))?(?:$|[^\\\\d])`), a(\"COERCERTL\", n[o.COERCE], !0), a(\"LONETILDE\", \"(?:~>?)\"), a(\"TILDETRIM\", `(\\\\s*)${n[o.LONETILDE]}\\\\s+`, !0), e.tildeTrimReplace = \"$1~\", a(\"TILDE\", `^${n[o.LONETILDE]}${n[o.XRANGEPLAIN]}$`), a(\"TILDELOOSE\", `^${n[o.LONETILDE]}${n[o.XRANGEPLAINLOOSE]}$`), a(\"LONECARET\", \"(?:\\\\^)\"), a(\"CARETTRIM\", `(\\\\s*)${n[o.LONECARET]}\\\\s+`, !0), e.caretTrimReplace = \"$1^\", a(\"CARET\", `^${n[o.LONECARET]}${n[o.XRANGEPLAIN]}$`), a(\"CARETLOOSE\", `^${n[o.LONECARET]}${n[o.XRANGEPLAINLOOSE]}$`), a(\"COMPARATORLOOSE\", `^${n[o.GTLT]}\\\\s*(${n[o.LOOSEPLAIN]})$|^$`), a(\"COMPARATOR\", `^${n[o.GTLT]}\\\\s*(${n[o.FULLPLAIN]})$|^$`), a(\"COMPARATORTRIM\", `(\\\\s*)${n[o.GTLT]}\\\\s*(${n[o.LOOSEPLAIN]}|${n[o.XRANGEPLAIN]})`, !0), e.comparatorTrimReplace = \"$1$2$3\", a(\"HYPHENRANGE\", `^\\\\s*(${n[o.XRANGEPLAIN]})\\\\s+-\\\\s+(${n[o.XRANGEPLAIN]})\\\\s*$`), a(\"HYPHENRANGELOOSE\", `^\\\\s*(${n[o.XRANGEPLAINLOOSE]})\\\\s+-\\\\s+(${n[o.XRANGEPLAINLOOSE]})\\\\s*$`), a(\"STAR\", \"(<|>)?=?\\\\s*\\\\*\"), a(\"GTE0\", \"^\\\\s*>=\\\\s*0.0.0\\\\s*$\"), a(\"GTE0PRE\", \"^\\\\s*>=\\\\s*0.0.0-0\\\\s*$\");\n  }),\n  Xe = /^[0-9]+$/,\n  st = (r, e) => {\n    let t = Xe.test(r),\n      s = Xe.test(e);\n    return t && s && (r = +r, e = +e), r === e ? 0 : t && !s ? -1 : s && !t ? 1 : r < e ? -1 : 1;\n  },\n  cr = (r, e) => st(e, r),\n  lr = {\n    compareIdentifiers: st,\n    rcompareIdentifiers: cr\n  },\n  {\n    MAX_LENGTH: ze,\n    MAX_SAFE_INTEGER: ie\n  } = $e,\n  {\n    re: Ye,\n    t: Qe\n  } = ee,\n  {\n    compareIdentifiers: z\n  } = lr,\n  M = class r {\n    constructor(e, t) {\n      if (t && typeof t == \"object\" || (t = {\n        loose: !!t,\n        includePrerelease: !1\n      }), e instanceof r) {\n        if (e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease) return e;\n        e = e.version;\n      } else if (typeof e != \"string\") throw new TypeError(`Invalid Version: ${e}`);\n      if (e.length > ze) throw new TypeError(`version is longer than ${ze} characters`);\n      h(\"SemVer\", e, t), this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease;\n      let s = e.trim().match(t.loose ? Ye[Qe.LOOSE] : Ye[Qe.FULL]);\n      if (!s) throw new TypeError(`Invalid Version: ${e}`);\n      if (this.raw = e, this.major = +s[1], this.minor = +s[2], this.patch = +s[3], this.major > ie || this.major < 0) throw new TypeError(\"Invalid major version\");\n      if (this.minor > ie || this.minor < 0) throw new TypeError(\"Invalid minor version\");\n      if (this.patch > ie || this.patch < 0) throw new TypeError(\"Invalid patch version\");\n      s[4] ? this.prerelease = s[4].split(\".\").map(n => {\n        if (/^[0-9]+$/.test(n)) {\n          let o = +n;\n          if (o >= 0 && o < ie) return o;\n        }\n        return n;\n      }) : this.prerelease = [], this.build = s[5] ? s[5].split(\".\") : [], this.format();\n    }\n    format() {\n      return this.version = `${this.major}.${this.minor}.${this.patch}`, this.prerelease.length && (this.version += `-${this.prerelease.join(\".\")}`), this.version;\n    }\n    toString() {\n      return this.version;\n    }\n    compare(e) {\n      if (h(\"SemVer.compare\", this.version, this.options, e), !(e instanceof r)) {\n        if (typeof e == \"string\" && e === this.version) return 0;\n        e = new r(e, this.options);\n      }\n      return e.version === this.version ? 0 : this.compareMain(e) || this.comparePre(e);\n    }\n    compareMain(e) {\n      return e instanceof r || (e = new r(e, this.options)), z(this.major, e.major) || z(this.minor, e.minor) || z(this.patch, e.patch);\n    }\n    comparePre(e) {\n      if (e instanceof r || (e = new r(e, this.options)), this.prerelease.length && !e.prerelease.length) return -1;\n      if (!this.prerelease.length && e.prerelease.length) return 1;\n      if (!this.prerelease.length && !e.prerelease.length) return 0;\n      let t = 0;\n      do {\n        let s = this.prerelease[t],\n          n = e.prerelease[t];\n        if (h(\"prerelease compare\", t, s, n), s === void 0 && n === void 0) return 0;\n        if (n === void 0) return 1;\n        if (s === void 0) return -1;\n        if (s !== n) return z(s, n);\n      } while (++t);\n    }\n    compareBuild(e) {\n      e instanceof r || (e = new r(e, this.options));\n      let t = 0;\n      do {\n        let s = this.build[t],\n          n = e.build[t];\n        if (h(\"prerelease compare\", t, s, n), s === void 0 && n === void 0) return 0;\n        if (n === void 0) return 1;\n        if (s === void 0) return -1;\n        if (s !== n) return z(s, n);\n      } while (++t);\n    }\n    inc(e, t) {\n      switch (e) {\n        case \"premajor\":\n          this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc(\"pre\", t);\n          break;\n        case \"preminor\":\n          this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc(\"pre\", t);\n          break;\n        case \"prepatch\":\n          this.prerelease.length = 0, this.inc(\"patch\", t), this.inc(\"pre\", t);\n          break;\n        case \"prerelease\":\n          this.prerelease.length === 0 && this.inc(\"patch\", t), this.inc(\"pre\", t);\n          break;\n        case \"major\":\n          this.minor === 0 && this.patch === 0 && this.prerelease.length !== 0 || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];\n          break;\n        case \"minor\":\n          this.patch === 0 && this.prerelease.length !== 0 || this.minor++, this.patch = 0, this.prerelease = [];\n          break;\n        case \"patch\":\n          this.prerelease.length === 0 && this.patch++, this.prerelease = [];\n          break;\n        case \"pre\":\n          if (this.prerelease.length === 0) this.prerelease = [0];else {\n            let s = this.prerelease.length;\n            for (; --s >= 0;) typeof this.prerelease[s] == \"number\" && (this.prerelease[s]++, s = -2);\n            s === -1 && this.prerelease.push(0);\n          }\n          t && (this.prerelease[0] === t ? isNaN(this.prerelease[1]) && (this.prerelease = [t, 0]) : this.prerelease = [t, 0]);\n          break;\n        default:\n          throw new Error(`invalid increment argument: ${e}`);\n      }\n      return this.format(), this.raw = this.version, this;\n    }\n  },\n  dr = (r, e, t) => new M(r, t).compare(new M(e, t)),\n  J = dr,\n  ur = (r, e, t) => J(r, e, t) === 0,\n  pr = ur,\n  mr = (r, e, t) => J(r, e, t) !== 0,\n  hr = mr,\n  Er = (r, e, t) => J(r, e, t) > 0,\n  fr = Er,\n  gr = (r, e, t) => J(r, e, t) >= 0,\n  yr = gr,\n  Rr = (r, e, t) => J(r, e, t) < 0,\n  vr = Rr,\n  Tr = (r, e, t) => J(r, e, t) <= 0,\n  Ir = Tr,\n  br = (r, e, t, s) => {\n    switch (e) {\n      case \"===\":\n        return typeof r == \"object\" && (r = r.version), typeof t == \"object\" && (t = t.version), r === t;\n      case \"!==\":\n        return typeof r == \"object\" && (r = r.version), typeof t == \"object\" && (t = t.version), r !== t;\n      case \"\":\n      case \"=\":\n      case \"==\":\n        return pr(r, t, s);\n      case \"!=\":\n        return hr(r, t, s);\n      case \">\":\n        return fr(r, t, s);\n      case \">=\":\n        return yr(r, t, s);\n      case \"<\":\n        return vr(r, t, s);\n      case \"<=\":\n        return Ir(r, t, s);\n      default:\n        throw new TypeError(`Invalid operator: ${e}`);\n    }\n  },\n  Ae = br,\n  Y = Symbol(\"SemVer ANY\"),\n  Q = class r {\n    static get ANY() {\n      return Y;\n    }\n    constructor(e, t) {\n      if (t && typeof t == \"object\" || (t = {\n        loose: !!t,\n        includePrerelease: !1\n      }), e instanceof r) {\n        if (e.loose === !!t.loose) return e;\n        e = e.value;\n      }\n      h(\"comparator\", e, t), this.options = t, this.loose = !!t.loose, this.parse(e), this.semver === Y ? this.value = \"\" : this.value = this.operator + this.semver.version, h(\"comp\", this);\n    }\n    parse(e) {\n      let t = this.options.loose ? Ze[et.COMPARATORLOOSE] : Ze[et.COMPARATOR],\n        s = e.match(t);\n      if (!s) throw new TypeError(`Invalid comparator: ${e}`);\n      this.operator = s[1] !== void 0 ? s[1] : \"\", this.operator === \"=\" && (this.operator = \"\"), s[2] ? this.semver = new M(s[2], this.options.loose) : this.semver = Y;\n    }\n    toString() {\n      return this.value;\n    }\n    test(e) {\n      if (h(\"Comparator.test\", e, this.options.loose), this.semver === Y || e === Y) return !0;\n      if (typeof e == \"string\") try {\n        e = new M(e, this.options);\n      } catch {\n        return !1;\n      }\n      return Ae(e, this.operator, this.semver, this.options);\n    }\n    intersects(e, t) {\n      if (!(e instanceof r)) throw new TypeError(\"a Comparator is required\");\n      if (t && typeof t == \"object\" || (t = {\n        loose: !!t,\n        includePrerelease: !1\n      }), this.operator === \"\") return this.value === \"\" || new Z(e.value, t).test(this.value);\n      if (e.operator === \"\") return e.value === \"\" || new Z(this.value, t).test(e.semver);\n      let s = !(this.operator !== \">=\" && this.operator !== \">\" || e.operator !== \">=\" && e.operator !== \">\"),\n        n = !(this.operator !== \"<=\" && this.operator !== \"<\" || e.operator !== \"<=\" && e.operator !== \"<\"),\n        o = this.semver.version === e.semver.version,\n        i = !(this.operator !== \">=\" && this.operator !== \"<=\" || e.operator !== \">=\" && e.operator !== \"<=\"),\n        a = Ae(this.semver, \"<\", e.semver, t) && (this.operator === \">=\" || this.operator === \">\") && (e.operator === \"<=\" || e.operator === \"<\"),\n        c = Ae(this.semver, \">\", e.semver, t) && (this.operator === \"<=\" || this.operator === \"<\") && (e.operator === \">=\" || e.operator === \">\");\n      return s || n || o && i || a || c;\n    }\n  },\n  {\n    re: Ze,\n    t: et\n  } = ee,\n  Z = class r {\n    constructor(e, t) {\n      if (t && typeof t == \"object\" || (t = {\n        loose: !!t,\n        includePrerelease: !1\n      }), e instanceof r) return e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease ? e : new r(e.raw, t);\n      if (e instanceof Q) return this.raw = e.value, this.set = [[e]], this.format(), this;\n      if (this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease, this.raw = e, this.set = e.split(/\\s*\\|\\|\\s*/).map(s => this.parseRange(s.trim())).filter(s => s.length), !this.set.length) throw new TypeError(`Invalid SemVer Range: ${e}`);\n      this.format();\n    }\n    format() {\n      return this.range = this.set.map(e => e.join(\" \").trim()).join(\"||\").trim(), this.range;\n    }\n    toString() {\n      return this.range;\n    }\n    parseRange(e) {\n      let {\n        loose: t\n      } = this.options;\n      e = e.trim();\n      let s = t ? y[E.HYPHENRANGELOOSE] : y[E.HYPHENRANGE];\n      e = e.replace(s, kr(this.options.includePrerelease)), h(\"hyphen replace\", e), e = e.replace(y[E.COMPARATORTRIM], Pr), h(\"comparator trim\", e, y[E.COMPARATORTRIM]), e = (e = (e = e.replace(y[E.TILDETRIM], wr)).replace(y[E.CARETTRIM], Sr)).split(/\\s+/).join(\" \");\n      let n = t ? y[E.COMPARATORLOOSE] : y[E.COMPARATOR];\n      return e.split(\" \").map(o => xr(o, this.options)).join(\" \").split(/\\s+/).map(o => _r(o, this.options)).filter(this.options.loose ? o => !!o.match(n) : () => !0).map(o => new Q(o, this.options));\n    }\n    intersects(e, t) {\n      if (!(e instanceof r)) throw new TypeError(\"a Range is required\");\n      return this.set.some(s => tt(s, t) && e.set.some(n => tt(n, t) && s.every(o => n.every(i => o.intersects(i, t)))));\n    }\n    test(e) {\n      if (!e) return !1;\n      if (typeof e == \"string\") try {\n        e = new M(e, this.options);\n      } catch {\n        return !1;\n      }\n      for (let t = 0; t < this.set.length; t++) if (Dr(this.set[t], e, this.options)) return !0;\n      return !1;\n    }\n  },\n  {\n    re: y,\n    t: E,\n    comparatorTrimReplace: Pr,\n    tildeTrimReplace: wr,\n    caretTrimReplace: Sr\n  } = ee,\n  tt = (r, e) => {\n    let t = !0,\n      s = r.slice(),\n      n = s.pop();\n    for (; t && s.length;) t = s.every(o => n.intersects(o, e)), n = s.pop();\n    return t;\n  },\n  xr = (r, e) => (h(\"comp\", r, e), r = Cr(r, e), h(\"caret\", r), r = Mr(r, e), h(\"tildes\", r), r = $r(r, e), h(\"xrange\", r), r = Or(r, e), h(\"stars\", r), r),\n  T = r => !r || r.toLowerCase() === \"x\" || r === \"*\",\n  Mr = (r, e) => r.trim().split(/\\s+/).map(t => Nr(t, e)).join(\" \"),\n  Nr = (r, e) => {\n    let t = e.loose ? y[E.TILDELOOSE] : y[E.TILDE];\n    return r.replace(t, (s, n, o, i, a) => {\n      let c;\n      return h(\"tilde\", r, s, n, o, i, a), T(n) ? c = \"\" : T(o) ? c = `>=${n}.0.0 <${+n + 1}.0.0-0` : T(i) ? c = `>=${n}.${o}.0 <${n}.${+o + 1}.0-0` : a ? (h(\"replaceTilde pr\", a), c = `>=${n}.${o}.${i}-${a} <${n}.${+o + 1}.0-0`) : c = `>=${n}.${o}.${i} <${n}.${+o + 1}.0-0`, h(\"tilde return\", c), c;\n    });\n  },\n  Cr = (r, e) => r.trim().split(/\\s+/).map(t => Ar(t, e)).join(\" \"),\n  Ar = (r, e) => {\n    h(\"caret\", r, e);\n    let t = e.loose ? y[E.CARETLOOSE] : y[E.CARET],\n      s = e.includePrerelease ? \"-0\" : \"\";\n    return r.replace(t, (n, o, i, a, c) => {\n      let d;\n      return h(\"caret\", r, n, o, i, a, c), T(o) ? d = \"\" : T(i) ? d = `>=${o}.0.0${s} <${+o + 1}.0.0-0` : T(a) ? d = o === \"0\" ? `>=${o}.${i}.0${s} <${o}.${+i + 1}.0-0` : `>=${o}.${i}.0${s} <${+o + 1}.0.0-0` : c ? (h(\"replaceCaret pr\", c), d = o === \"0\" ? i === \"0\" ? `>=${o}.${i}.${a}-${c} <${o}.${i}.${+a + 1}-0` : `>=${o}.${i}.${a}-${c} <${o}.${+i + 1}.0-0` : `>=${o}.${i}.${a}-${c} <${+o + 1}.0.0-0`) : (h(\"no pr\"), d = o === \"0\" ? i === \"0\" ? `>=${o}.${i}.${a}${s} <${o}.${i}.${+a + 1}-0` : `>=${o}.${i}.${a}${s} <${o}.${+i + 1}.0-0` : `>=${o}.${i}.${a} <${+o + 1}.0.0-0`), h(\"caret return\", d), d;\n    });\n  },\n  $r = (r, e) => (h(\"replaceXRanges\", r, e), r.split(/\\s+/).map(t => Lr(t, e)).join(\" \")),\n  Lr = (r, e) => {\n    r = r.trim();\n    let t = e.loose ? y[E.XRANGELOOSE] : y[E.XRANGE];\n    return r.replace(t, (s, n, o, i, a, c) => {\n      h(\"xRange\", r, s, n, o, i, a, c);\n      let d = T(o),\n        l = d || T(i),\n        u = l || T(a),\n        P = u;\n      return n === \"=\" && P && (n = \"\"), c = e.includePrerelease ? \"-0\" : \"\", d ? s = n === \">\" || n === \"<\" ? \"<0.0.0-0\" : \"*\" : n && P ? (l && (i = 0), a = 0, n === \">\" ? (n = \">=\", l ? (o = +o + 1, i = 0, a = 0) : (i = +i + 1, a = 0)) : n === \"<=\" && (n = \"<\", l ? o = +o + 1 : i = +i + 1), n === \"<\" && (c = \"-0\"), s = `${n + o}.${i}.${a}${c}`) : l ? s = `>=${o}.0.0${c} <${+o + 1}.0.0-0` : u && (s = `>=${o}.${i}.0${c} <${o}.${+i + 1}.0-0`), h(\"xRange return\", s), s;\n    });\n  },\n  Or = (r, e) => (h(\"replaceStars\", r, e), r.trim().replace(y[E.STAR], \"\")),\n  _r = (r, e) => (h(\"replaceGTE0\", r, e), r.trim().replace(y[e.includePrerelease ? E.GTE0PRE : E.GTE0], \"\")),\n  kr = r => (e, t, s, n, o, i, a, c, d, l, u, P, w) => `${t = T(s) ? \"\" : T(n) ? `>=${s}.0.0${r ? \"-0\" : \"\"}` : T(o) ? `>=${s}.${n}.0${r ? \"-0\" : \"\"}` : i ? `>=${t}` : `>=${t}${r ? \"-0\" : \"\"}`} ${c = T(d) ? \"\" : T(l) ? `<${+d + 1}.0.0-0` : T(u) ? `<${d}.${+l + 1}.0-0` : P ? `<=${d}.${l}.${u}-${P}` : r ? `<${d}.${l}.${+u + 1}-0` : `<=${c}`}`.trim(),\n  Dr = (r, e, t) => {\n    for (let s = 0; s < r.length; s++) if (!r[s].test(e)) return !1;\n    if (e.prerelease.length && !t.includePrerelease) {\n      for (let s = 0; s < r.length; s++) if (h(r[s].semver), r[s].semver !== Q.ANY && r[s].semver.prerelease.length > 0) {\n        let n = r[s].semver;\n        if (n.major === e.major && n.minor === e.minor && n.patch === e.patch) return !0;\n      }\n      return !1;\n    }\n    return !0;\n  },\n  ot = (r, e, t) => {\n    try {\n      e = new Z(e, t);\n    } catch {\n      return !1;\n    }\n    return e.test(r);\n  };\nvar {\n    MAX_LENGTH: qr\n  } = $e,\n  {\n    re: rt,\n    t: nt\n  } = ee,\n  Ur = (r, e) => {\n    if (e && typeof e == \"object\" || (e = {\n      loose: !!e,\n      includePrerelease: !1\n    }), r instanceof M) return r;\n    if (typeof r != \"string\" || r.length > qr || !(e.loose ? rt[nt.LOOSE] : rt[nt.FULL]).test(r)) return null;\n    try {\n      return new M(r, e);\n    } catch {\n      return null;\n    }\n  },\n  Fr = Ur,\n  {\n    re: ae,\n    t: ce\n  } = ee,\n  it = (r, e) => {\n    if (r instanceof M) return r;\n    if (typeof r == \"number\" && (r = String(r)), typeof r != \"string\") return null;\n    let t = null;\n    if ((e = e || {}).rtl) {\n      let s;\n      for (; (s = ae[ce.COERCERTL].exec(r)) && (!t || t.index + t[0].length !== r.length);) t && s.index + s[0].length === t.index + t[0].length || (t = s), ae[ce.COERCERTL].lastIndex = s.index + s[1].length + s[2].length;\n      ae[ce.COERCERTL].lastIndex = -1;\n    } else t = r.match(ae[ce.COERCE]);\n    return t === null ? null : Fr(`${t[2]}.${t[3] || \"0\"}.${t[4] || \"0\"}`, e);\n  };\nfunction Wr(r) {\n  return String.fromCharCode(parseInt(r.slice(1), 16));\n}\nfunction Jr(r) {\n  return `%${`00${r.charCodeAt(0).toString(16)}`.slice(-2)}`;\n}\nfunction Gr(r) {\n  return btoa(encodeURIComponent(r).replace(/%[0-9A-F]{2}/g, Wr));\n}\nfunction Kr(r) {\n  return decodeURIComponent(Array.from(atob(r), Jr).join(\"\"));\n}\nfunction le(r) {\n  return Gr(JSON.stringify(r));\n}\nfunction at(r) {\n  return JSON.parse(Kr(r));\n}\nimport { RPCErrorCode as Xr, SDKErrorCode as G, SDKWarningCode as pe } from \"@magic-sdk/types\";\nimport { MagicPayloadMethod as jr, RPCErrorCode as Vr } from \"@magic-sdk/types\";\nfunction C(r) {\n  return typeof r > \"u\";\n}\nfunction Br(r) {\n  return r === null;\n}\nfunction de(r) {\n  return Br(r) || C(r);\n}\nfunction Un(r) {\n  return de(r) ? !1 : !C(r.jsonrpc) && !C(r.id) && !C(r.method) && !C(r.params);\n}\nfunction ct(r) {\n  return de(r) ? !1 : !C(r.jsonrpc) && !C(r.id) && (!C(r.result) || !C(r.error));\n}\nfunction Fn(r) {\n  return de(r) ? !1 : typeof r == \"string\" && Object.values(jr).includes(r);\n}\nfunction lt(r) {\n  return de(r) ? !1 : typeof r == \"number\" && Object.values(Vr).includes(r);\n}\nfunction te(r) {\n  if (!r) return !0;\n  for (let e in r) if (Object.hasOwnProperty.call(r, e)) return !1;\n  return !0;\n}\nvar m = {};\nfunction Hr(r, e) {\n  return Object.assign(m, e), r;\n}\nvar dt = {\n  \"magic-sdk\": \"magic-sdk\",\n  \"@magic-sdk/react-native\": \"magic-sdk-rn\",\n  \"@magic-sdk/react-native-bare\": \"magic-sdk-rn-bare\",\n  \"@magic-sdk/react-native-expo\": \"magic-sdk-rn-expo\"\n};\nvar $ = class r extends Error {\n    constructor(t, s) {\n      super(`Magic SDK Error: [${t}] ${s}`);\n      this.code = t;\n      this.rawMessage = s;\n      Object.setPrototypeOf(this, r.prototype);\n    }\n    __proto__ = Error;\n  },\n  U = class r extends Error {\n    __proto__ = Error;\n    code;\n    rawMessage;\n    data;\n    constructor(e) {\n      super();\n      let t = Number(e?.code);\n      this.rawMessage = e?.message || \"Internal error\", this.code = lt(t) ? t : Xr.InternalError, this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`, this.data = e?.data || void 0, Object.setPrototypeOf(this, r.prototype);\n    }\n  },\n  L = class {\n    constructor(e, t) {\n      this.code = e;\n      this.rawMessage = t;\n      this.message = `Magic SDK Warning: [${e}] ${t}`;\n    }\n    message;\n    log() {\n      console.warn(this.message);\n    }\n  },\n  ue = class r extends Error {\n    constructor(t, s, n, o) {\n      super(`Magic Extension Error (${t.name}): [${s}] ${n}`);\n      this.code = s;\n      this.rawMessage = n;\n      this.data = o;\n      Object.setPrototypeOf(this, r.prototype);\n    }\n    __proto__ = Error;\n  },\n  re = class {\n    constructor(e, t, s) {\n      this.code = t;\n      this.rawMessage = s;\n      this.message = `Magic Extension Warning (${e.name}): [${t}] ${s}`;\n    }\n    message;\n    log() {\n      console.warn(this.message);\n    }\n  };\nfunction ut() {\n  return new $(G.MissingApiKey, \"Please provide an API key that you acquired from the Magic developer dashboard.\");\n}\nfunction pt() {\n  return new $(G.ModalNotReady, \"Modal is not ready\");\n}\nfunction mt() {\n  return new $(G.MalformedResponse, \"Response from the Magic iframe is malformed.\");\n}\nfunction ht(r) {\n  return new $(G.ExtensionNotInitialized, `Extensions must be initialized with a Magic SDK instance before \\`Extension.${r}\\` can be accessed. Do not invoke \\`Extension.${r}\\` inside an extension constructor.`);\n}\nfunction Et(r) {\n  let e = `Some extensions are incompatible with \\`${m.sdkName}@${m.version}\\`:`;\n  return r.filter(t => typeof t.compat < \"u\" && t.compat !== null).forEach(t => {\n    let s = t.compat[m.sdkName];\n    typeof s == \"string\" ? e += `\n  - Extension \\`${t.name}\\` supports version(s) \\`${s}\\`` : s || (e += `\n  - Extension \\`${t.name}\\` does not support ${m.platform} environments.`);\n  }), new $(G.IncompatibleExtensions, e);\n}\nfunction ft(r) {\n  let e = t => {\n    let s = t + 1,\n      n = s % 10,\n      o = s % 100;\n    return n === 1 && o !== 11 ? `${s}st` : n === 2 && o !== 12 ? `${s}nd` : n === 3 && o !== 13 ? `${s}rd` : `${s}th`;\n  };\n  return new $(G.InvalidArgument, `Invalid ${e(r.argument)} argument given to \\`${r.procedure}\\`.\n  Expected: \\`${r.expected}\\`\n  Received: \\`${r.received}\\``);\n}\nfunction Bn() {\n  return new L(pe.DuplicateIframe, \"Duplicate iframes found.\");\n}\nfunction gt() {\n  return new L(pe.SyncWeb3Method, \"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.\");\n}\nfunction yt() {\n  return new L(pe.ReactNativeEndpointConfiguration, `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \\`endpoint\\` parameter SHOULD NOT be provided. The Magic \\`<iframe>\\` is automatically wrapped by a WebView pointed at \\`${m.defaultEndpoint}\\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`);\n}\nfunction Rt(r) {\n  let {\n      method: e,\n      removalVersions: t,\n      useInstead: s\n    } = r,\n    n = t[m.sdkName],\n    o = s ? ` Use \\`${s}\\` instead.` : \"\",\n    i = `\\`${e}\\` will be removed from \\`${m.sdkName}\\` in version \\`${n}\\`.${o}`;\n  return new L(pe.DeprecationNotice, i);\n}\nimport { MagicPayloadMethod as x, DeviceVerificationEventEmit as Ot, LoginWithEmailOTPEventEmit as N, UpdateEmailEventEmit as j, RecencyCheckEventEmit as _, LoginWithSmsOTPEventEmit as ye } from \"@magic-sdk/types\";\nimport { MagicOutgoingWindowMessage as fn, MagicIncomingWindowMessage as gn, MagicPayloadMethod as yn, routeToMagicMethods as Rn } from \"@magic-sdk/types\";\nimport { RPCErrorCode as dn } from \"@magic-sdk/types\";\nfunction* zr() {\n  let r = 0;\n  for (;;) r < Number.MAX_SAFE_INTEGER ? yield ++r : r = 0;\n}\nvar Yr = zr();\nfunction Le() {\n  return Yr.next().value;\n}\nvar he = {};\nrr(he, {\n  clear: () => Qr,\n  getItem: () => R,\n  iterate: () => Oe,\n  key: () => en,\n  keys: () => tn,\n  length: () => Zr,\n  removeItem: () => A,\n  setItem: () => S\n});\nvar me;\nfunction O(r) {\n  return async (...e) => (me || (me = await m.configureStorage()), await me.ready(), me[r](...e));\n}\nvar R = O(\"getItem\"),\n  S = O(\"setItem\"),\n  A = O(\"removeItem\"),\n  Qr = O(\"clear\"),\n  Zr = O(\"length\"),\n  en = O(\"key\"),\n  tn = O(\"keys\"),\n  Oe = O(\"iterate\");\nfunction vt() {\n  let r = window.crypto.getRandomValues(new Uint8Array(16));\n  r[6] = r[6] & 15 | 64, r[8] = r[8] & 191 | 128;\n  let e = \"\";\n  return e += r[0].toString(16), e += r[1].toString(16), e += r[2].toString(16), e += r[3].toString(16), e += \"-\", e += r[4].toString(16), e += r[5].toString(16), e += \"-\", e += r[6].toString(16), e += r[7].toString(16), e += \"-\", e += r[8].toString(16), e += r[9].toString(16), e += \"-\", e += r[10].toString(16), e += r[11].toString(16), e += r[12].toString(16), e += r[13].toString(16), e += r[14].toString(16), e += r[15].toString(16), e;\n}\nvar _e = \"STORE_KEY_PRIVATE_KEY\",\n  Ee = \"STORE_KEY_PUBLIC_JWK\",\n  It = \"ECDSA\",\n  rn = \"P-256\",\n  nn = {\n    name: It,\n    namedCurve: rn\n  };\nfunction ne() {\n  let r = typeof window < \"u\" && !!window.crypto,\n    e = r && !!window.crypto.subtle;\n  return r && e;\n}\nfunction bt() {\n  A(Ee), A(_e);\n}\nasync function Pt() {\n  let r = await sn();\n  if (!r) {\n    console.info(\"unable to create public key or webcrypto is unsupported\");\n    return;\n  }\n  let {\n      subtle: e\n    } = window.crypto,\n    t = await R(_e);\n  if (!t || !e) {\n    console.info(\"unable to find private key or webcrypto unsupported\");\n    return;\n  }\n  let s = {\n      iat: Math.floor(new Date().getTime() / 1e3),\n      jti: vt()\n    },\n    o = {\n      protected: Tt(JSON.stringify({\n        typ: \"dpop+jwt\",\n        alg: \"ES256\",\n        jwk: r\n      })),\n      claims: Tt(JSON.stringify(s))\n    },\n    i = an(`${o.protected}.${o.claims}`),\n    a = {\n      name: It,\n      hash: {\n        name: \"SHA-256\"\n      }\n    },\n    c = ln(new Uint8Array(await e.sign(a, t, i)));\n  return `${o.protected}.${o.claims}.${c}`;\n}\nasync function sn() {\n  if (!ne()) {\n    console.info(\"webcrypto is not supported\");\n    return;\n  }\n  return (await R(Ee)) || (await on()), R(Ee);\n}\nasync function on() {\n  let {\n      subtle: r\n    } = window.crypto,\n    e = await r.generateKey(nn, !1, [\"sign\"]),\n    t = await r.exportKey(\"jwk\", e.publicKey);\n  await S(_e, e.privateKey), await S(Ee, t);\n}\nfunction Tt(r) {\n  return wt(cn(r));\n}\nfunction an(r) {\n  return new TextEncoder().encode(r);\n}\nfunction wt(r) {\n  return btoa(r).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+/g, \"\");\n}\nfunction cn(r) {\n  return encodeURIComponent(r).replace(/%([0-9A-F]{2})/g, (t, s) => String.fromCharCode(parseInt(s, 16)));\n}\nfunction ln(r) {\n  let e = \"\";\n  return r.forEach(t => {\n    e += String.fromCharCode(t);\n  }), wt(e);\n}\nvar St = Symbol(\"Payload pre-processed by Magic SDK\");\nfunction xt(r) {\n  return Object.defineProperty(r, St, {\n    value: !0,\n    enumerable: !1\n  }), r;\n}\nfunction un(r) {\n  return !!r[St];\n}\nfunction F(r) {\n  return un(r) || (r.jsonrpc = r.jsonrpc ?? \"2.0\", r.id = Le(), r.method = r.method ?? \"noop\", r.params = r.params ?? [], xt(r)), r;\n}\nfunction p(r, e = []) {\n  return xt({\n    params: e,\n    method: r,\n    jsonrpc: \"2.0\",\n    id: Le()\n  });\n}\nvar K = class r {\n  _jsonrpc;\n  _id;\n  _result;\n  _error;\n  constructor(e) {\n    e instanceof r ? (this._jsonrpc = e.payload.jsonrpc, this._id = e.payload.id, this._result = e.payload.result, this._error = e.payload.error) : ct(e) ? (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = e.result, this._error = e.error) : (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = void 0, this._error = void 0);\n  }\n  applyError(e) {\n    return this._error = e, this;\n  }\n  applyResult(e) {\n    return this._result = e, this;\n  }\n  get hasError() {\n    return this._error?.code === dn.DpopInvalidated && bt(), typeof this._error < \"u\" && this._error !== null;\n  }\n  get hasResult() {\n    return typeof this._result < \"u\";\n  }\n  get payload() {\n    return {\n      jsonrpc: this._jsonrpc,\n      id: this._id,\n      result: this._result,\n      error: this._error\n    };\n  }\n};\nimport { UserEventsEmit as hn, UserEventsOnReceived as En } from \"@magic-sdk/types\";\nvar Ct = sr(Nt()),\n  De = class extends Ct.default {};\nfunction ge() {\n  let r = new De();\n  return {\n    emitter: r,\n    createChainingEmitterMethod: (s, n) => (...o) => (r[s].apply(r, o), n),\n    createBoundEmitterMethod: s => (...n) => r[s].apply(r, n)\n  };\n}\nvar At = Symbol(\"isPromiEvent\");\nfunction $t(r) {\n  return !!r[At];\n}\nfunction b(r) {\n  let e = qe(r),\n    {\n      createBoundEmitterMethod: t,\n      createChainingEmitterMethod: s\n    } = ge(),\n    n = Symbol(\"Promise.then\"),\n    o = Symbol(\"Promise.catch\"),\n    i = Symbol(\"Promise.finally\"),\n    a = (l, u) => (...P) => {\n      let w = u[l].apply(u, P);\n      return c(w);\n    },\n    c = l => Object.assign(l, {\n      [At]: !0,\n      [n]: l[n] || l.then,\n      [o]: l[o] || l.catch,\n      [i]: l[i] || l.finally,\n      then: a(n, l),\n      catch: a(o, l),\n      finally: a(i, l),\n      on: s(\"on\", l),\n      once: s(\"once\", l),\n      addListener: s(\"addListener\", l),\n      off: s(\"off\", l),\n      removeListener: s(\"removeListener\", l),\n      removeAllListeners: s(\"removeAllListeners\", l),\n      emit: t(\"emit\"),\n      eventNames: t(\"eventNames\"),\n      listeners: t(\"listeners\"),\n      listenerCount: t(\"listenerCount\")\n    }),\n    d = c(e.then(l => (d.emit(\"done\", l), d.emit(\"settled\"), l), l => {\n      throw d.emit(\"error\", l), d.emit(\"settled\"), l;\n    }));\n  return d.on(En.ClosedByUser, () => {\n    d.emit(hn.ClosedByUser);\n  }), d;\n}\nfunction qe(r) {\n  return new Promise((e, t) => {\n    let s = r(e, t);\n    Promise.resolve(s).catch(t);\n  });\n}\nvar f = class {\n  constructor(e) {\n    this.sdk = e;\n  }\n  get overlay() {\n    return this.sdk.overlay;\n  }\n  request(e) {\n    if (this.sdk.thirdPartyWallets.isConnected && !Rn.includes(e.method)) return b((i, a) => {\n      this.sdk.thirdPartyWallets.requestOverride(e).then(i).catch(a);\n    });\n    let t = this.overlay.post(fn.MAGIC_HANDLE_REQUEST, F(e)),\n      s = b((o, i) => {\n        t.then(a => {\n          if (n(), a.hasError) i(new U(a.payload.error));else if (a.hasResult) o(a.payload.result);else throw mt();\n        }).catch(a => {\n          n(), i(a);\n        });\n      }),\n      n = this.overlay.on(gn.MAGIC_HANDLE_EVENT, o => {\n        let {\n          response: i\n        } = o.data;\n        if (i.id === e.id && i.result?.event) {\n          let {\n            event: a,\n            params: c = []\n          } = i.result;\n          s.emit(a, ...c);\n        }\n      });\n    return s;\n  }\n  createIntermediaryEvent(e, t) {\n    return n => {\n      let o = p(yn.IntermediaryEvent, [{\n        payloadId: t,\n        eventType: e,\n        args: n\n      }]);\n      this.request(o);\n    };\n  }\n};\nfunction Lt(r, e) {\n  let [t] = r.split(\".\").map(Number);\n  return t >= e;\n}\nvar vn = {\n    \"magic-sdk\": \"v18.0.0\",\n    \"@magic-sdk/react-native\": \"v14.0.0\",\n    \"@magic-sdk/react-native-bare\": \"v19.0.0\",\n    \"@magic-sdk/react-native-expo\": \"v19.0.0\"\n  },\n  Re = class extends f {\n    loginWithMagicLink(e) {\n      let t = m.sdkName === \"@magic-sdk/react-native\" || m.sdkName === \"@magic-sdk/react-native-bare\" || m.sdkName === \"@magic-sdk/react-native-expo\";\n      if (t && Lt(m.version, 19)) throw new Error(\"loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.\");\n      t && Rt({\n        method: \"auth.loginWithMagicLink()\",\n        removalVersions: vn,\n        useInstead: \"auth.loginWithEmailOTP()\"\n      }).log();\n      let {\n          email: s,\n          showUI: n = !0,\n          redirectURI: o,\n          overrides: i,\n          lifespan: a\n        } = e,\n        c = p(this.sdk.testMode ? x.LoginWithMagicLinkTestMode : x.LoginWithMagicLink, [{\n          email: s,\n          showUI: n,\n          redirectURI: o,\n          overrides: i,\n          lifespan: a\n        }]);\n      return this.request(c);\n    }\n    loginWithSMS(e) {\n      let {\n          phoneNumber: t,\n          showUI: s = !0,\n          lifespan: n\n        } = e,\n        o = p(this.sdk.testMode ? x.LoginWithSmsTestMode : x.LoginWithSms, [{\n          phoneNumber: t,\n          showUI: s,\n          lifespan: n\n        }]),\n        i = this.request(o);\n      return !s && i && (i.on(ye.VerifySmsOtp, a => {\n        this.createIntermediaryEvent(ye.VerifySmsOtp, o.id)(a);\n      }), i.on(ye.Cancel, () => {\n        this.createIntermediaryEvent(ye.Cancel, o.id)();\n      })), i;\n    }\n    loginWithEmailOTP(e) {\n      let {\n          email: t,\n          showUI: s,\n          deviceCheckUI: n,\n          overrides: o,\n          lifespan: i\n        } = e,\n        a = p(this.sdk.testMode ? x.LoginWithEmailOTPTestMode : x.LoginWithEmailOTP, [{\n          email: t,\n          showUI: s,\n          deviceCheckUI: n,\n          overrides: o,\n          lifespan: i\n        }]),\n        c = this.request(a);\n      return !n && c && c.on(Ot.Retry, () => {\n        this.createIntermediaryEvent(Ot.Retry, a.id)();\n      }), !s && c && (c.on(N.VerifyEmailOtp, d => {\n        this.createIntermediaryEvent(N.VerifyEmailOtp, a.id)(d);\n      }), c.on(N.VerifyMFACode, d => {\n        this.createIntermediaryEvent(N.VerifyMFACode, a.id)(d);\n      }), c.on(N.LostDevice, () => {\n        this.createIntermediaryEvent(N.LostDevice, a.id)();\n      }), c.on(N.VerifyRecoveryCode, d => {\n        this.createIntermediaryEvent(N.VerifyRecoveryCode, a.id)(d);\n      }), c.on(N.Cancel, () => {\n        this.createIntermediaryEvent(N.Cancel, a.id)();\n      })), c;\n    }\n    loginWithCredential(e) {\n      let {\n          credentialOrQueryString: t,\n          lifespan: s\n        } = e || {},\n        n = t ?? \"\";\n      if (!t && m.platform === \"web\") {\n        n = window.location.search;\n        let i = window.location.origin + window.location.pathname;\n        window.history.replaceState(null, \"\", i);\n      }\n      let o = p(this.sdk.testMode ? x.LoginWithCredentialTestMode : x.LoginWithCredential, [n, s]);\n      return this.request(o);\n    }\n    setAuthorizationToken(e) {\n      let t = p(x.SetAuthorizationToken, [{\n        jwt: e\n      }]);\n      return this.request(t);\n    }\n    updateEmailWithUI(e) {\n      let {\n          email: t,\n          showUI: s = !0\n        } = e,\n        n = p(this.sdk.testMode ? x.UpdateEmailTestMode : x.UpdateEmail, [{\n          email: t,\n          showUI: s\n        }]),\n        o = this.request(n);\n      return s || (o.on(_.Retry, () => {\n        this.createIntermediaryEvent(_.Retry, n.id)();\n      }), o.on(_.Cancel, () => {\n        this.createIntermediaryEvent(_.Cancel, n.id)();\n      }), o.on(_.VerifyEmailOtp, i => {\n        this.createIntermediaryEvent(_.VerifyEmailOtp, n.id)(i);\n      }), o.on(_.VerifyMFACode, i => {\n        this.createIntermediaryEvent(_.VerifyMFACode, n.id)(i);\n      }), o.on(j.RetryWithNewEmail, i => {\n        this.createIntermediaryEvent(j.RetryWithNewEmail, n.id)(i);\n      }), o.on(j.Cancel, () => {\n        this.createIntermediaryEvent(j.Cancel, n.id)();\n      }), o.on(j.VerifyEmailOtp, i => {\n        this.createIntermediaryEvent(j.VerifyEmailOtp, n.id)(i);\n      })), o;\n    }\n  };\nimport { MagicPayloadMethod as g, EnableMFAEventEmit as Te, DisableMFAEventEmit as V, RecencyCheckEventEmit as Ut, RecoveryFactorEventEmit as k, RecoverAccountEventEmit as D, UpdateEmailEventEmit as B } from \"@magic-sdk/types\";\nvar Ue = \"ds\",\n  Fe = \"ek\",\n  We = \"iv\",\n  Je = \"AES-GCM\",\n  Tn = 256;\nasync function ve() {\n  let r = [];\n  await Oe((e, t, s) => {\n    t.startsWith(`${Ue}_`) && r.push(t);\n  });\n  for (let e of r) await A(e);\n}\nfunction _t(r) {\n  let e = \"\",\n    t = new Uint8Array(r),\n    s = t.byteLength;\n  for (let n = 0; n < s; n++) e += String.fromCharCode(t[n]);\n  return window.btoa(e);\n}\nfunction kt(r) {\n  let e = window.atob(r),\n    t = e.length,\n    s = new Uint8Array(t);\n  for (let n = 0; n < t; n++) s[n] = e.charCodeAt(n);\n  return s.buffer;\n}\nasync function In() {\n  if (!ne()) {\n    console.info(\"webcrypto is not supported\");\n    return;\n  }\n  let {\n      crypto: r\n    } = window,\n    e = await R(We);\n  return e || r.getRandomValues(new Uint8Array(12));\n}\nasync function bn() {\n  if (!ne()) {\n    console.info(\"webcrypto is not supported\");\n    return;\n  }\n  let {\n      subtle: r\n    } = window.crypto,\n    e = await R(Fe);\n  return e || (await r.generateKey({\n    name: Je,\n    length: Tn\n  }, !1, [\"encrypt\", \"decrypt\"]));\n}\nasync function Dt(r, e) {\n  let t = await In(),\n    s = await bn();\n  if (!t || !s || !r) return;\n  let n = kt(r),\n    {\n      subtle: o\n    } = window.crypto,\n    i = await o.encrypt({\n      name: Je,\n      iv: t\n    }, s, n),\n    a = _t(i);\n  await S(`${Ue}_${e}`, a), await S(Fe, s), await S(We, t);\n}\nasync function qt(r) {\n  let e = await R(`${Ue}_${r}`),\n    t = await R(We),\n    s = await R(Fe);\n  if (!t || !e || !s || !ne()) return;\n  let {\n      subtle: n\n    } = window.crypto,\n    o = await n.decrypt({\n      name: Je,\n      iv: t\n    }, s, kt(e));\n  return _t(o);\n}\nfunction Ge(r, e) {\n  return e ? new URL(r, e) : new URL(r);\n}\nvar Ie = class extends f {\n  getIdToken(e) {\n    let t = p(this.sdk.testMode ? g.GetIdTokenTestMode : g.GetIdToken, [e]);\n    return this.request(t);\n  }\n  generateIdToken(e) {\n    let t = p(this.sdk.testMode ? g.GenerateIdTokenTestMode : g.GenerateIdToken, [e]);\n    return this.request(t);\n  }\n  getInfo() {\n    let e = p(g.GetInfo, []);\n    return this.request(e);\n  }\n  isLoggedIn() {\n    return b(async (e, t) => {\n      try {\n        let s = !1;\n        this.sdk.useStorageCache && (s = (await R(this.localForageIsLoggedInKey)) === \"true\", s && e(!0));\n        let n = p(this.sdk.testMode ? g.IsLoggedInTestMode : g.IsLoggedIn),\n          o = await this.request(n);\n        this.sdk.useStorageCache && (o ? S(this.localForageIsLoggedInKey, !0) : A(this.localForageIsLoggedInKey), s && !o && this.emitUserLoggedOut(!0)), e(o);\n      } catch (s) {\n        t(s);\n      }\n    });\n  }\n  logout() {\n    return A(this.localForageIsLoggedInKey), ve(), b(async (e, t) => {\n      try {\n        let s = p(this.sdk.testMode ? g.LogoutTestMode : g.Logout),\n          n = await this.request(s);\n        this.sdk.useStorageCache && this.emitUserLoggedOut(n), e(n);\n      } catch (s) {\n        t(s);\n      }\n    });\n  }\n  requestInfoWithUI(e) {\n    let t = p(g.RequestUserInfoWithUI, e ? [e] : []);\n    return this.request(t);\n  }\n  showSettings(e) {\n    let {\n        showUI: t = !0\n      } = e || {},\n      s = p(this.sdk.testMode ? g.UserSettingsTestMode : g.UserSettings, [e]),\n      n = this.request(s);\n    return !t && n && (n.on(k.SendNewPhoneNumber, o => {\n      this.createIntermediaryEvent(k.SendNewPhoneNumber, s.id)(o);\n    }), n.on(k.SendOtpCode, o => {\n      this.createIntermediaryEvent(k.SendOtpCode, s.id)(o);\n    }), n.on(k.StartEditPhoneNumber, () => {\n      this.createIntermediaryEvent(k.StartEditPhoneNumber, s.id)();\n    }), n.on(k.Cancel, () => {\n      this.createIntermediaryEvent(k.Cancel, s.id)();\n    }), n.on(Ut.VerifyEmailOtp, o => {\n      this.createIntermediaryEvent(Ut.VerifyEmailOtp, s.id)(o);\n    })), n;\n  }\n  recoverAccount(e) {\n    let {\n        email: t,\n        showUI: s\n      } = e,\n      n = p(this.sdk.testMode ? g.RecoverAccountTestMode : g.RecoverAccount, [{\n        email: t,\n        showUI: s\n      }]),\n      o = this.request(n);\n    return !s && o && (o.on(D.Cancel, () => {\n      this.createIntermediaryEvent(D.Cancel, n.id)();\n    }), o.on(D.ResendSms, () => {\n      this.createIntermediaryEvent(D.ResendSms, n.id)();\n    }), o.on(D.VerifyOtp, i => {\n      this.createIntermediaryEvent(D.VerifyOtp, n.id)(i);\n    }), o.on(D.UpdateEmail, i => {\n      this.createIntermediaryEvent(D.UpdateEmail, n.id)(i);\n    }), o.on(B.Cancel, () => {\n      this.createIntermediaryEvent(B.Cancel, n.id)();\n    }), o.on(B.RetryWithNewEmail, i => {\n      this.createIntermediaryEvent(B.RetryWithNewEmail, n.id)(i);\n    }), o.on(B.VerifyEmailOtp, i => {\n      this.createIntermediaryEvent(B.VerifyEmailOtp, n.id)(i);\n    })), o;\n  }\n  revealPrivateKey() {\n    let e = p(g.RevealPK);\n    return this.request(e);\n  }\n  onUserLoggedOut(e) {\n    this.userLoggedOutCallbacks.push(e);\n  }\n  enableMFA(e) {\n    let {\n        showUI: t = !0\n      } = e,\n      s = p(g.EnableMFA, [{\n        showUI: t\n      }]),\n      n = this.request(s);\n    return !t && n && (n.on(Te.VerifyMFACode, o => {\n      this.createIntermediaryEvent(Te.VerifyMFACode, s.id)(o);\n    }), n.on(Te.Cancel, () => {\n      this.createIntermediaryEvent(Te.Cancel, s.id)();\n    })), n;\n  }\n  disableMFA(e) {\n    let {\n        showUI: t = !0\n      } = e,\n      s = p(g.DisableMFA, [{\n        showUI: t\n      }]),\n      n = this.request(s);\n    return !t && n && (n.on(V.VerifyMFACode, o => {\n      this.createIntermediaryEvent(V.VerifyMFACode, s.id)(o);\n    }), n.on(V.LostDevice, o => {\n      this.createIntermediaryEvent(V.LostDevice, s.id)(o);\n    }), n.on(V.Cancel, () => {\n      this.createIntermediaryEvent(V.Cancel, s.id)();\n    })), n;\n  }\n  emitUserLoggedOut(e) {\n    this.userLoggedOutCallbacks.forEach(t => {\n      t(e);\n    });\n  }\n  localForageIsLoggedInKey = \"magic_auth_is_logged_in\";\n  userLoggedOutCallbacks = [];\n};\nimport { MagicPayloadMethod as q } from \"@magic-sdk/types\";\nvar be = class extends f {\n  connectWithUI(e) {\n    let t = b(async (s, n) => {\n      try {\n        let o = p(q.Login, [{\n            enabledWallets: this.sdk.thirdPartyWallets.enabledWallets,\n            ...e\n          }]),\n          i = this.request(o);\n        this.sdk.thirdPartyWallets.eventListeners.forEach(({\n          event: c,\n          callback: d\n        }) => {\n          i.on(c, () => d(o.id));\n        }), i.on(\"id-token-created\", c => {\n          t.emit(\"id-token-created\", c);\n        });\n        let a = await i;\n        a.error && n(a), s(a);\n      } catch (o) {\n        n(o);\n      }\n    });\n    return t;\n  }\n  showUI(e) {\n    return this.request(p(q.ShowUI, [e]));\n  }\n  showAddress() {\n    return this.request(p(q.ShowAddress));\n  }\n  showSendTokensUI() {\n    return this.request(p(q.ShowSendTokensUI));\n  }\n  showOnRamp() {\n    return this.request(p(q.ShowOnRamp));\n  }\n  showNFTs() {\n    return this.request(p(q.ShowNFTs));\n  }\n  showBalances() {\n    return this.request(p(q.ShowBalances));\n  }\n  sendGaslessTransaction(e, t) {\n    return this.request(p(q.SendGaslessTransaction, [e, t]));\n  }\n};\nimport { LocalStorageKeys as W, MagicPayloadMethod as Pe } from \"@magic-sdk/types\";\nvar we = class extends f {\n  eventListeners = [];\n  enabledWallets = {};\n  isConnected = !1;\n  resetThirdPartyWalletState() {\n    localStorage.removeItem(W.PROVIDER), localStorage.removeItem(W.ADDRESS), localStorage.removeItem(W.CHAIN_ID), this.isConnected = !1;\n  }\n  requestOverride(e) {\n    if (e.method === Pe.Login) return this.resetThirdPartyWalletState(), super.request(e);\n    if (e.method === Pe.GetInfo) return this.getInfo(e);\n    if (e.method === Pe.IsLoggedIn) return this.isLoggedIn(e);\n    if (e.method === Pe.Logout) return this.logout(e);\n    switch (localStorage.getItem(W.PROVIDER)) {\n      case \"web3modal\":\n        return this.web3modalRequest(e);\n      default:\n        return this.resetThirdPartyWalletState(), super.request(e);\n    }\n  }\n  isLoggedIn(e) {\n    switch (localStorage.getItem(W.PROVIDER)) {\n      case \"web3modal\":\n        return this.web3modalIsLoggedIn();\n      default:\n        return this.resetThirdPartyWalletState(), super.request(e);\n    }\n  }\n  getInfo(e) {\n    switch (localStorage.getItem(W.PROVIDER)) {\n      case \"web3modal\":\n        return this.web3modalGetInfo();\n      default:\n        return this.resetThirdPartyWalletState(), super.request(e);\n    }\n  }\n  logout(e) {\n    let t = localStorage.getItem(W.PROVIDER);\n    switch (this.resetThirdPartyWalletState(), t) {\n      case \"web3modal\":\n        return this.web3modalLogout();\n      default:\n        return super.request(e);\n    }\n  }\n  web3modalRequest(e) {\n    return b((t, s) => {\n      this.sdk.web3modal.modal.getWalletProvider().request(e).then(t).catch(s);\n    });\n  }\n  web3modalIsLoggedIn() {\n    return b(e => {\n      let t = this.sdk.web3modal.modal.getStatus();\n      if (t === \"connected\" && e(!0), t === \"disconnected\" && (this.resetThirdPartyWalletState(), e(!1)), t === \"reconnecting\") {\n        let s = this.sdk.web3modal.modal.subscribeProvider(({\n          status: n\n        }) => {\n          n === \"connected\" && (s(), e(!0)), n === \"disconnected\" && (s(), this.resetThirdPartyWalletState(), e(!1));\n        });\n      }\n    });\n  }\n  formatWeb3modalGetInfoResponse() {\n    let e = this.sdk.web3modal.modal.getWalletInfo()?.name,\n      t = this.sdk.web3modal.modal.getAddress();\n    return {\n      publicAddress: t,\n      email: null,\n      issuer: `did:ethr:${t}`,\n      phoneNumber: null,\n      isMfaEnabled: !1,\n      recoveryFactors: [],\n      walletType: e || \"web3modal\",\n      firstLoginAt: null\n    };\n  }\n  web3modalGetInfo() {\n    return b((e, t) => {\n      let s = this.sdk.web3modal.modal.getStatus();\n      if (s === \"connected\" && e(this.formatWeb3modalGetInfoResponse()), s === \"disconnected\" && (this.resetThirdPartyWalletState(), t(\"Magic RPC Error: [-32603] Internal error: User denied account access.\")), s === \"reconnecting\") {\n        let n = this.sdk.web3modal.modal.subscribeProvider(({\n          status: o\n        }) => {\n          o === \"connected\" && (n(), e(this.formatWeb3modalGetInfoResponse())), o === \"disconnected\" && (n(), this.resetThirdPartyWalletState(), t(\"Magic RPC Error: [-32603] Internal error: User denied account access.\"));\n        });\n      }\n    });\n  }\n  web3modalLogout() {\n    return b(async e => {\n      try {\n        await this.sdk.web3modal.modal.disconnect();\n      } catch (t) {\n        console.error(t);\n      }\n      e(!0);\n    });\n  }\n};\nimport { MagicOutgoingWindowMessage as Ft, MagicPayloadMethod as Pn } from \"@magic-sdk/types\";\nvar {\n    createBoundEmitterMethod: Se,\n    createChainingEmitterMethod: H\n  } = ge(),\n  xe = class extends f {\n    isMagic = !0;\n    sendAsync(e, t) {\n      if (!t) throw ft({\n        procedure: \"Magic.rpcProvider.sendAsync\",\n        argument: 1,\n        expected: \"function\",\n        received: t === null ? \"null\" : typeof t\n      });\n      if (Array.isArray(e)) this.overlay.post(Ft.MAGIC_HANDLE_REQUEST, e.map(s => {\n        let n = F(s);\n        return this.prefixPayloadMethodForTestMode(n), n;\n      })).then(s => {\n        t(null, s.map(n => ({\n          ...n.payload,\n          error: n.hasError ? new U(n.payload.error) : null\n        })));\n      });else {\n        let s = F(e);\n        this.prefixPayloadMethodForTestMode(s), this.overlay.post(Ft.MAGIC_HANDLE_REQUEST, s).then(n => {\n          t(n.hasError ? new U(n.payload.error) : null, n.payload);\n        });\n      }\n    }\n    send(e, t) {\n      if (typeof e == \"string\") {\n        let n = p(e, Array.isArray(t) ? t : []);\n        return this.request(n);\n      }\n      if (Array.isArray(e) || t) {\n        this.sendAsync(e, t);\n        return;\n      }\n      let s = gt();\n      return s.log(), new K(e).applyError({\n        code: -32603,\n        message: s.rawMessage\n      }).payload;\n    }\n    enable() {\n      let e = p(Pn.Login);\n      return this.request(e);\n    }\n    request(e) {\n      return this.prefixPayloadMethodForTestMode(e), super.request(e);\n    }\n    prefixPayloadMethodForTestMode(e) {\n      let t = \"testMode/eth/\";\n      this.sdk.testMode && (e.method = `${t}${e.method}`);\n    }\n    on = H(\"on\", this);\n    once = H(\"once\", this);\n    addListener = H(\"addListener\", this);\n    off = H(\"off\", this);\n    removeListener = H(\"removeListener\", this);\n    removeAllListeners = H(\"removeAllListeners\", this);\n    emit = Se(\"emit\");\n    eventNames = Se(\"eventNames\");\n    listeners = Se(\"listeners\");\n    listenerCount = Se(\"listenerCount\");\n  };\nvar Wt = [\"request\", \"overlay\", \"sdk\"];\nfunction wn(r) {\n  let e = Object.getPrototypeOf(r),\n    t = [e];\n  for (; e !== f.prototype;) e = Object.getPrototypeOf(e), t.push(e);\n  return t;\n}\nvar Ke = class extends f {\n    compat;\n    __sdk_access_field_descriptors__ = new Map();\n    __is_initialized__ = !1;\n    utils = {\n      createPromiEvent: b,\n      isPromiEvent: $t,\n      encodeJSON: le,\n      decodeJSON: at,\n      createJsonRpcRequestPayload: p,\n      standardizeJsonRpcRequestPayload: F,\n      storage: he\n    };\n    constructor() {\n      super(void 0);\n      let e = [this, ...wn(this)];\n      Wt.forEach(t => {\n        let s = e.map(a => Object.getOwnPropertyDescriptor(a, t)),\n          n = s.findIndex(a => !!a),\n          o = n > 0,\n          i = s[n];\n        i && (this.__sdk_access_field_descriptors__.set(t, {\n          descriptor: i,\n          isPrototypeField: o\n        }), Object.defineProperty(this, t, {\n          configurable: !0,\n          get: () => {\n            throw ht(t);\n          }\n        }));\n      });\n    }\n    init(e) {\n      this.__is_initialized__ || (Wt.forEach(t => {\n        if (this.__sdk_access_field_descriptors__.has(t)) {\n          let {\n            descriptor: s,\n            isPrototypeField: n\n          } = this.__sdk_access_field_descriptors__.get(t);\n          n ? delete this[t] : Object.defineProperty(this, t, s);\n        }\n      }), this.sdk = e, this.__is_initialized__ = !0);\n    }\n    createDeprecationWarning(e) {\n      let {\n          method: t,\n          removalVersion: s,\n          useInstead: n\n        } = e,\n        o = n ? ` Use \\`${n}\\` instead.` : \"\",\n        i = `\\`${t}\\` will be removed from this Extension in version \\`${s}\\`.${o}`;\n      return new re(this, \"DEPRECATION_NOTICE\", i);\n    }\n    createWarning(e, t) {\n      return new re(this, e, t);\n    }\n    createError(e, t, s) {\n      return new ue(this, e, t, s);\n    }\n  },\n  je = class extends Ke {},\n  X = class {\n    static Internal = je;\n  };\nimport { MagicPayloadMethod as Ve, NftCheckoutIntermediaryEvents as Me } from \"@magic-sdk/types\";\nvar Ne = class extends f {\n  purchase(e) {\n    let t = p(Ve.NFTPurchase, [e]);\n    return this.request(t);\n  }\n  checkout(e) {\n    let t = this.sdk.thirdPartyWallets.isConnected,\n      s = p(Ve.NFTCheckout, [{\n        ...e,\n        walletProvider: t ? \"web3modal\" : \"magic\"\n      }]),\n      n = this.request(s);\n    return t && (n.on(Me.Initiated, async o => {\n      try {\n        let i = await this.request({\n          method: \"eth_sendTransaction\",\n          params: [o]\n        });\n        this.createIntermediaryEvent(Me.Success, s.id)(i);\n      } catch {\n        this.createIntermediaryEvent(Me.Failure, s.id)();\n      }\n    }), n.on(Me.Disconnect, () => {\n      this.sdk.thirdPartyWallets.resetThirdPartyWalletState(), n.emit(\"disconnect\");\n    })), n;\n  }\n  transfer(e) {\n    let t = p(Ve.NFTTransfer, [e]);\n    return this.request(t);\n  }\n};\nfunction Jt(r) {\n  return r.compat && r.compat[m.sdkName] != null ? typeof r.compat[m.sdkName] == \"string\" ? ot(it(m.version), r.compat[m.sdkName]) : !!r.compat[m.sdkName] : !0;\n}\nfunction Sn(r, e, t) {\n  return !e && !t ? `${r}_eth_mainnet` : t ? `${r}_${JSON.stringify(t)}` : e ? typeof e == \"string\" ? `${r}_eth_${e}` : `${r}_${e.rpcUrl}_${e.chainId}_${e.chainType}` : `${r}_unknown`;\n}\nfunction xn(r) {\n  let e = r?.extensions ?? [],\n    t = {},\n    s = [];\n  if (Array.isArray(e) ? e.forEach(n => {\n    Jt(n) ? (n.init(this), n.name && (this[n.name] = n), n instanceof X.Internal && (te(n.config) || (t[n.name] = n.config))) : s.push(n);\n  }) : Object.keys(e).forEach(n => {\n    if (Jt(e[n])) {\n      e[n].init(this);\n      let o = e[n];\n      this[n] = o, o instanceof X.Internal && (te(o.config) || (t[e[n].name] = o.config));\n    } else s.push(e[n]);\n  }), s.length) throw Et(s);\n  return t;\n}\nvar Be = class r {\n  constructor(e, t) {\n    this.apiKey = e;\n    if (!e) throw ut();\n    m.platform === \"react-native\" && t?.endpoint && yt().log();\n    let {\n      defaultEndpoint: s,\n      version: n\n    } = m;\n    this.testMode = !!t?.testMode, this.useStorageCache = !!t?.useStorageCache, this.endpoint = Ge(t?.endpoint ?? s).origin, this.auth = new Re(this), this.user = new Ie(this), this.wallet = new be(this), this.nft = new Ne(this), this.thirdPartyWallets = new we(this), this.rpcProvider = new xe(this);\n    let o = xn.call(this, t);\n    this.parameters = le({\n      API_KEY: this.apiKey,\n      DOMAIN_ORIGIN: window.location ? window.location.origin : \"\",\n      ETH_NETWORK: t?.network,\n      host: Ge(this.endpoint).host,\n      sdk: dt[m.sdkName],\n      version: n,\n      ext: te(o) ? void 0 : o,\n      locale: t?.locale || \"en_US\",\n      ...(m.bundleId ? {\n        bundleId: m.bundleId\n      } : {}),\n      meta: t?.meta\n    }), this.networkHash = Sn(this.apiKey, t?.network, te(o) ? void 0 : o), t?.deferPreload || this.preload();\n  }\n  static __overlays__ = new Map();\n  endpoint;\n  parameters;\n  networkHash;\n  testMode;\n  useStorageCache;\n  auth;\n  user;\n  wallet;\n  nft;\n  thirdPartyWallets;\n  rpcProvider;\n  get overlay() {\n    if (!r.__overlays__.has(this.parameters)) {\n      let e = new m.ViewController(this.endpoint, this.parameters, this.networkHash);\n      e.init(), r.__overlays__.set(this.parameters, e);\n    }\n    return r.__overlays__.get(this.parameters);\n  }\n  async preload() {\n    await this.overlay.waitForReady();\n  }\n};\nimport { MagicIncomingWindowMessage as oe, MagicOutgoingWindowMessage as Nn, SDKWarningCode as Cn } from \"@magic-sdk/types\";\nfunction Mn(r, e) {\n  return e && Array.isArray(r) ? r.find(t => t.id === e) : r;\n}\nfunction Gt(r, e) {\n  let t = e.data.response?.id,\n    s = Mn(r, t);\n  if (t && s) {\n    let n = new K(s).applyResult(e.data.response.result).applyError(e.data.response.error);\n    return {\n      id: t,\n      response: n\n    };\n  }\n  return {};\n}\nasync function Kt(r, e, t) {\n  let s = await R(\"rt\"),\n    n;\n  if (m.platform === \"web\") try {\n    n = (await R(\"jwt\")) ?? (await Pt());\n  } catch (a) {\n    console.error(\"webcrypto error\", a);\n  }\n  let o = {\n    msgType: r,\n    payload: e\n  };\n  n && (o.jwt = n), n && s && (o.rt = s);\n  let i = await qt(t);\n  return i && (o.deviceShare = i), o;\n}\nasync function jt(r) {\n  r.data.rt && (await S(\"rt\", r.data.rt));\n}\nfunction Vt(r, e) {\n  let t = null;\n  return function (...s) {\n    t && clearTimeout(t), t = setTimeout(() => {\n      r(...s);\n    }, e);\n  };\n}\nvar An = 1e3,\n  Ht = 60 * An,\n  Bt = 5 * Ht,\n  $n = 60 * Ht,\n  He = class {\n    constructor(e, t, s) {\n      this.endpoint = e;\n      this.parameters = t;\n      this.networkHash = s;\n      this.listen();\n    }\n    isReadyForRequest = !1;\n    messageHandlers = new Set();\n    isConnectedToInternet = !0;\n    lastPongTime = null;\n    heartbeatIntervalTimer = null;\n    heartbeatDebounce = Vt(() => {\n      this.endpoint === \"https://auth.magic.link/\" && this.heartBeatCheck();\n    }, $n);\n    async post(e, t) {\n      return qe(async (s, n) => {\n        if (!this.isConnectedToInternet) {\n          let l = pt();\n          n(l);\n        }\n        (await this.checkRelayerExistsInDOM()) || (this.isReadyForRequest = !1, await this.reloadRelayer()), this.isReadyForRequest || (await this.waitForReady());\n        let o = [],\n          i = Array.isArray(t) ? t.map(l => l.id) : [],\n          a = await Kt(`${e}-${this.parameters}`, t, this.networkHash);\n        await this._post(a);\n        let c = l => u => {\n            let {\n              id: P,\n              response: w\n            } = Gt(t, u);\n            if (jt(u), w?.payload.error?.message === \"User denied account access.\") ve();else if (u.data.deviceShare) {\n              let {\n                deviceShare: Xt\n              } = u.data;\n              Dt(Xt, this.networkHash);\n            }\n            P && w && Array.isArray(t) && i.includes(P) ? (o.push(w), o.length === t.length && (l(), s(o))) : P && w && !Array.isArray(t) && P === t.id && (l(), s(w));\n          },\n          d = this.on(oe.MAGIC_HANDLE_RESPONSE, c(() => d()));\n      });\n    }\n    on(e, t) {\n      let s = t.bind(window),\n        n = o => {\n          o.data.msgType === `${e}-${this.parameters}` && s(o);\n        };\n      return this.messageHandlers.add(n), () => this.messageHandlers.delete(n);\n    }\n    waitForReady() {\n      return new Promise(e => {\n        let t = this.on(oe.MAGIC_OVERLAY_READY, () => {\n          this.isReadyForRequest = !0, e(), t();\n        });\n      });\n    }\n    listen() {\n      this.on(oe.MAGIC_HIDE_OVERLAY, () => {\n        this.hideOverlay();\n      }), this.on(oe.MAGIC_SHOW_OVERLAY, () => {\n        this.showOverlay();\n      }), this.on(oe.MAGIC_SEND_PRODUCT_ANNOUNCEMENT, e => {\n        e.data.response.result.product_announcement && new L(Cn.ProductAnnouncement, e.data.response.result.product_announcement).log();\n      });\n    }\n    heartBeatCheck() {\n      let e = !0,\n        t = async () => {\n          let s = {\n            msgType: `${Nn.MAGIC_PING}-${this.parameters}`,\n            payload: []\n          };\n          await this._post(s);\n        };\n      this.heartbeatIntervalTimer = setInterval(async () => {\n        if (this.lastPongTime) {\n          if (Date.now() - this.lastPongTime > Bt * 2) {\n            this.reloadRelayer(), e = !0;\n            return;\n          }\n        } else if (!e) {\n          this.reloadRelayer(), e = !0;\n          return;\n        }\n        await t(), e = !1;\n      }, Bt);\n    }\n    stopHeartBeat() {\n      this.heartbeatDebounce(), this.lastPongTime = null, this.heartbeatIntervalTimer && (clearInterval(this.heartbeatIntervalTimer), this.heartbeatIntervalTimer = null);\n    }\n  };\nexport { X as Extension, ue as MagicExtensionError, re as MagicExtensionWarning, U as MagicRPCError, $ as MagicSDKError, L as MagicSDKWarning, Be as SDKBase, _e as STORE_KEY_PRIVATE_KEY, Ee as STORE_KEY_PUBLIC_JWK, De as TypedEmitter, He as ViewController, bt as clearKeys, Rt as createDeprecationWarning, Bn as createDuplicateIframeWarning, ht as createExtensionNotInitializedError, Et as createIncompatibleExtensionsError, ft as createInvalidArgumentError, Pt as createJwt, mt as createMalformedResponseError, ut as createMissingApiKeyError, pt as createModalNotReadyError, b as createPromiEvent, qe as createPromise, yt as createReactNativeEndpointConfigurationWarning, Hr as createSDK, gt as createSynchronousWeb3MethodWarning, ge as createTypedEmitter, Ge as createURL, at as decodeJSON, le as encodeJSON, Le as getPayloadId, te as isEmpty, lt as isJsonRpcErrorCode, Un as isJsonRpcRequestPayload, ct as isJsonRpcResponsePayload, Fn as isMagicPayloadMethod, Lt as isMajorVersionAtLeast, $t as isPromiEvent, ne as isWebCryptoSupported, he as storage, vt as uuid };","map":{"version":3,"names":["Nt","tr","ls","ke","pn","Object","prototype","hasOwnProperty","I","se","create","__proto__","mn","r","e","t","fn","context","once","Mt","s","n","TypeError","o","i","_events","push","_eventsCount","fe","v","eventNames","call","slice","getOwnPropertySymbols","concat","listeners","length","Array","listenerCount","emit","a","c","d","arguments","l","u","removeListener","apply","P","w","on","removeAllListeners","off","addListener","prefixed","EventEmitter","exports","or","ir","Number","MAX_SAFE_INTEGER","$e","SEMVER_SPEC_VERSION","MAX_LENGTH","MAX_SAFE_COMPONENT_LENGTH","ar","process","env","NODE_DEBUG","test","console","error","h","ee","re","src","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCE","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","Xe","st","compareIdentifiers$1","cr","rcompareIdentifiers","lr","compareIdentifiers","ze","ie","Ye","Qe","z","M","constructor","loose","includePrerelease","version","options","trim","match","LOOSE","FULL","raw","major","minor","patch","prerelease","split","map","build","format","join","toString","compare","compareMain","comparePre","compareBuild","inc","isNaN","Error","dr","J","ur","eq","pr","mr","neq","hr","Er","gt","fr","gr","gte","yr","Rr","lt","vr","Tr","lte","Ir","br","cmp","Ae","Y","Symbol","Q","ANY","value","parse","semver","operator","Ze","et","COMPARATORLOOSE","COMPARATOR","intersects","Z","set","parseRange","filter","range","y","E","HYPHENRANGELOOSE","HYPHENRANGE","replace","kr","COMPARATORTRIM","Pr","TILDETRIM","wr","CARETTRIM","Sr","xr","_r","some","tt","every","Dr","isSatisfiable","pop","parseComparator","Cr","Mr","$r","Or","T","toLowerCase","replaceTildes","Nr","replaceTilde","TILDELOOSE","TILDE","replaceCarets","Ar","replaceCaret","CARETLOOSE","CARET","replaceXRanges","Lr","replaceXRange","XRANGELOOSE","XRANGE","replaceStars","STAR","replaceGTE0","GTE0PRE","GTE0","testSet","ot","satisfies","qr","rt","nt","Ur","Fr","ae","ce","it","coerce","String","rtl","COERCERTL","exec","index","lastIndex","Wr","fromCharCode","parseInt","Jr","charCodeAt","Gr","btoa","encodeURIComponent","Kr","decodeURIComponent","from","atob","le","JSON","stringify","at","RPCErrorCode","Xr","SDKErrorCode","G","SDKWarningCode","pe","MagicPayloadMethod","jr","Vr","C","Br","de","Un","jsonrpc","id","method","params","ct","result","Fn","values","includes","te","m","Hr","assign","dt","$","code","rawMessage","setPrototypeOf","U","data","message","InternalError","L","log","warn","ue","name","ut","MissingApiKey","pt","ModalNotReady","mt","MalformedResponse","ht","ExtensionNotInitialized","Et","sdkName","compat","forEach","platform","IncompatibleExtensions","ft","InvalidArgument","argument","procedure","expected","received","Bn","DuplicateIframe","SyncWeb3Method","yt","ReactNativeEndpointConfiguration","defaultEndpoint","Rt","removalVersions","useInstead","DeprecationNotice","x","DeviceVerificationEventEmit","Ot","LoginWithEmailOTPEventEmit","N","UpdateEmailEventEmit","j","RecencyCheckEventEmit","_","LoginWithSmsOTPEventEmit","ye","MagicOutgoingWindowMessage","MagicIncomingWindowMessage","gn","yn","routeToMagicMethods","Rn","dn","zr","Yr","Le","next","he","rr","clear","Qr","getItem","R","iterate","Oe","key","en","keys","tn","Zr","removeItem","A","setItem","S","me","O","configureStorage","ready","vt","window","crypto","getRandomValues","Uint8Array","_e","Ee","It","rn","nn","namedCurve","ne","subtle","bt","Pt","sn","info","iat","Math","floor","Date","getTime","jti","protected","Tt","typ","alg","jwk","claims","an","hash","ln","sign","generateKey","exportKey","publicKey","privateKey","wt","cn","TextEncoder","encode","St","xt","defineProperty","enumerable","un","F","p","K","_jsonrpc","_id","_result","_error","payload","applyError","applyResult","hasError","DpopInvalidated","hasResult","UserEventsEmit","hn","UserEventsOnReceived","En","Ct","sr","De","default","ge","emitter","createChainingEmitterMethod","createBoundEmitterMethod","At","$t","b","qe","createChainingPromiseMethod","then","catch","finally","ClosedByUser","Promise","resolve","f","sdk","overlay","request","thirdPartyWallets","isConnected","requestOverride","post","MAGIC_HANDLE_REQUEST","MAGIC_HANDLE_EVENT","response","event","createIntermediaryEvent","IntermediaryEvent","payloadId","eventType","args","Lt","vn","Re","loginWithMagicLink","email","showUI","redirectURI","overrides","lifespan","testMode","LoginWithMagicLinkTestMode","LoginWithMagicLink","loginWithSMS","phoneNumber","LoginWithSmsTestMode","LoginWithSms","VerifySmsOtp","Cancel","loginWithEmailOTP","deviceCheckUI","LoginWithEmailOTPTestMode","LoginWithEmailOTP","Retry","VerifyEmailOtp","VerifyMFACode","LostDevice","VerifyRecoveryCode","loginWithCredential","credentialOrQueryString","location","search","origin","pathname","history","replaceState","LoginWithCredentialTestMode","LoginWithCredential","setAuthorizationToken","SetAuthorizationToken","jwt","updateEmailWithUI","UpdateEmailTestMode","UpdateEmail","RetryWithNewEmail","g","EnableMFAEventEmit","Te","DisableMFAEventEmit","V","Ut","RecoveryFactorEventEmit","k","RecoverAccountEventEmit","D","B","Ue","Fe","We","Je","Tn","ve","startsWith","_t","byteLength","kt","buffer","In","bn","Dt","encrypt","iv","qt","decrypt","Ge","URL","Ie","getIdToken","GetIdTokenTestMode","GetIdToken","generateIdToken","GenerateIdTokenTestMode","GenerateIdToken","getInfo","GetInfo","isLoggedIn","useStorageCache","localForageIsLoggedInKey","IsLoggedInTestMode","IsLoggedIn","emitUserLoggedOut","logout","LogoutTestMode","Logout","requestInfoWithUI","RequestUserInfoWithUI","showSettings","UserSettingsTestMode","UserSettings","SendNewPhoneNumber","SendOtpCode","StartEditPhoneNumber","recoverAccount","RecoverAccountTestMode","RecoverAccount","ResendSms","VerifyOtp","revealPrivateKey","RevealPK","onUserLoggedOut","userLoggedOutCallbacks","enableMFA","EnableMFA","disableMFA","DisableMFA","q","be","connectWithUI","Login","enabledWallets","eventListeners","callback","ShowUI","showAddress","ShowAddress","showSendTokensUI","ShowSendTokensUI","showOnRamp","ShowOnRamp","showNFTs","ShowNFTs","showBalances","ShowBalances","sendGaslessTransaction","SendGaslessTransaction","LocalStorageKeys","W","Pe","we","resetThirdPartyWalletState","localStorage","PROVIDER","ADDRESS","CHAIN_ID","web3modalRequest","web3modalIsLoggedIn","web3modalGetInfo","web3modalLogout","web3modal","modal","getWalletProvider","getStatus","subscribeProvider","status","formatWeb3modalGetInfoResponse","getWalletInfo","getAddress","publicAddress","issuer","isMfaEnabled","recoveryFactors","walletType","firstLoginAt","disconnect","Ft","Pn","Se","H","xe","isMagic","sendAsync","isArray","prefixPayloadMethodForTestMode","send","enable","Wt","wn","getPrototypeOf","Ke","__sdk_access_field_descriptors__","Map","__is_initialized__","utils","createPromiEvent","isPromiEvent","encodeJSON","decodeJSON","createJsonRpcRequestPayload","standardizeJsonRpcRequestPayload","storage","getOwnPropertyDescriptor","findIndex","descriptor","isPrototypeField","configurable","get","init","has","createDeprecationWarning","removalVersion","createWarning","createError","je","X","Internal","Ve","NftCheckoutIntermediaryEvents","Me","Ne","purchase","NFTPurchase","checkout","NFTCheckout","walletProvider","Initiated","Success","Failure","Disconnect","transfer","NFTTransfer","Jt","Sn","rpcUrl","chainId","chainType","xn","extensions","config","Be","apiKey","endpoint","auth","user","wallet","nft","rpcProvider","parameters","API_KEY","DOMAIN_ORIGIN","ETH_NETWORK","network","host","ext","locale","bundleId","meta","networkHash","deferPreload","preload","__overlays__","ViewController","waitForReady","oe","Nn","Cn","Mn","find","Gt","Kt","msgType","deviceShare","jt","Vt","clearTimeout","setTimeout","An","Ht","Bt","$n","He","listen","isReadyForRequest","messageHandlers","Set","isConnectedToInternet","lastPongTime","heartbeatIntervalTimer","heartbeatDebounce","heartBeatCheck","checkRelayerExistsInDOM","reloadRelayer","_post","Xt","MAGIC_HANDLE_RESPONSE","bind","add","delete","MAGIC_OVERLAY_READY","MAGIC_HIDE_OVERLAY","hideOverlay","MAGIC_SHOW_OVERLAY","showOverlay","MAGIC_SEND_PRODUCT_ANNOUNCEMENT","product_announcement","ProductAnnouncement","sendPing","MAGIC_PING","setInterval","now","stopHeartBeat","clearInterval","Extension","MagicExtensionError","MagicExtensionWarning","MagicRPCError","MagicSDKError","MagicSDKWarning","SDKBase","STORE_KEY_PRIVATE_KEY","STORE_KEY_PUBLIC_JWK","TypedEmitter","clearKeys","createDuplicateIframeWarning","createExtensionNotInitializedError","createIncompatibleExtensionsError","createInvalidArgumentError","createJwt","createMalformedResponseError","createMissingApiKeyError","createModalNotReadyError","createPromise","createReactNativeEndpointConfigurationWarning","createSDK","createSynchronousWeb3MethodWarning","createTypedEmitter","createURL","getPayloadId","isEmpty","isJsonRpcErrorCode","isJsonRpcRequestPayload","isJsonRpcResponsePayload","isMagicPayloadMethod","isMajorVersionAtLeast","isWebCryptoSupported","uuid"],"sources":["/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/node_modules/eventemitter3/index.js","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/semver.js","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/base64-json.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/core/sdk-exceptions.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/type-guards.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/core/sdk-environment.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/auth.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/base-module.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/core/json-rpc.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/get-payload-id.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/storage.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/uuid.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/web-crypto.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/promise-tools.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/events.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/version-check.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/user.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/device-share-web-crypto.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/url.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/wallet.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/third-party-wallets.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/rpc-provider.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/base-extension.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/modules/nft.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/core/sdk.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/core/view-controller.ts","/Users/amritareji/Desktop/base3 2/frontend2/react-frontend/node_modules/@magic-sdk/provider/src/util/view-controller-utils.ts"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/* eslint-disable */\n/* istanbul ignore file */\n\n// DO NOT CHANGE THIS FILE.\n//\n// We have to bundle `semver` ourselves due to a long-standing cyclic dependency\n// which causes Rollup to break the `satisfies` function.\n//\n// See:\n//   - https://github.com/magiclabs/magic-js/issues/198\n//   - https://github.com/rollup/plugins/issues/879\n//   - https://github.com/npm/node-semver/issues/318\n//   - https://github.com/npm/node-semver/issues/381\n\nfunction createCommonjsModule(e){const r={exports:{}};return e(r,r.exports),r.exports}const SEMVER_SPEC_VERSION=\"2.0.0\",MAX_LENGTH$2=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16,constants={SEMVER_SPEC_VERSION:\"2.0.0\",MAX_LENGTH:256,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH:16},debug=\"object\"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\\bsemver\\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error(\"SEMVER\",...e):()=>{},debug_1=debug,re_1=createCommonjsModule(function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t}=constants,s=(r=e.exports={}).re=[],i=r.src=[],o=r.t={};let a=0;const n=(e,r,t)=>{const n=a++;debug_1(n,r),o[e]=n,i[n]=r,s[n]=new RegExp(r,t?\"g\":void 0)};n(\"NUMERICIDENTIFIER\",\"0|[1-9]\\\\d*\"),n(\"NUMERICIDENTIFIERLOOSE\",\"[0-9]+\"),n(\"NONNUMERICIDENTIFIER\",\"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\"),n(\"MAINVERSION\",`(${i[o.NUMERICIDENTIFIER]})\\\\.`+`(${i[o.NUMERICIDENTIFIER]})\\\\.`+`(${i[o.NUMERICIDENTIFIER]})`),n(\"MAINVERSIONLOOSE\",`(${i[o.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${i[o.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${i[o.NUMERICIDENTIFIERLOOSE]})`),n(\"PRERELEASEIDENTIFIER\",`(?:${i[o.NUMERICIDENTIFIER]}|${i[o.NONNUMERICIDENTIFIER]})`),n(\"PRERELEASEIDENTIFIERLOOSE\",`(?:${i[o.NUMERICIDENTIFIERLOOSE]}|${i[o.NONNUMERICIDENTIFIER]})`),n(\"PRERELEASE\",`(?:-(${i[o.PRERELEASEIDENTIFIER]}(?:\\\\.${i[o.PRERELEASEIDENTIFIER]})*))`),n(\"PRERELEASELOOSE\",`(?:-?(${i[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${i[o.PRERELEASEIDENTIFIERLOOSE]})*))`),n(\"BUILDIDENTIFIER\",\"[0-9A-Za-z-]+\"),n(\"BUILD\",`(?:\\\\+(${i[o.BUILDIDENTIFIER]}(?:\\\\.${i[o.BUILDIDENTIFIER]})*))`),n(\"FULLPLAIN\",`v?${i[o.MAINVERSION]}${i[o.PRERELEASE]}?${i[o.BUILD]}?`),n(\"FULL\",`^${i[o.FULLPLAIN]}$`),n(\"LOOSEPLAIN\",`[v=\\\\s]*${i[o.MAINVERSIONLOOSE]}${i[o.PRERELEASELOOSE]}?${i[o.BUILD]}?`),n(\"LOOSE\",`^${i[o.LOOSEPLAIN]}$`),n(\"GTLT\",\"((?:<|>)?=?)\"),n(\"XRANGEIDENTIFIERLOOSE\",`${i[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`),n(\"XRANGEIDENTIFIER\",`${i[o.NUMERICIDENTIFIER]}|x|X|\\\\*`),n(\"XRANGEPLAIN\",`[v=\\\\s]*(${i[o.XRANGEIDENTIFIER]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIER]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIER]})`+`(?:${i[o.PRERELEASE]})?${i[o.BUILD]}?`+\")?)?\"),n(\"XRANGEPLAINLOOSE\",`[v=\\\\s]*(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:${i[o.PRERELEASELOOSE]})?${i[o.BUILD]}?`+\")?)?\"),n(\"XRANGE\",`^${i[o.GTLT]}\\\\s*${i[o.XRANGEPLAIN]}$`),n(\"XRANGELOOSE\",`^${i[o.GTLT]}\\\\s*${i[o.XRANGEPLAINLOOSE]}$`),n(\"COERCE\",`(^|[^\\\\d])(\\\\d{1,${t}})`+`(?:\\\\.(\\\\d{1,${t}}))?`+`(?:\\\\.(\\\\d{1,${t}}))?`+\"(?:$|[^\\\\d])\"),n(\"COERCERTL\",i[o.COERCE],!0),n(\"LONETILDE\",\"(?:~>?)\"),n(\"TILDETRIM\",`(\\\\s*)${i[o.LONETILDE]}\\\\s+`,!0),r.tildeTrimReplace=\"$1~\",n(\"TILDE\",`^${i[o.LONETILDE]}${i[o.XRANGEPLAIN]}$`),n(\"TILDELOOSE\",`^${i[o.LONETILDE]}${i[o.XRANGEPLAINLOOSE]}$`),n(\"LONECARET\",\"(?:\\\\^)\"),n(\"CARETTRIM\",`(\\\\s*)${i[o.LONECARET]}\\\\s+`,!0),r.caretTrimReplace=\"$1^\",n(\"CARET\",`^${i[o.LONECARET]}${i[o.XRANGEPLAIN]}$`),n(\"CARETLOOSE\",`^${i[o.LONECARET]}${i[o.XRANGEPLAINLOOSE]}$`),n(\"COMPARATORLOOSE\",`^${i[o.GTLT]}\\\\s*(${i[o.LOOSEPLAIN]})$|^$`),n(\"COMPARATOR\",`^${i[o.GTLT]}\\\\s*(${i[o.FULLPLAIN]})$|^$`),n(\"COMPARATORTRIM\",`(\\\\s*)${i[o.GTLT]}\\\\s*(${i[o.LOOSEPLAIN]}|${i[o.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace=\"$1$2$3\",n(\"HYPHENRANGE\",`^\\\\s*(${i[o.XRANGEPLAIN]})`+\"\\\\s+-\\\\s+\"+`(${i[o.XRANGEPLAIN]})`+\"\\\\s*$\"),n(\"HYPHENRANGELOOSE\",`^\\\\s*(${i[o.XRANGEPLAINLOOSE]})`+\"\\\\s+-\\\\s+\"+`(${i[o.XRANGEPLAINLOOSE]})`+\"\\\\s*$\"),n(\"STAR\",\"(<|>)?=?\\\\s*\\\\*\"),n(\"GTE0\",\"^\\\\s*>=\\\\s*0.0.0\\\\s*$\"),n(\"GTE0PRE\",\"^\\\\s*>=\\\\s*0.0.0-0\\\\s*$\")}),numeric=/^[0-9]+$/,compareIdentifiers$1=(e,r)=>{const t=numeric.test(e),s=numeric.test(r);return t&&s&&(e=+e,r=+r),e===r?0:t&&!s?-1:s&&!t?1:e<r?-1:1},rcompareIdentifiers=(e,r)=>compareIdentifiers$1(r,e),identifiers={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers:rcompareIdentifiers},{MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=constants,{re:re$4,t:t$4}=re_1,{compareIdentifiers:compareIdentifiers}=identifiers;class SemVer{constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof SemVer){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(\"string\"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>MAX_LENGTH$1)throw new TypeError(`version is longer than ${MAX_LENGTH$1} characters`);debug_1(\"SemVer\",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const t=e.trim().match(r.loose?re$4[t$4.LOOSE]:re$4[t$4.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError(\"Invalid major version\");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError(\"Invalid minor version\");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError(\"Invalid patch version\");t[4]?this.prerelease=t[4].split(\".\").map(e=>{if(/^[0-9]+$/.test(e)){const r=+e;if(r>=0&&r<MAX_SAFE_INTEGER)return r}return e}):this.prerelease=[],this.build=t[5]?t[5].split(\".\"):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(\".\")}`),this.version}toString(){return this.version}compare(e){if(debug_1(\"SemVer.compare\",this.version,this.options,e),!(e instanceof SemVer)){if(\"string\"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const t=this.prerelease[r],s=e.prerelease[r];if(debug_1(\"prerelease compare\",r,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return compareIdentifiers(t,s)}while(++r)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let r=0;do{const t=this.build[r],s=e.build[r];if(debug_1(\"prerelease compare\",r,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return compareIdentifiers(t,s)}while(++r)}inc(e,r){switch(e){case\"premajor\":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(\"pre\",r);break;case\"preminor\":this.prerelease.length=0,this.patch=0,this.minor++,this.inc(\"pre\",r);break;case\"prepatch\":this.prerelease.length=0,this.inc(\"patch\",r),this.inc(\"pre\",r);break;case\"prerelease\":0===this.prerelease.length&&this.inc(\"patch\",r),this.inc(\"pre\",r);break;case\"major\":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case\"minor\":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case\"patch\":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case\"pre\":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)\"number\"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}const compare=(e,r,t)=>new SemVer(e,t).compare(new SemVer(r,t)),compare_1=compare,eq=(e,r,t)=>0===compare_1(e,r,t),eq_1=eq,neq=(e,r,t)=>0!==compare_1(e,r,t),neq_1=neq,gt=(e,r,t)=>compare_1(e,r,t)>0,gt_1=gt,gte=(e,r,t)=>compare_1(e,r,t)>=0,gte_1=gte,lt=(e,r,t)=>compare_1(e,r,t)<0,lt_1=lt,lte=(e,r,t)=>compare_1(e,r,t)<=0,lte_1=lte,cmp=(e,r,t,s)=>{switch(r){case\"===\":return\"object\"==typeof e&&(e=e.version),\"object\"==typeof t&&(t=t.version),e===t;case\"!==\":return\"object\"==typeof e&&(e=e.version),\"object\"==typeof t&&(t=t.version),e!==t;case\"\":case\"=\":case\"==\":return eq_1(e,t,s);case\"!=\":return neq_1(e,t,s);case\">\":return gt_1(e,t,s);case\">=\":return gte_1(e,t,s);case\"<\":return lt_1(e,t,s);case\"<=\":return lte_1(e,t,s);default:throw new TypeError(`Invalid operator: ${r}`)}},cmp_1=cmp,ANY=Symbol(\"SemVer ANY\");class Comparator{static get ANY(){return ANY}constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Comparator){if(e.loose===!!r.loose)return e;e=e.value}debug_1(\"comparator\",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ANY?this.value=\"\":this.value=this.operator+this.semver.version,debug_1(\"comp\",this)}parse(e){const r=this.options.loose?re$3[t$3.COMPARATORLOOSE]:re$3[t$3.COMPARATOR],t=e.match(r);if(!t)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==t[1]?t[1]:\"\",\"=\"===this.operator&&(this.operator=\"\"),t[2]?this.semver=new SemVer(t[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(e){if(debug_1(\"Comparator.test\",e,this.options.loose),this.semver===ANY||e===ANY)return!0;if(\"string\"==typeof e)try{e=new SemVer(e,this.options)}catch(e){return!1}return cmp_1(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Comparator))throw new TypeError(\"a Comparator is required\");if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),\"\"===this.operator)return\"\"===this.value||new Range(e.value,r).test(this.value);if(\"\"===e.operator)return\"\"===e.value||new Range(this.value,r).test(e.semver);const t=!(\">=\"!==this.operator&&\">\"!==this.operator||\">=\"!==e.operator&&\">\"!==e.operator),s=!(\"<=\"!==this.operator&&\"<\"!==this.operator||\"<=\"!==e.operator&&\"<\"!==e.operator),i=this.semver.version===e.semver.version,o=!(\">=\"!==this.operator&&\"<=\"!==this.operator||\">=\"!==e.operator&&\"<=\"!==e.operator),a=cmp_1(this.semver,\"<\",e.semver,r)&&(\">=\"===this.operator||\">\"===this.operator)&&(\"<=\"===e.operator||\"<\"===e.operator),n=cmp_1(this.semver,\">\",e.semver,r)&&(\"<=\"===this.operator||\"<\"===this.operator)&&(\">=\"===e.operator||\">\"===e.operator);return t||s||i&&o||a||n}}const{re:re$3,t:t$3}=re_1;class Range{constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Range)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Range(e.raw,r);if(e instanceof Comparator)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\\s*\\|\\|\\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(\" \").trim()).join(\"||\").trim(),this.range}toString(){return this.range}parseRange(e){const{loose:r}=this.options;e=e.trim();const t=r?re$2[t$2.HYPHENRANGELOOSE]:re$2[t$2.HYPHENRANGE];e=e.replace(t,hyphenReplace(this.options.includePrerelease)),debug_1(\"hyphen replace\",e),e=e.replace(re$2[t$2.COMPARATORTRIM],comparatorTrimReplace),debug_1(\"comparator trim\",e,re$2[t$2.COMPARATORTRIM]),e=(e=(e=e.replace(re$2[t$2.TILDETRIM],tildeTrimReplace)).replace(re$2[t$2.CARETTRIM],caretTrimReplace)).split(/\\s+/).join(\" \");const s=r?re$2[t$2.COMPARATORLOOSE]:re$2[t$2.COMPARATOR];return e.split(\" \").map(e=>parseComparator(e,this.options)).join(\" \").split(/\\s+/).map(e=>replaceGTE0(e,this.options)).filter(this.options.loose?e=>!!e.match(s):()=>!0).map(e=>new Comparator(e,this.options))}intersects(e,r){if(!(e instanceof Range))throw new TypeError(\"a Range is required\");return this.set.some(t=>isSatisfiable(t,r)&&e.set.some(e=>isSatisfiable(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if(\"string\"==typeof e)try{e=new SemVer(e,this.options)}catch(e){return!1}for(let r=0;r<this.set.length;r++)if(testSet(this.set[r],e,this.options))return!0;return!1}}const{re:re$2,t:t$2,comparatorTrimReplace:comparatorTrimReplace,tildeTrimReplace:tildeTrimReplace,caretTrimReplace:caretTrimReplace}=re_1,isSatisfiable=(e,r)=>{let t=!0;const s=e.slice();let i=s.pop();for(;t&&s.length;)t=s.every(e=>i.intersects(e,r)),i=s.pop();return t},parseComparator=(e,r)=>(debug_1(\"comp\",e,r),e=replaceCarets(e,r),debug_1(\"caret\",e),e=replaceTildes(e,r),debug_1(\"tildes\",e),e=replaceXRanges(e,r),debug_1(\"xrange\",e),e=replaceStars(e,r),debug_1(\"stars\",e),e),isX=e=>!e||\"x\"===e.toLowerCase()||\"*\"===e,replaceTildes=(e,r)=>e.trim().split(/\\s+/).map(e=>replaceTilde(e,r)).join(\" \"),replaceTilde=(e,r)=>{const t=r.loose?re$2[t$2.TILDELOOSE]:re$2[t$2.TILDE];return e.replace(t,(r,t,s,i,o)=>{let a;return debug_1(\"tilde\",e,r,t,s,i,o),isX(t)?a=\"\":isX(s)?a=`>=${t}.0.0 <${+t+1}.0.0-0`:isX(i)?a=`>=${t}.${s}.0 <${t}.${+s+1}.0-0`:o?(debug_1(\"replaceTilde pr\",o),a=`>=${t}.${s}.${i}-${o} <${t}.${+s+1}.0-0`):a=`>=${t}.${s}.${i} <${t}.${+s+1}.0-0`,debug_1(\"tilde return\",a),a})},replaceCarets=(e,r)=>e.trim().split(/\\s+/).map(e=>replaceCaret(e,r)).join(\" \"),replaceCaret=(e,r)=>{debug_1(\"caret\",e,r);const t=r.loose?re$2[t$2.CARETLOOSE]:re$2[t$2.CARET],s=r.includePrerelease?\"-0\":\"\";return e.replace(t,(r,t,i,o,a)=>{let n;return debug_1(\"caret\",e,r,t,i,o,a),isX(t)?n=\"\":isX(i)?n=`>=${t}.0.0${s} <${+t+1}.0.0-0`:isX(o)?n=\"0\"===t?`>=${t}.${i}.0${s} <${t}.${+i+1}.0-0`:`>=${t}.${i}.0${s} <${+t+1}.0.0-0`:a?(debug_1(\"replaceCaret pr\",a),n=\"0\"===t?\"0\"===i?`>=${t}.${i}.${o}-${a} <${t}.${i}.${+o+1}-0`:`>=${t}.${i}.${o}-${a} <${t}.${+i+1}.0-0`:`>=${t}.${i}.${o}-${a} <${+t+1}.0.0-0`):(debug_1(\"no pr\"),n=\"0\"===t?\"0\"===i?`>=${t}.${i}.${o}${s} <${t}.${i}.${+o+1}-0`:`>=${t}.${i}.${o}${s} <${t}.${+i+1}.0-0`:`>=${t}.${i}.${o} <${+t+1}.0.0-0`),debug_1(\"caret return\",n),n})},replaceXRanges=(e,r)=>(debug_1(\"replaceXRanges\",e,r),e.split(/\\s+/).map(e=>replaceXRange(e,r)).join(\" \")),replaceXRange=(e,r)=>{e=e.trim();const t=r.loose?re$2[t$2.XRANGELOOSE]:re$2[t$2.XRANGE];return e.replace(t,(t,s,i,o,a,n)=>{debug_1(\"xRange\",e,t,s,i,o,a,n);const E=isX(i),p=E||isX(o),l=p||isX(a),c=l;return\"=\"===s&&c&&(s=\"\"),n=r.includePrerelease?\"-0\":\"\",E?t=\">\"===s||\"<\"===s?\"<0.0.0-0\":\"*\":s&&c?(p&&(o=0),a=0,\">\"===s?(s=\">=\",p?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):\"<=\"===s&&(s=\"<\",p?i=+i+1:o=+o+1),\"<\"===s&&(n=\"-0\"),t=`${s+i}.${o}.${a}${n}`):p?t=`>=${i}.0.0${n} <${+i+1}.0.0-0`:l&&(t=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`),debug_1(\"xRange return\",t),t})},replaceStars=(e,r)=>(debug_1(\"replaceStars\",e,r),e.trim().replace(re$2[t$2.STAR],\"\")),replaceGTE0=(e,r)=>(debug_1(\"replaceGTE0\",e,r),e.trim().replace(re$2[r.includePrerelease?t$2.GTE0PRE:t$2.GTE0],\"\")),hyphenReplace=e=>(r,t,s,i,o,a,n,E,p,l,c,$,h)=>`${t=isX(s)?\"\":isX(i)?`>=${s}.0.0${e?\"-0\":\"\"}`:isX(o)?`>=${s}.${i}.0${e?\"-0\":\"\"}`:a?`>=${t}`:`>=${t}${e?\"-0\":\"\"}`} ${E=isX(p)?\"\":isX(l)?`<${+p+1}.0.0-0`:isX(c)?`<${p}.${+l+1}.0-0`:$?`<=${p}.${l}.${c}-${$}`:e?`<${p}.${l}.${+c+1}-0`:`<=${E}`}`.trim(),testSet=(e,r,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let t=0;t<e.length;t++)if(debug_1(e[t].semver),e[t].semver!==Comparator.ANY&&e[t].semver.prerelease.length>0){const s=e[t].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0};export const satisfies=(e,r,t)=>{try{r=new Range(r,t)}catch(e){return!1}return r.test(e)};const satisfies_1=satisfies,{MAX_LENGTH:MAX_LENGTH}=constants,{re:re$1,t:t$1}=re_1,parse=(e,r)=>{if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof SemVer)return e;if(\"string\"!=typeof e)return null;if(e.length>MAX_LENGTH)return null;if(!(r.loose?re$1[t$1.LOOSE]:re$1[t$1.FULL]).test(e))return null;try{return new SemVer(e,r)}catch(e){return null}},parse_1=parse,{re:re,t:t}=re_1;export const coerce=(e,r)=>{if(e instanceof SemVer)return e;if(\"number\"==typeof e&&(e=String(e)),\"string\"!=typeof e)return null;let s=null;if((r=r||{}).rtl){let r;for(;(r=re[t.COERCERTL].exec(e))&&(!s||s.index+s[0].length!==e.length);)s&&r.index+r[0].length===s.index+s[0].length||(s=r),re[t.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;re[t.COERCERTL].lastIndex=-1}else s=e.match(re[t.COERCE]);return null===s?null:parse_1(`${s[2]}.${s[3]||\"0\"}.${s[4]||\"0\"}`,r)};\n","function percentToByte(p: string) {\n  return String.fromCharCode(parseInt(p.slice(1), 16));\n}\n\nfunction byteToPercent(b: string) {\n  return `%${`00${b.charCodeAt(0).toString(16)}`.slice(-2)}`;\n}\n\n/**\n * Encodes a Base64 string. Safe for UTF-8 characters.\n * Original source is from the `universal-base64` NPM package.\n *\n * @source https://github.com/blakeembrey/universal-base64/blob/master/src/browser.ts\n */\nfunction btoaUTF8(str: string): string {\n  return btoa(encodeURIComponent(str).replace(/%[0-9A-F]{2}/g, percentToByte));\n}\n\n/**\n * Decodes a Base64 string. Safe for UTF-8 characters.\n * Original source is from the `universal-base64` NPM package.\n *\n * @source https://github.com/blakeembrey/universal-base64/blob/master/src/browser.ts\n */\nfunction atobUTF8(str: string): string {\n  return decodeURIComponent(Array.from(atob(str), byteToPercent).join(''));\n}\n\n/**\n * Given a JSON-serializable object, encode as a Base64 string.\n */\nexport function encodeJSON<T>(options: T): string {\n  return btoaUTF8(JSON.stringify(options));\n}\n\n/**\n * Given a Base64 JSON string, decode a JavaScript object.\n */\nexport function decodeJSON<T>(queryString: string): T {\n  return JSON.parse(atobUTF8(queryString));\n}\n","import { JsonRpcError, RPCErrorCode, SDKErrorCode, SDKWarningCode } from '@magic-sdk/types';\nimport { isJsonRpcErrorCode } from '../util/type-guards';\nimport { SDKEnvironment } from './sdk-environment';\nimport { BaseExtension } from '../modules/base-extension';\n\n// --- Error/warning classes\n\n/**\n * This error type represents internal SDK errors. This could be developer\n * mistakes (or Magic's mistakes), or execution errors unrelated to standard\n * JavaScript exceptions.\n */\nexport class MagicSDKError extends Error {\n  __proto__ = Error;\n\n  constructor(\n    public code: SDKErrorCode,\n    public rawMessage: string,\n  ) {\n    super(`Magic SDK Error: [${code}] ${rawMessage}`);\n    Object.setPrototypeOf(this, MagicSDKError.prototype);\n  }\n}\n\n/**\n * This error type communicates exceptions that occur during execution in the\n * Magic `<iframe>` context.\n */\nexport class MagicRPCError extends Error {\n  __proto__ = Error;\n\n  public code: RPCErrorCode | number;\n  public rawMessage: string;\n  public data: any;\n\n  constructor(sourceError?: JsonRpcError | null) {\n    super();\n\n    const codeNormalized = Number(sourceError?.code);\n    this.rawMessage = sourceError?.message || 'Internal error';\n    this.code = isJsonRpcErrorCode(codeNormalized) ? codeNormalized : RPCErrorCode.InternalError;\n    this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`;\n    this.data = sourceError?.data || undefined;\n\n    Object.setPrototypeOf(this, MagicRPCError.prototype);\n  }\n}\n\n/**\n * In contrast to `SDKError` objects, this \"warning\" type communicates important\n * context that does not rise to the level of an exception. These should be\n * logged rather than thrown.\n */\nexport class MagicSDKWarning {\n  public message: string;\n\n  constructor(\n    public code: SDKWarningCode,\n    public rawMessage: string,\n  ) {\n    this.message = `Magic SDK Warning: [${code}] ${rawMessage}`;\n  }\n\n  /**\n   * Logs this warning to the console.\n   */\n  public log() {\n    console.warn(this.message);\n  }\n}\n\n/**\n * This error type is reserved for communicating errors that arise during\n * execution of Magic SDK Extension methods. Compare this to the `SDKError`\n * type, specifically in context of Extensions.\n */\nexport class MagicExtensionError<TData = any> extends Error {\n  __proto__ = Error;\n\n  constructor(\n    ext: BaseExtension<string>,\n    public code: string | number,\n    public rawMessage: string,\n    public data: TData,\n  ) {\n    super(`Magic Extension Error (${ext.name}): [${code}] ${rawMessage}`);\n    Object.setPrototypeOf(this, MagicExtensionError.prototype);\n  }\n}\n\n/**\n * In contrast to `MagicExtensionError` objects, this \"warning\" type\n * communicates important context that does not rise to the level of an\n * exception. These should be logged rather than thrown.\n */\nexport class MagicExtensionWarning {\n  public message: string;\n\n  constructor(\n    ext: BaseExtension<string>,\n    public code: string | number,\n    public rawMessage: string,\n  ) {\n    this.message = `Magic Extension Warning (${ext.name}): [${code}] ${rawMessage}`;\n  }\n\n  /**\n   * Logs this warning to the console.\n   */\n  public log() {\n    console.warn(this.message);\n  }\n}\n\n// --- SDK error factories\n\nexport function createMissingApiKeyError() {\n  return new MagicSDKError(\n    SDKErrorCode.MissingApiKey,\n    'Please provide an API key that you acquired from the Magic developer dashboard.',\n  );\n}\n\nexport function createModalNotReadyError() {\n  return new MagicSDKError(SDKErrorCode.ModalNotReady, 'Modal is not ready');\n}\n\nexport function createMalformedResponseError() {\n  return new MagicSDKError(SDKErrorCode.MalformedResponse, 'Response from the Magic iframe is malformed.');\n}\n\nexport function createExtensionNotInitializedError(member: string) {\n  return new MagicSDKError(\n    SDKErrorCode.ExtensionNotInitialized,\n    `Extensions must be initialized with a Magic SDK instance before \\`Extension.${member}\\` can be accessed. Do not invoke \\`Extension.${member}\\` inside an extension constructor.`,\n  );\n}\n\nexport function createIncompatibleExtensionsError(extensions: BaseExtension<string>[]) {\n  let msg = `Some extensions are incompatible with \\`${SDKEnvironment.sdkName}@${SDKEnvironment.version}\\`:`;\n\n  extensions\n    .filter(ext => typeof ext.compat !== 'undefined' && ext.compat !== null)\n    .forEach(ext => {\n      const compat = ext.compat![SDKEnvironment.sdkName];\n\n      /* istanbul ignore else */\n      if (typeof compat === 'string') {\n        msg += `\\n  - Extension \\`${ext.name}\\` supports version(s) \\`${compat}\\``;\n      } else if (!compat) {\n        msg += `\\n  - Extension \\`${ext.name}\\` does not support ${SDKEnvironment.platform} environments.`;\n      }\n\n      // Else case is irrelevant here here\n      // (we filter out extensions with missing `compat` field)\n    });\n\n  return new MagicSDKError(SDKErrorCode.IncompatibleExtensions, msg);\n}\n\nexport function createInvalidArgumentError(options: {\n  procedure: string;\n  argument: number;\n  expected: string;\n  received: string;\n}) {\n  /**\n   * Parses the argument index (given by `argument`) to attach the correct ordinal suffix.\n   * (i.e.: 1st, 2nd, 3rd, 4th, etc.)\n   */\n  const ordinalSuffix = (i: number) => {\n    const iAdjusted = i + 1; // Argument is zero-indexed.\n    const j = iAdjusted % 10;\n    const k = iAdjusted % 100;\n    if (j === 1 && k !== 11) return `${iAdjusted}st`;\n    if (j === 2 && k !== 12) return `${iAdjusted}nd`;\n    if (j === 3 && k !== 13) return `${iAdjusted}rd`;\n    return `${iAdjusted}th`;\n  };\n\n  return new MagicSDKError(\n    SDKErrorCode.InvalidArgument,\n    `Invalid ${ordinalSuffix(options.argument)} argument given to \\`${options.procedure}\\`.\\n` +\n      `  Expected: \\`${options.expected}\\`\\n` +\n      `  Received: \\`${options.received}\\``,\n  );\n}\n\n// --- SDK warning factories\n\nexport function createDuplicateIframeWarning() {\n  return new MagicSDKWarning(SDKWarningCode.DuplicateIframe, 'Duplicate iframes found.');\n}\n\nexport function createSynchronousWeb3MethodWarning() {\n  return new MagicSDKWarning(\n    SDKWarningCode.SyncWeb3Method,\n    'Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.',\n  );\n}\n\nexport function createReactNativeEndpointConfigurationWarning() {\n  return new MagicSDKWarning(\n    SDKWarningCode.ReactNativeEndpointConfiguration,\n    `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \\`endpoint\\` parameter SHOULD NOT be provided. The Magic \\`<iframe>\\` is automatically wrapped by a WebView pointed at \\`${SDKEnvironment.defaultEndpoint}\\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`,\n  );\n}\n\nexport function createDeprecationWarning(options: {\n  method: string;\n  removalVersions: {\n    [P in\n      | 'magic-sdk'\n      | '@magic-sdk/react-native'\n      | '@magic-sdk/react-native-bare'\n      | '@magic-sdk/react-native-expo']: string;\n  };\n  useInstead?: string;\n}) {\n  const { method, removalVersions, useInstead } = options;\n\n  const removalVersion = removalVersions[SDKEnvironment.sdkName];\n  const useInsteadSuffix = useInstead ? ` Use \\`${useInstead}\\` instead.` : '';\n  const message = `\\`${method}\\` will be removed from \\`${SDKEnvironment.sdkName}\\` in version \\`${removalVersion}\\`.${useInsteadSuffix}`;\n\n  return new MagicSDKWarning(SDKWarningCode.DeprecationNotice, message);\n}\n","/**\n * This file contains our type guards.\n *\n * Type guards are a feature of TypeScript which narrow the type signature of\n * intesection types (types that can be one thing or another).\n *\n * @see\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types\n */\n\nimport { JsonRpcRequestPayload, JsonRpcResponsePayload, MagicPayloadMethod, RPCErrorCode } from '@magic-sdk/types';\n\n/**\n * Assert `value` is `undefined`.\n */\nfunction isUndefined(value: any): value is undefined {\n  return typeof value === 'undefined';\n}\n\n/**\n * Assert `value` is `null`.\n */\nfunction isNull(value: any): value is null {\n  return value === null;\n}\n\n/**\n * Assert `value` is `null` or `undefined`.\n */\nfunction isNil(value: any): value is null | undefined {\n  return isNull(value) || isUndefined(value);\n}\n\n/**\n * Assert `value` is a `JsonRpcRequestPayload` object.\n */\nexport function isJsonRpcRequestPayload(value?: JsonRpcRequestPayload): value is JsonRpcRequestPayload {\n  if (isNil(value)) return false;\n  return (\n    !isUndefined(value.jsonrpc) && !isUndefined(value.id) && !isUndefined(value.method) && !isUndefined(value.params)\n  );\n}\n\n/**\n * Assert `value` is a `JsonRpcResponsePayload` object.\n */\nexport function isJsonRpcResponsePayload(value: any): value is JsonRpcResponsePayload {\n  if (isNil(value)) return false;\n  return (\n    !isUndefined(value.jsonrpc) && !isUndefined(value.id) && (!isUndefined(value.result) || !isUndefined(value.error))\n  );\n}\n\n/**\n * Assert `value` is a Magic SDK payload method identifier.\n */\nexport function isMagicPayloadMethod(value?: any): value is MagicPayloadMethod {\n  if (isNil(value)) return false;\n  return typeof value === 'string' && Object.values(MagicPayloadMethod).includes(value as any);\n}\n\n/**\n * Assert `value` is an expected JSON RPC error code.\n */\nexport function isJsonRpcErrorCode(value?: any): value is RPCErrorCode {\n  if (isNil(value)) return false;\n  return typeof value === 'number' && Object.values(RPCErrorCode).includes(value);\n}\n\n/**\n * Assert `value` is an empty, plain object.\n */\nexport function isEmpty(value?: any): value is {} {\n  if (!value) return true;\n\n  for (const key in value) {\n    /* istanbul ignore else */\n    if (Object.hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import type localForage from 'localforage';\nimport type { ViewController } from './view-controller';\nimport type { SDKBase } from './sdk';\nimport type { WithExtensions } from '../modules/base-extension';\n\ntype ConstructorOf<C> = { new (...args: any[]): C };\n\n/**\n * A structure containing details about the current environment.\n * This is guaranteed to be populated before the SDK is instantiated.\n */\nexport interface SDKEnvironment {\n  sdkName: 'magic-sdk' | '@magic-sdk/react-native' | '@magic-sdk/react-native-bare' | '@magic-sdk/react-native-expo';\n  version: string;\n  platform: 'web' | 'react-native';\n  defaultEndpoint: string;\n  ViewController: ConstructorOf<ViewController>;\n  configureStorage: () => Promise<typeof localForage>;\n  bundleId?: string | null;\n}\n\nexport const SDKEnvironment: SDKEnvironment = {} as any;\n\nexport function createSDK<SDK extends SDKBase>(\n  SDKBaseCtor: ConstructorOf<SDK>,\n  environment: SDKEnvironment,\n): WithExtensions<SDK> {\n  Object.assign(SDKEnvironment, environment);\n  return SDKBaseCtor as any;\n}\n\nexport const sdkNameToEnvName = {\n  'magic-sdk': 'magic-sdk' as const,\n  '@magic-sdk/react-native': 'magic-sdk-rn' as const,\n  '@magic-sdk/react-native-bare': 'magic-sdk-rn-bare' as const,\n  '@magic-sdk/react-native-expo': 'magic-sdk-rn-expo' as const,\n};\n","import {\n  MagicPayloadMethod,\n  LoginWithMagicLinkConfiguration,\n  LoginWithSmsConfiguration,\n  LoginWithEmailOTPConfiguration,\n  LoginWithEmailOTPEventHandlers,\n  LoginWithMagicLinkEventHandlers,\n  UpdateEmailConfiguration,\n  DeviceVerificationEventEmit,\n  LoginWithEmailOTPEventEmit,\n  UpdateEmailEventHandlers,\n  UpdateEmailEventEmit,\n  RecencyCheckEventEmit,\n  LoginWithSmsOTPEventEmit,\n  LoginWithSmsOTPEventHandlers,\n  LoginWithCredentialConfiguration,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\nimport { SDKEnvironment } from '../core/sdk-environment';\nimport { isMajorVersionAtLeast } from '../util/version-check';\nimport { createDeprecationWarning } from '../core/sdk-exceptions';\n\nexport const ProductConsolidationMethodRemovalVersions = {\n  'magic-sdk': 'v18.0.0',\n  '@magic-sdk/react-native': 'v14.0.0',\n  '@magic-sdk/react-native-bare': 'v19.0.0',\n  '@magic-sdk/react-native-expo': 'v19.0.0',\n};\n\nexport class AuthModule extends BaseModule {\n  /**\n   * Initiate the \"magic link\" login flow for a user. If the flow is successful,\n   * this method will return a Decentralized ID token (with a default lifespan\n   * of 15 minutes).\n   */\n  public loginWithMagicLink(configuration: LoginWithMagicLinkConfiguration) {\n    const isRNMobilePackage =\n      SDKEnvironment.sdkName === '@magic-sdk/react-native' ||\n      SDKEnvironment.sdkName === '@magic-sdk/react-native-bare' ||\n      SDKEnvironment.sdkName === '@magic-sdk/react-native-expo';\n\n    // RN SDK major version is greater than or equal to v19\n    if (isRNMobilePackage && isMajorVersionAtLeast(SDKEnvironment.version, 19)) {\n      throw new Error(\n        'loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.',\n      );\n    } else if (isRNMobilePackage) {\n      // RN SDK major version is less than v19\n      createDeprecationWarning({\n        method: 'auth.loginWithMagicLink()',\n        removalVersions: ProductConsolidationMethodRemovalVersions,\n        useInstead: 'auth.loginWithEmailOTP()',\n      }).log();\n    }\n\n    const { email, showUI = true, redirectURI, overrides, lifespan } = configuration;\n\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithMagicLinkTestMode : MagicPayloadMethod.LoginWithMagicLink,\n      [{ email, showUI, redirectURI, overrides, lifespan }],\n    );\n    return this.request<string | null, LoginWithMagicLinkEventHandlers>(requestPayload);\n  }\n\n  /**\n   * Initiate an SMS login flow for a user. If successful,\n   * this method will return a Decenteralized ID token (with a default lifespan\n   * of 15 minutes)\n   */\n  public loginWithSMS(configuration: LoginWithSmsConfiguration) {\n    const { phoneNumber, showUI = true, lifespan } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithSmsTestMode : MagicPayloadMethod.LoginWithSms,\n      [{ phoneNumber, showUI, lifespan }],\n    );\n\n    const handle = this.request<string | null, LoginWithSmsOTPEventHandlers>(requestPayload);\n\n    if (!showUI && handle) {\n      handle.on(LoginWithSmsOTPEventEmit.VerifySmsOtp, (otp: string) => {\n        this.createIntermediaryEvent(LoginWithSmsOTPEventEmit.VerifySmsOtp, requestPayload.id as string)(otp);\n      });\n\n      handle.on(LoginWithSmsOTPEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(LoginWithSmsOTPEventEmit.Cancel, requestPayload.id as string)();\n      });\n    }\n\n    return handle;\n  }\n\n  /**\n   * Initiate an Email with OTP login flow for a user. If successful,\n   * this method will return a Decenteralized ID token (with a default lifespan\n   * of 15 minutes)\n   */\n  public loginWithEmailOTP(configuration: LoginWithEmailOTPConfiguration) {\n    const { email, showUI, deviceCheckUI, overrides, lifespan } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithEmailOTPTestMode : MagicPayloadMethod.LoginWithEmailOTP,\n      [{ email, showUI, deviceCheckUI, overrides, lifespan }],\n    );\n    const handle = this.request<string | null, LoginWithEmailOTPEventHandlers>(requestPayload);\n    if (!deviceCheckUI && handle) {\n      handle.on(DeviceVerificationEventEmit.Retry, () => {\n        this.createIntermediaryEvent(DeviceVerificationEventEmit.Retry, requestPayload.id as any)();\n      });\n    }\n    if (!showUI && handle) {\n      handle.on(LoginWithEmailOTPEventEmit.VerifyEmailOtp, (otp: string) => {\n        this.createIntermediaryEvent(LoginWithEmailOTPEventEmit.VerifyEmailOtp, requestPayload.id as any)(otp);\n      });\n      handle.on(LoginWithEmailOTPEventEmit.VerifyMFACode, (mfa: string) => {\n        this.createIntermediaryEvent(LoginWithEmailOTPEventEmit.VerifyMFACode, requestPayload.id as string)(mfa);\n      });\n      handle.on(LoginWithEmailOTPEventEmit.LostDevice, () => {\n        this.createIntermediaryEvent(LoginWithEmailOTPEventEmit.LostDevice, requestPayload.id as string)();\n      });\n      handle.on(LoginWithEmailOTPEventEmit.VerifyRecoveryCode, (recoveryCode: string) => {\n        this.createIntermediaryEvent(\n          LoginWithEmailOTPEventEmit.VerifyRecoveryCode,\n          requestPayload.id as string,\n        )(recoveryCode);\n      });\n      handle.on(LoginWithEmailOTPEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(LoginWithEmailOTPEventEmit.Cancel, requestPayload.id as any)();\n      });\n    }\n\n    return handle;\n  }\n\n  /**\n   * Log a user in with a special one-time-use credential token. This is\n   * currently used during magic link flows with a configured redirect to\n   * hydrate the user session at the end of the flow. If the flow is successful,\n   * this method will return a Decentralized ID token (with a default lifespan\n   * of 15 minutes).\n   *\n   * If no argument is provided, a credential is automatically parsed from\n   * `window.location.search`.\n   */\n  public loginWithCredential(configuration?: LoginWithCredentialConfiguration) {\n    const { credentialOrQueryString, lifespan } = configuration || {};\n    let credentialResolved = credentialOrQueryString ?? '';\n\n    if (!credentialOrQueryString && SDKEnvironment.platform === 'web') {\n      credentialResolved = window.location.search;\n\n      // Remove the query from the redirect callback as a precaution.\n      const urlWithoutQuery = window.location.origin + window.location.pathname;\n      window.history.replaceState(null, '', urlWithoutQuery);\n    }\n\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithCredentialTestMode : MagicPayloadMethod.LoginWithCredential,\n      [credentialResolved, lifespan],\n    );\n\n    return this.request<string | null>(requestPayload);\n  }\n\n  // Custom Auth\n  public setAuthorizationToken(jwt: string) {\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.SetAuthorizationToken, [{ jwt }]);\n    return this.request<boolean>(requestPayload);\n  }\n\n  public updateEmailWithUI(configuration: UpdateEmailConfiguration) {\n    const { email, showUI = true } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.UpdateEmailTestMode : MagicPayloadMethod.UpdateEmail,\n      [{ email, showUI }],\n    );\n\n    const handle = this.request<string | null, UpdateEmailEventHandlers>(requestPayload);\n\n    if (!showUI) {\n      handle.on(RecencyCheckEventEmit.Retry, () => {\n        this.createIntermediaryEvent(RecencyCheckEventEmit.Retry, requestPayload.id as any)();\n      });\n      handle.on(RecencyCheckEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(RecencyCheckEventEmit.Cancel, requestPayload.id as any)();\n      });\n      handle.on(RecencyCheckEventEmit.VerifyEmailOtp, (otp: string) => {\n        this.createIntermediaryEvent(RecencyCheckEventEmit.VerifyEmailOtp, requestPayload.id as string)(otp);\n      });\n      handle.on(RecencyCheckEventEmit.VerifyMFACode, (mfa: string) => {\n        this.createIntermediaryEvent(RecencyCheckEventEmit.VerifyMFACode, requestPayload.id as string)(mfa);\n      });\n      handle.on(UpdateEmailEventEmit.RetryWithNewEmail, (newEmail?) => {\n        this.createIntermediaryEvent(UpdateEmailEventEmit.RetryWithNewEmail, requestPayload.id as any)(newEmail);\n      });\n      handle.on(UpdateEmailEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(UpdateEmailEventEmit.Cancel, requestPayload.id as any)();\n      });\n      handle.on(UpdateEmailEventEmit.VerifyEmailOtp, (otp: string) => {\n        this.createIntermediaryEvent(UpdateEmailEventEmit.VerifyEmailOtp, requestPayload.id as any)(otp);\n      });\n    }\n    return handle;\n  }\n}\n","import {\n  JsonRpcRequestPayload,\n  MagicOutgoingWindowMessage,\n  MagicIncomingWindowMessage,\n  MagicPayloadMethod,\n  IntermediaryEvents,\n  routeToMagicMethods,\n} from '@magic-sdk/types';\nimport { createMalformedResponseError, MagicRPCError } from '../core/sdk-exceptions';\nimport type { SDKBase } from '../core/sdk';\nimport { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { createPromiEvent } from '../util/promise-tools';\nimport type { ViewController } from '../core/view-controller';\nimport type { EventsDefinition } from '../util/events';\n\nexport class BaseModule {\n  constructor(protected sdk: SDKBase) {}\n\n  /**\n   * The `ViewController` for the SDK instance registered to this module.\n   */\n  protected get overlay(): ViewController {\n    return (this.sdk as any).overlay;\n  }\n\n  /**\n   * Emits promisified requests to the Magic `<iframe>` context.\n   */\n  protected request<ResultType = any, Events extends EventsDefinition = void>(payload: Partial<JsonRpcRequestPayload>) {\n    if (this.sdk.thirdPartyWallets.isConnected && !routeToMagicMethods.includes(payload.method as MagicPayloadMethod)) {\n      const promiEvent = createPromiEvent<ResultType, Events>((resolve, reject) => {\n        this.sdk.thirdPartyWallets.requestOverride(payload).then(resolve).catch(reject);\n      });\n      return promiEvent;\n    }\n\n    const responsePromise = this.overlay.post<ResultType>(\n      MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,\n      standardizeJsonRpcRequestPayload(payload),\n    );\n\n    // PromiEvent-ify the response.\n    const promiEvent = createPromiEvent<ResultType, Events>((resolve, reject) => {\n      responsePromise\n        .then(res => {\n          cleanupEvents();\n          if (res.hasError) reject(new MagicRPCError(res.payload.error));\n          else if (res.hasResult) resolve(res.payload.result as ResultType);\n          else throw createMalformedResponseError();\n        })\n        .catch(err => {\n          cleanupEvents();\n          reject(err);\n        });\n    });\n\n    // Listen for events from the `<iframe>` associated with the current payload\n    // and emit those to `PromiEvent` subscribers.\n    const cleanupEvents = this.overlay.on(MagicIncomingWindowMessage.MAGIC_HANDLE_EVENT, evt => {\n      const { response } = evt.data;\n\n      if (response.id === payload.id && response.result?.event) {\n        const { event, params = [] } = response.result;\n        promiEvent.emit(event, ...params);\n      }\n    });\n\n    return promiEvent;\n  }\n\n  // Creates an intermediary event which takes a typed event and a payload ID\n  protected createIntermediaryEvent<T = Function>(eventType: IntermediaryEvents, payloadId: string) {\n    const e = (args: any) => {\n      const res = createJsonRpcRequestPayload(MagicPayloadMethod.IntermediaryEvent, [{ payloadId, eventType, args }]);\n      this.request(res);\n    };\n    return e as unknown as T;\n  }\n}\n","import { JsonRpcRequestPayload, JsonRpcResponsePayload, JsonRpcError, RPCErrorCode } from '@magic-sdk/types';\nimport { isJsonRpcResponsePayload } from '../util/type-guards';\nimport { getPayloadId } from '../util/get-payload-id';\nimport { clearKeys } from '../util/web-crypto';\n\nconst payloadPreprocessedSymbol = Symbol('Payload pre-processed by Magic SDK');\n\n/**\n * To avoid \"pre-processing\" a payload more than once (and needlessly\n * incrementing our payload ID generator), we attach a symbol to detect a\n * payloads we've already visited.\n */\nfunction markPayloadAsPreprocessed<T extends Partial<JsonRpcRequestPayload>>(payload: T): T {\n  Object.defineProperty(payload, payloadPreprocessedSymbol, {\n    value: true,\n    enumerable: false,\n  });\n\n  return payload;\n}\n\n/**\n * Returns `true` if the payload has been visited by our \"pre-processing,\" in\n * `standardizeJsonRpcRequestPayload(...)`.\n */\nfunction isPayloadPreprocessed<T extends Partial<JsonRpcRequestPayload>>(payload: T) {\n  return !!(payload as any)[payloadPreprocessedSymbol];\n}\n\n/**\n * Returns a full `JsonRpcRequestPayload` from a potentially incomplete payload\n * object. This method mutates the given `payload` to preserve compatibility\n * with external libraries that perform their own `JsonRpcRequestPayload.id`\n * check to associate responses (such as `web3`).\n *\n * This function is no-op if the payload has already been processed before.\n */\nexport function standardizeJsonRpcRequestPayload(payload: Partial<JsonRpcRequestPayload>) {\n  if (!isPayloadPreprocessed(payload)) {\n    payload.jsonrpc = payload.jsonrpc ?? '2.0';\n    payload.id = getPayloadId();\n    payload.method = payload.method ?? 'noop';\n    payload.params = payload.params ?? [];\n\n    markPayloadAsPreprocessed(payload);\n  }\n\n  return payload as JsonRpcRequestPayload;\n}\n\n/**\n * Build a valid JSON RPC payload for emitting to the Magic SDK iframe relayer.\n */\nexport function createJsonRpcRequestPayload(method: string, params: any[] = []): JsonRpcRequestPayload {\n  return markPayloadAsPreprocessed({\n    params,\n    method,\n    jsonrpc: '2.0',\n    id: getPayloadId(),\n  });\n}\n\n/**\n * Formats and standardizes a JSON RPC 2.0 response from a number of potential\n * sources.\n */\nexport class JsonRpcResponse<ResultType = any> {\n  private readonly _jsonrpc: string;\n  private readonly _id: string | number | null;\n  private _result?: ResultType | null;\n  private _error?: JsonRpcError | null;\n\n  constructor(responsePayload: JsonRpcResponsePayload);\n  constructor(response: JsonRpcResponse<ResultType>);\n  constructor(requestPayload: JsonRpcRequestPayload);\n  constructor(responseOrPayload: JsonRpcResponsePayload | JsonRpcResponse<ResultType> | JsonRpcRequestPayload) {\n    if (responseOrPayload instanceof JsonRpcResponse) {\n      this._jsonrpc = responseOrPayload.payload.jsonrpc;\n      this._id = responseOrPayload.payload.id;\n      this._result = responseOrPayload.payload.result;\n      this._error = responseOrPayload.payload.error;\n    } else if (isJsonRpcResponsePayload(responseOrPayload)) {\n      this._jsonrpc = responseOrPayload.jsonrpc;\n      this._id = responseOrPayload.id;\n      this._result = responseOrPayload.result;\n      this._error = responseOrPayload.error;\n    } else {\n      this._jsonrpc = responseOrPayload.jsonrpc;\n      this._id = responseOrPayload.id;\n      this._result = undefined;\n      this._error = undefined;\n    }\n  }\n\n  public applyError(error?: JsonRpcError | null) {\n    this._error = error;\n    return this;\n  }\n\n  public applyResult(result?: ResultType | null) {\n    this._result = result;\n    return this;\n  }\n\n  public get hasError() {\n    // Handle DPOP error and rotate new keys\n    if (this._error?.code === RPCErrorCode.DpopInvalidated) {\n      clearKeys();\n    }\n    return typeof this._error !== 'undefined' && this._error !== null;\n  }\n\n  public get hasResult() {\n    return typeof this._result !== 'undefined';\n  }\n\n  public get payload(): JsonRpcResponsePayload {\n    return {\n      jsonrpc: this._jsonrpc,\n      id: this._id,\n      result: this._result,\n      error: this._error,\n    };\n  }\n}\n","function* createIntGenerator(): Generator<number, number, void> {\n  let index = 0;\n\n  while (true) {\n    /* istanbul ignore next */\n    if (index < Number.MAX_SAFE_INTEGER) yield ++index;\n    else index = 0;\n  }\n}\n\nconst intGenerator = createIntGenerator();\n\n/**\n * Get an integer ID for attaching to a JSON RPC request payload.\n */\nexport function getPayloadId(): number {\n  return intGenerator.next().value;\n}\n","import { SDKEnvironment } from '../core/sdk-environment';\n\n/* global  LocalForage LocalForageDbMethods */\nlet lf: LocalForage;\n\n/**\n * Proxies `localforage` methods with strong-typing.\n */\nfunction proxyLocalForageMethod<TMethod extends keyof LocalForageDbMethods>(method: TMethod): LocalForage[TMethod] {\n  return async (...args: any[]) => {\n    /* istanbul ignore else */\n    if (!lf) lf = await SDKEnvironment.configureStorage();\n    await lf.ready();\n    return (lf[method] as any)(...args);\n  };\n}\n\nexport const getItem = proxyLocalForageMethod('getItem');\nexport const setItem = proxyLocalForageMethod('setItem');\nexport const removeItem = proxyLocalForageMethod('removeItem');\nexport const clear = proxyLocalForageMethod('clear');\nexport const length = proxyLocalForageMethod('length');\nexport const key = proxyLocalForageMethod('key');\nexport const keys = proxyLocalForageMethod('keys');\nexport const iterate = proxyLocalForageMethod('iterate');\n","export function uuid() {\n  const u = window.crypto.getRandomValues(new Uint8Array(16));\n\n  // set the version bit to v4\n  u[6] = (u[6] & 0x0f) | 0x40;\n\n  // set the variant bit to \"don't care\" (yes, the RFC\n  // calls it that)\n  u[8] = (u[8] & 0xbf) | 0x80;\n\n  // hex encode them and add the dashes\n  let uid = '';\n  uid += u[0].toString(16);\n  uid += u[1].toString(16);\n  uid += u[2].toString(16);\n  uid += u[3].toString(16);\n  uid += '-';\n\n  uid += u[4].toString(16);\n  uid += u[5].toString(16);\n  uid += '-';\n\n  uid += u[6].toString(16);\n  uid += u[7].toString(16);\n  uid += '-';\n\n  uid += u[8].toString(16);\n  uid += u[9].toString(16);\n  uid += '-';\n\n  uid += u[10].toString(16);\n  uid += u[11].toString(16);\n  uid += u[12].toString(16);\n  uid += u[13].toString(16);\n  uid += u[14].toString(16);\n  uid += u[15].toString(16);\n\n  return uid;\n}\n","import { setItem, getItem, removeItem } from './storage';\nimport { uuid } from './uuid';\n\nexport const STORE_KEY_PRIVATE_KEY = 'STORE_KEY_PRIVATE_KEY';\nexport const STORE_KEY_PUBLIC_JWK = 'STORE_KEY_PUBLIC_JWK';\nconst ALGO_NAME = 'ECDSA';\nconst ALGO_CURVE = 'P-256';\n\nconst EC_GEN_PARAMS: EcKeyGenParams = {\n  name: ALGO_NAME,\n  namedCurve: ALGO_CURVE,\n};\n\nexport function isWebCryptoSupported() {\n  const hasCrypto = typeof window !== 'undefined' && !!(window.crypto as any);\n  const hasSubtleCrypto = hasCrypto && !!(window.crypto.subtle as any);\n\n  return hasCrypto && hasSubtleCrypto;\n}\n\nexport function clearKeys() {\n  removeItem(STORE_KEY_PUBLIC_JWK);\n  removeItem(STORE_KEY_PRIVATE_KEY);\n}\n\nexport async function createJwt() {\n  // will return undefiend is webcrypto is not supported\n  const publicJwk = await getPublicKey();\n\n  if (!publicJwk) {\n    console.info('unable to create public key or webcrypto is unsupported');\n    return undefined;\n  }\n\n  const { subtle } = window.crypto;\n  const privateJwk = await getItem<CryptoKey>(STORE_KEY_PRIVATE_KEY);\n\n  if (!privateJwk || !subtle) {\n    console.info('unable to find private key or webcrypto unsupported');\n    return undefined;\n  }\n\n  const claims = {\n    iat: Math.floor(new Date().getTime() / 1000),\n    jti: uuid(),\n  };\n\n  const headers = {\n    typ: 'dpop+jwt',\n    alg: 'ES256',\n    jwk: publicJwk,\n  };\n\n  const jws = {\n    protected: strToUrlBase64(JSON.stringify(headers)),\n    claims: strToUrlBase64(JSON.stringify(claims)),\n  };\n\n  const data = strToUint8(`${jws.protected}.${jws.claims}`);\n  const sigType = { name: ALGO_NAME, hash: { name: 'SHA-256' } };\n\n  const sig = uint8ToUrlBase64(new Uint8Array(await subtle.sign(sigType, privateJwk, data)));\n  return `${jws.protected}.${jws.claims}.${sig}`;\n}\n\nasync function getPublicKey() {\n  if (!isWebCryptoSupported()) {\n    console.info('webcrypto is not supported');\n    return undefined;\n  }\n\n  if (!(await getItem(STORE_KEY_PUBLIC_JWK))) {\n    await generateWCKP();\n  }\n\n  return getItem(STORE_KEY_PUBLIC_JWK) as JsonWebKey;\n}\n\nasync function generateWCKP() {\n  // to avoid a nasty babel bug we have to hoist this above the await ourselves\n  // https://github.com/rpetrich/babel-plugin-transform-async-to-promises/issues/20\n  const { subtle } = window.crypto;\n  const kp = await subtle.generateKey(\n    EC_GEN_PARAMS,\n    false, // need to export the public key, while keep private key non-extractable\n    ['sign'],\n  );\n\n  const jwkPublicKey = await subtle.exportKey('jwk', kp.publicKey!);\n\n  // persist keys\n  await setItem(STORE_KEY_PRIVATE_KEY, kp.privateKey!);\n  // persist the jwk public key since it needs to be exported anyways\n  await setItem(STORE_KEY_PUBLIC_JWK, jwkPublicKey);\n}\n\nfunction strToUrlBase64(str: string) {\n  return binToUrlBase64(utf8ToBinaryString(str));\n}\n\nfunction strToUint8(str: string) {\n  return new TextEncoder().encode(str);\n}\n\nfunction binToUrlBase64(bin: string) {\n  return btoa(bin).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+/g, '');\n}\n\nfunction utf8ToBinaryString(str: string) {\n  const escstr = encodeURIComponent(str);\n  // replaces any uri escape sequence, such as %0A,\n  // with binary escape, such as 0x0A\n  return escstr.replace(/%([0-9A-F]{2})/g, (_, p1) => String.fromCharCode(parseInt(p1, 16)));\n}\n\nfunction uint8ToUrlBase64(uint8: Uint8Array) {\n  let bin = '';\n  uint8.forEach(code => {\n    bin += String.fromCharCode(code);\n  });\n  return binToUrlBase64(bin);\n}\n","import { UserEventsEmit, UserEventsOnReceived } from '@magic-sdk/types';\nimport { TypedEmitter, EventsDefinition, createTypedEmitter } from './events';\n\n/**\n * Extends `Promise` with a polymorphic `this` type to accomodate arbitrary\n * `Promise` API extensions.\n */\ninterface ExtendedPromise<T> extends Promise<T> {\n  then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,\n  ): ExtendedPromise<TResult1 | TResult2> & this;\n\n  catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null,\n  ): ExtendedPromise<T | TResult> & this;\n\n  finally(onfinally?: (() => void) | undefined | null): ExtendedPromise<T> & this;\n}\n\n/**\n * A `Promise` and `EventEmitter` all in one!\n */\nexport type PromiEvent<TResult, TEvents extends EventsDefinition = void> = ExtendedPromise<TResult> &\n  TypedEmitter<TEvents extends void ? DefaultEvents<TResult> : TEvents & DefaultEvents<TResult>>;\n\n/**\n * Default events attached to every `PromiEvent`.\n */\ntype DefaultEvents<TResult> = {\n  done: (result: TResult) => void;\n  error: (reason: any) => void;\n  settled: () => void;\n  [UserEventsEmit.ClosedByUser]: () => void;\n};\n\n/**\n * A `Promise` executor with can be optionally asynchronous.\n */\ntype AsyncPromiseExecutor<TResult> = (\n  resolve: (value: TResult | PromiseLike<TResult>) => void,\n  reject: (reason?: any) => void,\n) => void | Promise<void>;\n\nconst promiEventBrand = Symbol('isPromiEvent');\n\n/**\n * Returns `true` if the given `value` is a `PromiEvent`.\n */\nexport function isPromiEvent(value: any): value is PromiEvent<any> {\n  return !!value[promiEventBrand];\n}\n\n/**\n * Create a native JavaScript `Promise` overloaded with strongly-typed methods\n * from `EventEmitter`.\n */\nexport function createPromiEvent<TResult, TEvents extends EventsDefinition = void>(\n  executor: AsyncPromiseExecutor<TResult>,\n): PromiEvent<TResult, TEvents extends void ? DefaultEvents<TResult> : TEvents & DefaultEvents<TResult>> {\n  const promise = createPromise(executor);\n  const { createBoundEmitterMethod, createChainingEmitterMethod } = createTypedEmitter<\n    TEvents & DefaultEvents<TResult>\n  >();\n\n  // We save the original `Promise` methods to the following symbols so we can\n  // access them internally.\n  const thenSymbol = Symbol('Promise.then');\n  const catchSymbol = Symbol('Promise.catch');\n  const finallySymbol = Symbol('Promise.finally');\n\n  /**\n   * Ensures the next object in the `PromiEvent` chain is overloaded with\n   * `EventEmitter` methods.\n   */\n  const createChainingPromiseMethod =\n    (method: typeof thenSymbol | typeof catchSymbol | typeof finallySymbol, source: Promise<any>) =>\n    (...args: any[]) => {\n      const nextPromise = (source as any)[method].apply(source, args);\n      return promiEvent(nextPromise);\n    };\n\n  /**\n   * Builds a `PromiEvent` by assigning `EventEmitter` methods to a native\n   * `Promise` object.\n   */\n  const promiEvent = (source: any) => {\n    return Object.assign(source, {\n      [promiEventBrand]: true,\n\n      [thenSymbol]: source[thenSymbol] || source.then,\n      [catchSymbol]: source[catchSymbol] || source.catch,\n      [finallySymbol]: source[finallySymbol] || source.finally,\n\n      then: createChainingPromiseMethod(thenSymbol, source),\n      catch: createChainingPromiseMethod(catchSymbol, source),\n      finally: createChainingPromiseMethod(finallySymbol, source),\n\n      on: createChainingEmitterMethod('on', source),\n      once: createChainingEmitterMethod('once', source),\n      addListener: createChainingEmitterMethod('addListener', source),\n\n      off: createChainingEmitterMethod('off', source),\n      removeListener: createChainingEmitterMethod('removeListener', source),\n      removeAllListeners: createChainingEmitterMethod('removeAllListeners', source),\n\n      emit: createBoundEmitterMethod('emit'),\n      eventNames: createBoundEmitterMethod('eventNames'),\n      listeners: createBoundEmitterMethod('listeners'),\n      listenerCount: createBoundEmitterMethod('listenerCount'),\n    });\n  };\n\n  const result = promiEvent(\n    promise.then(\n      (resolved) => {\n        // Emit default completion events and resolve result.\n        result.emit('done', resolved);\n        result.emit('settled');\n        return resolved;\n      },\n\n      (err) => {\n        // Emit default error events and re-throw.\n        result.emit('error', err);\n        result.emit('settled');\n        throw err;\n      },\n    ),\n  );\n\n  result.on(UserEventsOnReceived.ClosedByUser, () => {\n    result.emit(UserEventsEmit.ClosedByUser);\n  });\n  return result;\n}\n\n/**\n * Creates a `Promise` with an **async executor** that automatically catches\n * errors occurring within the executor. Nesting promises in this way is usually\n * deemed an _anti-pattern_, but it's useful and clean when promisifying the\n * event-based code that's inherent to JSON RPC.\n *\n * So, here we solve the issue of nested promises by ensuring that no errors\n * mistakenly go unhandled!\n */\nexport function createPromise<TResult>(executor: AsyncPromiseExecutor<TResult>) {\n  return new Promise<TResult>((resolve, reject) => {\n    const result = executor(resolve, reject);\n    Promise.resolve(result).catch(reject);\n  });\n}\n","import EventEmitter from 'eventemitter3';\n\nexport type EventsDefinition = { [K in string | symbol]: (...args: any[]) => void } | void;\n\n/**\n * An extension of `EventEmitter` (provided by `eventemitter3`) with an adjusted\n * type interface that supports the unique structure of Magic SDK modules.\n */\nexport class TypedEmitter<Events extends EventsDefinition = void> extends EventEmitter<\n  Events extends void ? string | symbol : Events\n> {}\n\ntype ChainingMethods = 'on' | 'once' | 'addListener' | 'off' | 'removeListener' | 'removeAllListeners';\ntype NonChainingMethods = 'emit' | 'eventNames' | 'listeners' | 'listenerCount';\n\ntype ReplaceReturnType<T extends (...a: any) => any, TNewReturn> = (...a: Parameters<T>) => TNewReturn;\n\n/**\n * Creates a `TypedEmitter` instance and returns helper functions for easily\n * mixing `TypedEmitter` methods into other objects.\n */\nexport function createTypedEmitter<Events extends EventsDefinition = void>() {\n  const emitter = new TypedEmitter<Events>();\n\n  const createChainingEmitterMethod = <T1 extends ChainingMethods, T2>(\n    method: T1,\n    source: T2,\n  ): ReplaceReturnType<TypedEmitter[T1], T2> => {\n    return (...args: any[]) => {\n      (emitter as any)[method].apply(emitter, args);\n      return source;\n    };\n  };\n\n  const createBoundEmitterMethod = <T extends NonChainingMethods>(method: T): TypedEmitter[T] => {\n    return (...args: any[]) => {\n      return (emitter as any)[method].apply(emitter, args);\n    };\n  };\n\n  return {\n    emitter,\n    createChainingEmitterMethod,\n    createBoundEmitterMethod,\n  };\n}\n","export function isMajorVersionAtLeast(version: string, majorVersion: number): boolean {\n  // Split the version string into major, minor, and patch versions\n  const [major] = version.split('.').map(Number);\n\n  // Check if the major version is at least the required major version\n  return major >= majorVersion;\n}\n","import {\n  GetIdTokenConfiguration,\n  MagicPayloadMethod,\n  MagicUserMetadata,\n  GenerateIdTokenConfiguration,\n  UserInfo,\n  RequestUserInfoScope,\n  RecoverAccountConfiguration,\n  ShowSettingsConfiguration,\n  EnableMFAConfiguration,\n  EnableMFAEventEmit,\n  EnableMFAEventHandlers,\n  DisableMFAConfiguration,\n  DisableMFAEventHandlers,\n  DisableMFAEventEmit,\n  RecencyCheckEventEmit,\n  RecoveryFactorEventHandlers,\n  RecoveryFactorEventEmit,\n  RecoverAccountEventHandlers,\n  RecoverAccountEventEmit,\n  UpdateEmailEventHandlers,\n  UpdateEmailEventEmit,\n} from '@magic-sdk/types';\nimport { getItem, setItem, removeItem } from '../util/storage';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\nimport { clearDeviceShares } from '../util/device-share-web-crypto';\nimport { createPromiEvent } from '../util';\n\ntype UserLoggedOutCallback = (loggedOut: boolean) => void;\n\nexport class UserModule extends BaseModule {\n  public getIdToken(configuration?: GetIdTokenConfiguration) {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GetIdTokenTestMode : MagicPayloadMethod.GetIdToken,\n      [configuration],\n    );\n    return this.request<string>(requestPayload);\n  }\n\n  public generateIdToken(configuration?: GenerateIdTokenConfiguration) {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GenerateIdTokenTestMode : MagicPayloadMethod.GenerateIdToken,\n      [configuration],\n    );\n    return this.request<string>(requestPayload);\n  }\n\n  public getInfo() {\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.GetInfo, []);\n    return this.request<MagicUserMetadata>(requestPayload);\n  }\n\n  public isLoggedIn() {\n    return createPromiEvent<boolean, any>(async (resolve, reject) => {\n      try {\n        let cachedIsLoggedIn = false;\n        if (this.sdk.useStorageCache) {\n          cachedIsLoggedIn = (await getItem(this.localForageIsLoggedInKey)) === 'true';\n\n          // if isLoggedIn is true on storage, optimistically resolve with true\n          // if it is false, we use `usr.isLoggedIn` as the source of truth.\n          if (cachedIsLoggedIn) {\n            resolve(true);\n          }\n        }\n\n        const requestPayload = createJsonRpcRequestPayload(\n          this.sdk.testMode ? MagicPayloadMethod.IsLoggedInTestMode : MagicPayloadMethod.IsLoggedIn,\n        );\n        const isLoggedInResponse = await this.request<boolean>(requestPayload);\n        if (this.sdk.useStorageCache) {\n          if (isLoggedInResponse) {\n            setItem(this.localForageIsLoggedInKey, true);\n          } else {\n            removeItem(this.localForageIsLoggedInKey);\n          }\n          if (cachedIsLoggedIn && !isLoggedInResponse) {\n            this.emitUserLoggedOut(true);\n          }\n        }\n        resolve(isLoggedInResponse);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  public logout() {\n    removeItem(this.localForageIsLoggedInKey);\n    clearDeviceShares();\n\n    return createPromiEvent<boolean, any>(async (resolve, reject) => {\n      try {\n        const requestPayload = createJsonRpcRequestPayload(\n          this.sdk.testMode ? MagicPayloadMethod.LogoutTestMode : MagicPayloadMethod.Logout,\n        );\n        const response = await this.request<boolean>(requestPayload);\n        if (this.sdk.useStorageCache) {\n          this.emitUserLoggedOut(response);\n        }\n        resolve(response);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  /* Request email address from logged in user */\n  public requestInfoWithUI(scope?: RequestUserInfoScope) {\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.RequestUserInfoWithUI, scope ? [scope] : []);\n    return this.request<UserInfo>(requestPayload);\n  }\n\n  public showSettings(configuration?: ShowSettingsConfiguration) {\n    const { showUI = true } = configuration || {};\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.UserSettingsTestMode : MagicPayloadMethod.UserSettings,\n      [configuration],\n    );\n    const handle = this.request<string | null, RecoveryFactorEventHandlers>(requestPayload);\n    if (!showUI && handle) {\n      handle.on(RecoveryFactorEventEmit.SendNewPhoneNumber, (phone_number: string) => {\n        this.createIntermediaryEvent(\n          RecoveryFactorEventEmit.SendNewPhoneNumber,\n          requestPayload.id as string,\n        )(phone_number);\n      });\n      handle.on(RecoveryFactorEventEmit.SendOtpCode, (otp: string) => {\n        this.createIntermediaryEvent(RecoveryFactorEventEmit.SendOtpCode, requestPayload.id as string)(otp);\n      });\n      handle.on(RecoveryFactorEventEmit.StartEditPhoneNumber, () => {\n        this.createIntermediaryEvent(RecoveryFactorEventEmit.StartEditPhoneNumber, requestPayload.id as string)();\n      });\n      handle.on(RecoveryFactorEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(RecoveryFactorEventEmit.Cancel, requestPayload.id as string)();\n      });\n      handle.on(RecencyCheckEventEmit.VerifyEmailOtp, (otp: string) => {\n        this.createIntermediaryEvent(RecencyCheckEventEmit.VerifyEmailOtp, requestPayload.id as string)(otp);\n      });\n    }\n    return handle;\n  }\n\n  public recoverAccount(configuration: RecoverAccountConfiguration) {\n    const { email, showUI } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.RecoverAccountTestMode : MagicPayloadMethod.RecoverAccount,\n      [{ email, showUI }],\n    );\n    const handle = this.request<string | boolean | null, RecoverAccountEventHandlers & UpdateEmailEventHandlers>(\n      requestPayload,\n    );\n\n    if (!showUI && handle) {\n      handle.on(RecoverAccountEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(RecoverAccountEventEmit.Cancel, requestPayload.id as string)();\n      });\n      handle.on(RecoverAccountEventEmit.ResendSms, () => {\n        this.createIntermediaryEvent(RecoverAccountEventEmit.ResendSms, requestPayload.id as string)();\n      });\n      handle.on(RecoverAccountEventEmit.VerifyOtp, (otp: string) => {\n        this.createIntermediaryEvent(RecoverAccountEventEmit.VerifyOtp, requestPayload.id as string)(otp);\n      });\n      handle.on(RecoverAccountEventEmit.UpdateEmail, (newEmail: string) => {\n        this.createIntermediaryEvent(RecoverAccountEventEmit.UpdateEmail, requestPayload.id as string)(newEmail);\n      });\n\n      handle.on(UpdateEmailEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(UpdateEmailEventEmit.Cancel, requestPayload.id as string)();\n      });\n      handle.on(UpdateEmailEventEmit.RetryWithNewEmail, (newEmail?) => {\n        this.createIntermediaryEvent(UpdateEmailEventEmit.RetryWithNewEmail, requestPayload.id as string)(newEmail);\n      });\n\n      handle.on(UpdateEmailEventEmit.VerifyEmailOtp, (otp: string) => {\n        this.createIntermediaryEvent(UpdateEmailEventEmit.VerifyEmailOtp, requestPayload.id as string)(otp);\n      });\n    }\n\n    return handle;\n  }\n\n  public revealPrivateKey() {\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.RevealPK);\n    return this.request<boolean>(requestPayload);\n  }\n\n  public onUserLoggedOut(callback: UserLoggedOutCallback): void {\n    this.userLoggedOutCallbacks.push(callback);\n  }\n\n  public enableMFA(configuration: EnableMFAConfiguration) {\n    const { showUI = true } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.EnableMFA, [{ showUI }]);\n    const handle = this.request<string | boolean | null, EnableMFAEventHandlers>(requestPayload);\n\n    if (!showUI && handle) {\n      handle.on(EnableMFAEventEmit.VerifyMFACode, (totp: string) => {\n        this.createIntermediaryEvent(EnableMFAEventEmit.VerifyMFACode, requestPayload.id as string)(totp);\n      });\n\n      handle.on(EnableMFAEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(EnableMFAEventEmit.Cancel, requestPayload.id as string)();\n      });\n    }\n    return handle;\n  }\n\n  public disableMFA(configuration: DisableMFAConfiguration) {\n    const { showUI = true } = configuration;\n\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.DisableMFA, [{ showUI }]);\n    const handle = this.request<string | boolean | null, DisableMFAEventHandlers>(requestPayload);\n\n    if (!showUI && handle) {\n      handle.on(DisableMFAEventEmit.VerifyMFACode, (totp: string) => {\n        this.createIntermediaryEvent(DisableMFAEventEmit.VerifyMFACode, requestPayload.id as string)(totp);\n      });\n\n      handle.on(DisableMFAEventEmit.LostDevice, (recoveryCode: string) => {\n        this.createIntermediaryEvent(DisableMFAEventEmit.LostDevice, requestPayload.id as string)(recoveryCode);\n      });\n\n      handle.on(DisableMFAEventEmit.Cancel, () => {\n        this.createIntermediaryEvent(DisableMFAEventEmit.Cancel, requestPayload.id as string)();\n      });\n    }\n    return handle;\n  }\n\n  // Private members\n  private emitUserLoggedOut(loggedOut: boolean): void {\n    this.userLoggedOutCallbacks.forEach(callback => {\n      callback(loggedOut);\n    });\n  }\n\n  private localForageIsLoggedInKey = 'magic_auth_is_logged_in';\n  private userLoggedOutCallbacks: UserLoggedOutCallback[] = [];\n}\n","import { getItem, iterate, removeItem, setItem } from './storage';\nimport { isWebCryptoSupported } from './web-crypto';\n\nexport const DEVICE_SHARE_KEY = 'ds';\nexport const ENCRYPTION_KEY_KEY = 'ek';\nexport const INITIALIZATION_VECTOR_KEY = 'iv';\n\nconst ALGO_NAME = 'AES-GCM'; // for encryption\nconst ALGO_LENGTH = 256;\n\nexport async function clearDeviceShares() {\n  const keysToRemove: string[] = [];\n  await iterate((value, key, iterationNumber) => {\n    if (key.startsWith(`${DEVICE_SHARE_KEY}_`)) {\n      keysToRemove.push(key);\n    }\n  });\n  for (const key of keysToRemove) {\n    await removeItem(key);\n  }\n}\n\nfunction arrayBufferToBase64(buffer: ArrayBuffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n  const len = bytes.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return window.btoa(binary);\n}\n\nexport function base64ToArrayBuffer(base64: string) {\n  const binaryString = window.atob(base64);\n  const len = binaryString.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  return bytes.buffer;\n}\n\nasync function getOrCreateInitVector() {\n  if (!isWebCryptoSupported()) {\n    console.info('webcrypto is not supported');\n    return undefined;\n  }\n  const { crypto } = window;\n  const existingIv = (await getItem(INITIALIZATION_VECTOR_KEY)) as Uint8Array;\n  if (existingIv) {\n    return existingIv;\n  }\n\n  const iv = crypto.getRandomValues(new Uint8Array(12)); // 12 bytes for AES-GCM\n  return iv;\n}\n\nasync function getOrCreateEncryptionKey() {\n  if (!isWebCryptoSupported()) {\n    console.info('webcrypto is not supported');\n    return undefined;\n  }\n  const { subtle } = window.crypto;\n  const existingKey = (await getItem(ENCRYPTION_KEY_KEY)) as CryptoKey;\n  if (existingKey) {\n    return existingKey;\n  }\n\n  const key = await subtle.generateKey(\n    { name: ALGO_NAME, length: ALGO_LENGTH },\n    false, // non-extractable\n    ['encrypt', 'decrypt'],\n  );\n  return key;\n}\n\nexport async function encryptAndPersistDeviceShare(deviceShareBase64: string, networkHash: string): Promise<void> {\n  const iv = await getOrCreateInitVector();\n  const encryptionKey = await getOrCreateEncryptionKey();\n\n  if (!iv || !encryptionKey || !deviceShareBase64) {\n    return;\n  }\n  const decodedDeviceShare = base64ToArrayBuffer(deviceShareBase64);\n\n  const { subtle } = window.crypto;\n\n  const encryptedData = await subtle.encrypt(\n    {\n      name: ALGO_NAME,\n      iv,\n    },\n    encryptionKey,\n    decodedDeviceShare,\n  );\n\n  // The encrypted device share we store is a base64 encoded string representation\n  // of the magic kms encrypted client share encrypted with webcrypto\n  const encryptedDeviceShare = arrayBufferToBase64(encryptedData);\n\n  await setItem(`${DEVICE_SHARE_KEY}_${networkHash}`, encryptedDeviceShare);\n  await setItem(ENCRYPTION_KEY_KEY, encryptionKey);\n  await setItem(INITIALIZATION_VECTOR_KEY, iv);\n}\n\nexport async function getDecryptedDeviceShare(networkHash: string): Promise<string | undefined> {\n  const encryptedDeviceShare = await getItem<string>(`${DEVICE_SHARE_KEY}_${networkHash}`);\n  const iv = (await getItem(INITIALIZATION_VECTOR_KEY)) as Uint8Array; // use existing encryption key and initialization vector\n  const encryptionKey = (await getItem(ENCRYPTION_KEY_KEY)) as CryptoKey;\n\n  if (!iv || !encryptedDeviceShare || !encryptionKey || !isWebCryptoSupported()) {\n    return undefined;\n  }\n\n  const { subtle } = window.crypto;\n  const ab = await subtle.decrypt({ name: ALGO_NAME, iv }, encryptionKey, base64ToArrayBuffer(encryptedDeviceShare));\n\n  return arrayBufferToBase64(ab);\n}\n","/**\n * Builds a `URL` object safely.\n */\nexport function createURL(url: string, base?: string): URL {\n  // Safari raises an error if `undefined` is given to the second argument of\n  // the `URL` constructor.\n  return base ? new URL(url, base) : new URL(url);\n}\n","import {\n  GasApiResponse,\n  MagicPayloadMethod,\n  GaslessTransactionRequest,\n  ConnectWithUIOptions,\n  ConnectWithUiEvents,\n  ShowUIPromiEvents,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\nimport { createPromiEvent } from '../util';\n\ntype ShowUiConfig = {\n  onramperParams?: { [key: string]: string };\n};\n\nexport class WalletModule extends BaseModule {\n  /* Prompt Magic's Login Form */\n  public connectWithUI(options?: ConnectWithUIOptions) {\n    const promiEvent = createPromiEvent<string[], ConnectWithUiEvents>(async (resolve, reject) => {\n      try {\n        const loginRequestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.Login, [\n          {\n            enabledWallets: this.sdk.thirdPartyWallets.enabledWallets,\n            ...options,\n          },\n        ]);\n\n        const loginRequest = this.request<string[], ConnectWithUiEvents>(loginRequestPayload);\n\n        this.sdk.thirdPartyWallets.eventListeners.forEach(({ event, callback }) => {\n          loginRequest.on(event, () => callback(loginRequestPayload.id as string));\n        });\n\n        loginRequest.on('id-token-created' as any, (params: { idToken: string }) => {\n          promiEvent.emit('id-token-created', params);\n        });\n\n        const result = await loginRequest;\n        if ((result as any).error) reject(result);\n        resolve(result);\n      } catch (error) {\n        reject(error);\n      }\n    });\n    return promiEvent;\n  }\n\n  /* Prompt Magic's Wallet UI (not available for users logged in with third party wallets) */\n  public showUI(config?: ShowUiConfig) {\n    return this.request<boolean, ShowUIPromiEvents>(createJsonRpcRequestPayload(MagicPayloadMethod.ShowUI, [config]));\n  }\n\n  public showAddress() {\n    return this.request<boolean>(createJsonRpcRequestPayload(MagicPayloadMethod.ShowAddress));\n  }\n\n  public showSendTokensUI() {\n    return this.request<boolean>(createJsonRpcRequestPayload(MagicPayloadMethod.ShowSendTokensUI));\n  }\n\n  public showOnRamp() {\n    return this.request<boolean>(createJsonRpcRequestPayload(MagicPayloadMethod.ShowOnRamp));\n  }\n\n  public showNFTs() {\n    return this.request<boolean>(createJsonRpcRequestPayload(MagicPayloadMethod.ShowNFTs));\n  }\n\n  public showBalances() {\n    return this.request<boolean>(createJsonRpcRequestPayload(MagicPayloadMethod.ShowBalances));\n  }\n\n  public sendGaslessTransaction(address: string, transaction: GaslessTransactionRequest) {\n    return this.request<GasApiResponse>(\n      createJsonRpcRequestPayload(MagicPayloadMethod.SendGaslessTransaction, [address, transaction]),\n    );\n  }\n}\n","import {\n  JsonRpcRequestPayload,\n  LocalStorageKeys,\n  MagicPayloadMethod,\n  MagicUserMetadata,\n  ThirdPartyWalletEvents,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { PromiEvent, createPromiEvent } from '../util';\n\nexport class ThirdPartyWalletsModule extends BaseModule {\n  public eventListeners: { event: ThirdPartyWalletEvents; callback: (payloadId: string) => Promise<void> }[] = [];\n  public enabledWallets: Record<string, boolean> = {};\n  public isConnected = false;\n\n  public resetThirdPartyWalletState() {\n    localStorage.removeItem(LocalStorageKeys.PROVIDER);\n    localStorage.removeItem(LocalStorageKeys.ADDRESS);\n    localStorage.removeItem(LocalStorageKeys.CHAIN_ID);\n    this.isConnected = false;\n  }\n\n  public requestOverride(payload: Partial<JsonRpcRequestPayload>) {\n    // Handle method overrides if login/getInfo/isLoggedIn/logout\n    if (payload.method === MagicPayloadMethod.Login) {\n      this.resetThirdPartyWalletState();\n      return super.request(payload);\n    }\n    if (payload.method === MagicPayloadMethod.GetInfo) {\n      return this.getInfo(payload);\n    }\n    if (payload.method === MagicPayloadMethod.IsLoggedIn) {\n      return this.isLoggedIn(payload);\n    }\n    if (payload.method === MagicPayloadMethod.Logout) {\n      return this.logout(payload);\n    }\n    // Route all other requests to 3pw provider\n    switch (localStorage.getItem(LocalStorageKeys.PROVIDER)) {\n      case 'web3modal':\n        return this.web3modalRequest(payload);\n      // Fallback to default request\n      default:\n        this.resetThirdPartyWalletState();\n        return super.request(payload);\n    }\n  }\n\n  /* Core Method Overrides */\n\n  private isLoggedIn(payload: Partial<JsonRpcRequestPayload>): PromiEvent<boolean> {\n    switch (localStorage.getItem(LocalStorageKeys.PROVIDER)) {\n      case 'web3modal':\n        return this.web3modalIsLoggedIn();\n      default:\n        this.resetThirdPartyWalletState();\n        return super.request(payload);\n    }\n  }\n\n  private getInfo(payload: Partial<JsonRpcRequestPayload>): PromiEvent<MagicUserMetadata> {\n    switch (localStorage.getItem(LocalStorageKeys.PROVIDER)) {\n      case 'web3modal':\n        return this.web3modalGetInfo();\n      default:\n        this.resetThirdPartyWalletState();\n        return super.request(payload);\n    }\n  }\n\n  private logout(payload: Partial<JsonRpcRequestPayload>): PromiEvent<boolean> {\n    const provider = localStorage.getItem(LocalStorageKeys.PROVIDER);\n    this.resetThirdPartyWalletState();\n    switch (provider) {\n      case 'web3modal': {\n        return this.web3modalLogout();\n      }\n      default:\n        return super.request(payload);\n    }\n  }\n\n  /* Web3Modal Methods */\n\n  private web3modalRequest(payload: Partial<JsonRpcRequestPayload>) {\n    return createPromiEvent<unknown>((resolve, reject) => {\n      // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n      this.sdk.web3modal.modal.getWalletProvider().request(payload).then(resolve).catch(reject);\n    });\n  }\n\n  private web3modalIsLoggedIn() {\n    return createPromiEvent<boolean>(resolve => {\n      // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n      const walletStatus = this.sdk.web3modal.modal.getStatus();\n      if (walletStatus === 'connected') {\n        resolve(true);\n      }\n      if (walletStatus === 'disconnected') {\n        this.resetThirdPartyWalletState();\n        resolve(false);\n      }\n      if (walletStatus === 'reconnecting') {\n        // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n        const unsubscribeFromProviderEvents = this.sdk.web3modal.modal.subscribeProvider(({ status }) => {\n          if (status === 'connected') {\n            unsubscribeFromProviderEvents();\n            resolve(true);\n          }\n          if (status === 'disconnected') {\n            unsubscribeFromProviderEvents();\n            this.resetThirdPartyWalletState();\n            resolve(false);\n          }\n        });\n      }\n    });\n  }\n\n  private formatWeb3modalGetInfoResponse() {\n    // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n    const walletType = this.sdk.web3modal.modal.getWalletInfo()?.name;\n    // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n    const userAddress = this.sdk.web3modal.modal.getAddress();\n    return {\n      publicAddress: userAddress as string,\n      email: null,\n      issuer: `did:ethr:${userAddress}`,\n      phoneNumber: null,\n      isMfaEnabled: false,\n      recoveryFactors: [] as [],\n      walletType: walletType || 'web3modal',\n      firstLoginAt: null,\n    };\n  }\n\n  private web3modalGetInfo() {\n    return createPromiEvent<MagicUserMetadata>((resolve, reject) => {\n      // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n      const walletStatus = this.sdk.web3modal.modal.getStatus();\n      if (walletStatus === 'connected') {\n        resolve(this.formatWeb3modalGetInfoResponse());\n      }\n\n      if (walletStatus === 'disconnected') {\n        this.resetThirdPartyWalletState();\n        reject('Magic RPC Error: [-32603] Internal error: User denied account access.');\n      }\n\n      if (walletStatus === 'reconnecting') {\n        // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n        const unsubscribeFromProviderEvents = this.sdk.web3modal.modal.subscribeProvider(({ status }) => {\n          if (status === 'connected') {\n            unsubscribeFromProviderEvents();\n            resolve(this.formatWeb3modalGetInfoResponse());\n          }\n          if (status === 'disconnected') {\n            unsubscribeFromProviderEvents();\n            this.resetThirdPartyWalletState();\n            reject('Magic RPC Error: [-32603] Internal error: User denied account access.');\n          }\n        });\n      }\n    });\n  }\n\n  private web3modalLogout(): PromiEvent<boolean> {\n    return createPromiEvent<boolean>(async resolve => {\n      try {\n        // @ts-expect-error Property 'web3modal' does not exist on type 'SDKBase'.\n        await this.sdk.web3modal.modal.disconnect();\n      } catch (error) {\n        console.error(error);\n      }\n      resolve(true);\n    });\n  }\n}\n","import {\n  JsonRpcRequestPayload,\n  JsonRpcRequestCallback,\n  MagicOutgoingWindowMessage,\n  JsonRpcBatchRequestCallback,\n  JsonRpcResponsePayload,\n  ProviderEnableEvents,\n  MagicPayloadMethod,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createInvalidArgumentError, MagicRPCError, createSynchronousWeb3MethodWarning } from '../core/sdk-exceptions';\nimport { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload, JsonRpcResponse } from '../core/json-rpc';\nimport { PromiEvent } from '../util/promise-tools';\nimport { createTypedEmitter, EventsDefinition, TypedEmitter } from '../util/events';\n\nconst { createBoundEmitterMethod, createChainingEmitterMethod } = createTypedEmitter();\n\n/** */\nexport class RPCProviderModule extends BaseModule implements TypedEmitter {\n  // Implements EIP 1193:\n  // https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1193.md\n\n  public readonly isMagic = true;\n\n  public sendAsync(payload: Partial<JsonRpcRequestPayload>, onRequestComplete: JsonRpcRequestCallback): void;\n  public sendAsync(payload: Partial<JsonRpcRequestPayload>[], onRequestComplete: JsonRpcBatchRequestCallback): void;\n  public sendAsync(\n    payload: Partial<JsonRpcRequestPayload> | Partial<JsonRpcRequestPayload>[],\n    onRequestComplete: JsonRpcRequestCallback | JsonRpcBatchRequestCallback,\n  ): void;\n\n  public sendAsync(\n    payload: Partial<JsonRpcRequestPayload> | Partial<JsonRpcRequestPayload>[],\n    onRequestComplete: JsonRpcRequestCallback | JsonRpcBatchRequestCallback,\n  ): void {\n    if (!onRequestComplete) {\n      throw createInvalidArgumentError({\n        procedure: 'Magic.rpcProvider.sendAsync',\n        argument: 1,\n        expected: 'function',\n        received: onRequestComplete === null ? 'null' : typeof onRequestComplete,\n      });\n    }\n\n    if (Array.isArray(payload)) {\n      this.overlay\n        .post(\n          MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,\n          payload.map(p => {\n            const standardizedPayload = standardizeJsonRpcRequestPayload(p);\n            this.prefixPayloadMethodForTestMode(standardizedPayload);\n            return standardizedPayload;\n          }),\n        )\n        .then(batchResponse => {\n          (onRequestComplete as JsonRpcBatchRequestCallback)(\n            null,\n            batchResponse.map(response => ({\n              ...response.payload,\n              error: response.hasError ? new MagicRPCError(response.payload.error) : null,\n            })),\n          );\n        });\n    } else {\n      const finalPayload = standardizeJsonRpcRequestPayload(payload);\n      this.prefixPayloadMethodForTestMode(finalPayload);\n      this.overlay.post(MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST, finalPayload).then(response => {\n        (onRequestComplete as JsonRpcRequestCallback)(\n          response.hasError ? new MagicRPCError(response.payload.error) : null,\n          response.payload,\n        );\n      });\n    }\n  }\n\n  public send<ResultType = any>(method: string, params?: any[]): PromiEvent<ResultType>;\n  public send(\n    payload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n    onRequestComplete: JsonRpcRequestCallback,\n  ): void;\n  public send<ResultType>(payload: JsonRpcRequestPayload, none: void): JsonRpcResponsePayload<ResultType>;\n\n  public send<ResultType = any>(\n    payloadOrMethod: string | JsonRpcRequestPayload | JsonRpcRequestPayload[],\n    onRequestCompleteOrParams: JsonRpcRequestCallback | any[] | void,\n  ): PromiEvent<ResultType> | JsonRpcResponsePayload<ResultType> | void {\n    // Case #1\n    // Web3 >= 1.0.0-beta.38 calls `send` with method and parameters.\n    if (typeof payloadOrMethod === 'string') {\n      const payload = createJsonRpcRequestPayload(\n        payloadOrMethod,\n        Array.isArray(onRequestCompleteOrParams) ? onRequestCompleteOrParams : [],\n      );\n      return this.request(payload) as any;\n    }\n\n    // Case #2\n    // Web3 <= 1.0.0-beta.37 uses `send` with a callback for async queries.\n    if (Array.isArray(payloadOrMethod) || !!onRequestCompleteOrParams) {\n      this.sendAsync(payloadOrMethod, onRequestCompleteOrParams as any);\n      return;\n    }\n\n    // Case #3\n    // Legacy synchronous methods (unsupported).\n    const warning = createSynchronousWeb3MethodWarning();\n    warning.log();\n    return new JsonRpcResponse(payloadOrMethod).applyError({\n      code: -32603,\n      message: warning.rawMessage,\n    }).payload;\n  }\n\n  public enable() {\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.Login);\n    return this.request<string[], ProviderEnableEvents>(requestPayload);\n  }\n\n  /**\n   * Here, we wrap `BaseModule.request` with an additional check\n   * to determine if the RPC method requires a test-mode prefix.\n   */\n  protected request<ResultType = any, Events extends EventsDefinition = void>(payload: Partial<JsonRpcRequestPayload>) {\n    this.prefixPayloadMethodForTestMode(payload);\n    return super.request<ResultType, Events>(payload);\n  }\n\n  /**\n   * Prefixes Ethereum RPC methods with a `testMode` identifier. This is done so\n   * that Magic's <iframe> can handle signing methods using test-specific keys.\n   */\n  private prefixPayloadMethodForTestMode(payload: Partial<JsonRpcRequestPayload>) {\n    const testModePrefix = 'testMode/eth/';\n\n    // In test mode, we prefix all RPC methods with `test/` so that the\n    // Magic <iframe> can handle them without requiring network calls.\n    if (this.sdk.testMode) {\n      payload.method = `${testModePrefix}${payload.method}`;\n    }\n  }\n\n  public on = createChainingEmitterMethod('on', this);\n  public once = createChainingEmitterMethod('once', this);\n  public addListener = createChainingEmitterMethod('addListener', this);\n\n  public off = createChainingEmitterMethod('off', this);\n  public removeListener = createChainingEmitterMethod('removeListener', this);\n  public removeAllListeners = createChainingEmitterMethod('removeAllListeners', this);\n\n  public emit = createBoundEmitterMethod('emit');\n  public eventNames = createBoundEmitterMethod('eventNames');\n  public listeners = createBoundEmitterMethod('listeners');\n  public listenerCount = createBoundEmitterMethod('listenerCount');\n}\n","import { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { BaseModule } from './base-module';\nimport { SDKBase, MagicSDKAdditionalConfiguration, MagicSDKExtensionsOption } from '../core/sdk';\nimport { createExtensionNotInitializedError, MagicExtensionError, MagicExtensionWarning } from '../core/sdk-exceptions';\nimport { createPromiEvent, encodeJSON, decodeJSON, storage, isPromiEvent } from '../util';\n\nconst sdkAccessFields = ['request', 'overlay', 'sdk'];\n\n/**\n * From the `BaseExtension`-derived instance, get the prototype\n * chain up to and including the `BaseModule` class.\n */\nfunction getPrototypeChain<T extends BaseExtension<string>>(instance: T) {\n  let currentProto = Object.getPrototypeOf(instance);\n  const protos = [currentProto];\n\n  while (currentProto !== BaseModule.prototype) {\n    currentProto = Object.getPrototypeOf(currentProto);\n    protos.push(currentProto);\n  }\n\n  return protos;\n}\n\nexport abstract class BaseExtension<TName extends string> extends BaseModule {\n  /**\n   * A structure describing the platform and version compatiblity of this\n   * extension.\n   */\n  compat?: {\n    'magic-sdk': boolean | string;\n    '@magic-sdk/react-native': boolean | string;\n    '@magic-sdk/react-native-bare': boolean | string;\n    '@magic-sdk/react-native-expo': boolean | string;\n  };\n\n  public abstract readonly name: TName;\n\n  private __sdk_access_field_descriptors__ = new Map<\n    string,\n    { descriptor: PropertyDescriptor; isPrototypeField: boolean }\n  >();\n  private __is_initialized__ = false;\n\n  protected utils = {\n    createPromiEvent,\n    isPromiEvent,\n    encodeJSON,\n    decodeJSON,\n    createJsonRpcRequestPayload,\n    standardizeJsonRpcRequestPayload,\n    storage,\n  };\n\n  constructor() {\n    super(undefined as any);\n\n    // Disallow SDK access before initialization...\n\n    const allSources = [this, ...getPrototypeChain(this)];\n\n    sdkAccessFields.forEach(prop => {\n      const allDescriptors = allSources.map(source => Object.getOwnPropertyDescriptor(source, prop));\n      const sourceIndex = allDescriptors.findIndex(x => Boolean(x));\n      const isPrototypeField = sourceIndex > 0;\n      const descriptor = allDescriptors[sourceIndex];\n\n      /* istanbul ignore else */\n      if (descriptor) {\n        this.__sdk_access_field_descriptors__.set(prop, { descriptor, isPrototypeField });\n\n        Object.defineProperty(this, prop, {\n          configurable: true,\n          get: () => {\n            throw createExtensionNotInitializedError(prop);\n          },\n        });\n      }\n    });\n  }\n\n  /**\n   * Registers a Magic SDK instance with this Extension.\n   *\n   * @internal\n   */\n  public init(sdk: SDKBase) {\n    if (this.__is_initialized__) return;\n\n    // Replace original property descriptors\n    // for SDK access fields post-initialization.\n    sdkAccessFields.forEach(prop => {\n      /* istanbul ignore else */\n      if (this.__sdk_access_field_descriptors__.has(prop)) {\n        const { descriptor, isPrototypeField } = this.__sdk_access_field_descriptors__.get(prop)!;\n\n        if (isPrototypeField) {\n          // For prototype fields, we just need the `delete` operator so that\n          // the instance will fallback to the prototype chain itself.\n          delete this[prop as keyof this];\n        } else {\n          Object.defineProperty(this, prop, descriptor);\n        }\n      }\n    });\n\n    this.sdk = sdk;\n    this.__is_initialized__ = true;\n  }\n\n  /**\n   * Creates a deprecation warning wrapped with a native Magic SDK warning type.\n   * Best practice is to warn users of upcoming deprecations at least one major\n   * version before the change is implemented. You can use this method to\n   * communicate deprecations in a manner consistent with Magic SDK core code.\n   */\n  protected createDeprecationWarning(options: {\n    method: string;\n    removalVersion: string;\n    useInstead?: string;\n  }): MagicExtensionWarning {\n    const { method, removalVersion, useInstead } = options;\n\n    const useInsteadSuffix = useInstead ? ` Use \\`${useInstead}\\` instead.` : '';\n    const message = `\\`${method}\\` will be removed from this Extension in version \\`${removalVersion}\\`.${useInsteadSuffix}`;\n    return new MagicExtensionWarning(this, 'DEPRECATION_NOTICE', message);\n  }\n\n  /**\n   * Creates a warning wrapped with a native Magic SDK warning type. This\n   * maintains consistency in warning messaging for consumers of Magic SDK and\n   * this Extension.\n   */\n  protected createWarning(code: string | number, message: string): MagicExtensionWarning {\n    return new MagicExtensionWarning(this, code, message);\n  }\n\n  /**\n   * Creates an error wrapped with a native Magic SDK error type. This maintains\n   * consistency in error handling for consumers of Magic SDK and this\n   * Extension.\n   */\n  protected createError<TData = any>(code: string | number, message: string, data: TData): MagicExtensionError<TData> {\n    return new MagicExtensionError<TData>(this, code, message, data);\n  }\n}\n\nabstract class InternalExtension<TName extends string, TConfig extends any = any> extends BaseExtension<TName> {\n  public abstract readonly config: TConfig;\n}\n\n/**\n * A base class representing \"extensions\" to the core Magic JS APIs. Extensions\n * enable new functionality by composing Magic endpoints methods together.\n */\nexport class Extension {\n  /**\n   * This is a special constructor used to mark \"official\" extensions. These\n   * extensions are designed for special interaction with the Magic iframe using\n   * custom JSON RPC methods, business logic, and global configurations. This is\n   * intended for internal-use only (and provides no useful advantage to\n   * open-source extension developers over the regular `Extension` class).\n   *\n   * @internal\n   */\n  public static Internal = InternalExtension;\n}\n\n/**\n * These fields are exposed on the `Extension` type,\n * but should be hidden from the public interface.\n */\ntype HiddenExtensionFields = 'name' | 'init' | 'config' | 'compat';\n\n/**\n * Gets the type contained in an array type.\n */\ntype UnwrapArray<T extends any[]> = T extends Array<infer P> ? P : never;\n\n/**\n * Create a union type of Extension names from an\n * array of Extension types given by `TExt`.\n */\ntype ExtensionNames<TExt extends BaseExtension<string>[]> =\n  UnwrapArray<TExt> extends BaseExtension<infer R> ? R : never;\n\n/**\n * From the literal Extension name type given by `TExtName`,\n * extract a dictionary of Extension types.\n */\ntype GetExtensionFromName<TExt extends BaseExtension<string>[], TExtName extends string> = {\n  [P in TExtName]: Extract<UnwrapArray<TExt>, BaseExtension<TExtName>>;\n}[TExtName];\n\n/**\n * Wraps a Magic SDK constructor with the necessary type\n * information to support a strongly-typed `Extension` interface.\n */\nexport type WithExtensions<SDK extends SDKBase> = {\n  new <TCustomExtName extends string, TExt extends MagicSDKExtensionsOption<TCustomExtName>>(\n    apiKey: string,\n    options?: MagicSDKAdditionalConfiguration<TCustomExtName, TExt>,\n  ): InstanceWithExtensions<SDK, TExt>;\n};\n\nexport type InstanceWithExtensions<SDK extends SDKBase, TExt extends MagicSDKExtensionsOption> = SDK & {\n  [P in Exclude<\n    TExt extends BaseExtension<string>[] ? ExtensionNames<TExt> : keyof TExt,\n    number\n  >]: TExt extends BaseExtension<string>[]\n    ? Omit<GetExtensionFromName<TExt, P>, HiddenExtensionFields>\n    : TExt extends {\n          [P in Exclude<\n            TExt extends BaseExtension<string>[] ? ExtensionNames<TExt> : keyof TExt,\n            number\n          >]: BaseExtension<string>;\n        }\n      ? Omit<TExt[P], HiddenExtensionFields>\n      : never;\n};\n","import {\n  MagicPayloadMethod,\n  NFTCheckoutRequest,\n  NFTCheckoutResponse,\n  NFTCheckoutEvents,\n  NFTPurchaseRequest,\n  NFTPurchaseResponse,\n  NFTTransferRequest,\n  NFTTransferResponse,\n  NftCheckoutIntermediaryEvents,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\n\nexport class NFTModule extends BaseModule {\n  /* Start an NFT Purchase flow with Sardine */\n  public purchase(options: NFTPurchaseRequest) {\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.NFTPurchase, [options]);\n    return this.request<NFTPurchaseResponse>(requestPayload);\n  }\n\n  /* Start an NFT Checkout flow with Paypal */\n  public checkout(options: NFTCheckoutRequest) {\n    const isThirdPartyWalletConnected = this.sdk.thirdPartyWallets.isConnected;\n\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.NFTCheckout, [\n      {\n        ...options,\n        walletProvider: isThirdPartyWalletConnected ? 'web3modal' : 'magic',\n      },\n    ]);\n    const promiEvent = this.request<NFTCheckoutResponse, NFTCheckoutEvents>(requestPayload);\n\n    if (isThirdPartyWalletConnected) {\n      promiEvent.on(NftCheckoutIntermediaryEvents.Initiated, async (rawTransaction) => {\n        try {\n          const hash = await this.request({\n            method: 'eth_sendTransaction',\n            params: [rawTransaction],\n          });\n          this.createIntermediaryEvent(NftCheckoutIntermediaryEvents.Success, requestPayload.id as string)(hash);\n        } catch (error) {\n          this.createIntermediaryEvent(NftCheckoutIntermediaryEvents.Failure, requestPayload.id as string)();\n        }\n      });\n      promiEvent.on(NftCheckoutIntermediaryEvents.Disconnect, () => {\n        this.sdk.thirdPartyWallets.resetThirdPartyWalletState();\n        promiEvent.emit('disconnect');\n      });\n    }\n    return promiEvent;\n  }\n\n  /* Start an NFT Transfer flow */\n  public transfer(options: NFTTransferRequest) {\n    const requestPayload = createJsonRpcRequestPayload(MagicPayloadMethod.NFTTransfer, [options]);\n    return this.request<NFTTransferResponse>(requestPayload);\n  }\n}\n","import { EthNetworkConfiguration, QueryParameters, SupportedLocale } from '@magic-sdk/types';\nimport { coerce, satisfies } from '../util/semver';\nimport { encodeJSON } from '../util/base64-json';\nimport {\n  createMissingApiKeyError,\n  createReactNativeEndpointConfigurationWarning,\n  createIncompatibleExtensionsError,\n} from './sdk-exceptions';\nimport { AuthModule } from '../modules/auth';\nimport { UserModule } from '../modules/user';\nimport { WalletModule } from '../modules/wallet';\nimport { ThirdPartyWalletsModule } from '../modules/third-party-wallets';\nimport { RPCProviderModule } from '../modules/rpc-provider';\nimport { ViewController } from './view-controller';\nimport { createURL } from '../util/url';\nimport { BaseExtension, Extension } from '../modules/base-extension';\nimport { isEmpty } from '../util/type-guards';\nimport { SDKEnvironment, sdkNameToEnvName } from './sdk-environment';\nimport { NFTModule } from '../modules/nft';\n\n/**\n * Checks if the given `ext` is compatible with the platform & version of Magic\n * SDK currently in use.\n */\nfunction checkExtensionCompat(ext: BaseExtension<string>) {\n  if (ext.compat && ext.compat[SDKEnvironment.sdkName] != null) {\n    return typeof ext.compat[SDKEnvironment.sdkName] === 'string'\n      ? satisfies(coerce(SDKEnvironment.version), ext.compat[SDKEnvironment.sdkName] as string)\n      : !!ext.compat[SDKEnvironment.sdkName];\n  }\n\n  // To gracefully support older extensions, we assume\n  // compatibility when the `compat` field is missing.\n  return true;\n}\n\n/**\n * Generates a network hash of the SDK instance for persisting network specific\n * information on multichain setups\n */\nfunction getNetworkHash(apiKey: string, network?: EthNetworkConfiguration, extConfig?: any) {\n  if (!network && !extConfig) {\n    return `${apiKey}_eth_mainnet`;\n  }\n  if (extConfig) {\n    return `${apiKey}_${JSON.stringify(extConfig)}`;\n  }\n  if (network) {\n    if (typeof network === 'string') {\n      return `${apiKey}_eth_${network}`;\n    }\n    // Custom network, not necessarily eth.\n    return `${apiKey}_${network.rpcUrl}_${network.chainId}_${network.chainType}`;\n  }\n  return `${apiKey}_unknown`;\n}\n\n/**\n * Initializes SDK extensions, checks for platform/version compatiblity issues,\n * then consolidates any global configurations provided by those extensions.\n */\nfunction prepareExtensions(this: SDKBase, options?: MagicSDKAdditionalConfiguration): Record<string, any> {\n  const extensions: BaseExtension<string>[] | { [key: string]: BaseExtension<string> } = options?.extensions ?? [];\n  const extConfig: any = {};\n  const incompatibleExtensions: BaseExtension<string>[] = [];\n\n  if (Array.isArray(extensions)) {\n    extensions.forEach(ext => {\n      if (checkExtensionCompat(ext)) {\n        ext.init(this);\n        if (ext.name) {\n          // Only apply extensions with a known, defined `name` parameter.\n          (this as any)[ext.name] = ext;\n        }\n        if (ext instanceof Extension.Internal) {\n          if (!isEmpty(ext.config)) extConfig[ext.name] = ext.config;\n        }\n      } else {\n        incompatibleExtensions.push(ext);\n      }\n    });\n  } else {\n    Object.keys(extensions).forEach(name => {\n      if (checkExtensionCompat(extensions[name])) {\n        extensions[name].init(this);\n        const ext = extensions[name];\n        (this as any)[name] = ext;\n        if (ext instanceof Extension.Internal) {\n          if (!isEmpty(ext.config)) extConfig[extensions[name].name] = ext.config;\n        }\n      } else {\n        incompatibleExtensions.push(extensions[name]);\n      }\n    });\n  }\n\n  if (incompatibleExtensions.length) {\n    throw createIncompatibleExtensionsError(incompatibleExtensions);\n  }\n\n  return extConfig;\n}\n\nexport type MagicSDKExtensionsOption<TCustomExtName extends string = string> =\n  | BaseExtension<string>[]\n  | { [P in TCustomExtName]: BaseExtension<string> };\n\nexport interface MagicSDKAdditionalConfiguration<\n  TCustomExtName extends string = string,\n  TExt extends MagicSDKExtensionsOption<TCustomExtName> = any,\n> {\n  endpoint?: string;\n  locale?: SupportedLocale;\n  network?: EthNetworkConfiguration;\n  extensions?: TExt;\n  testMode?: boolean;\n  deferPreload?: boolean;\n  useStorageCache?: boolean;\n  meta?: any; // Generic field for clients to add metadata\n}\n\nexport class SDKBase {\n  private static readonly __overlays__: Map<string, ViewController> = new Map();\n\n  protected readonly endpoint: string;\n  protected readonly parameters: string;\n  protected readonly networkHash: string;\n  public readonly testMode: boolean;\n  public readonly useStorageCache: boolean;\n\n  /**\n   * Contains methods for starting a Magic SDK authentication flow.\n   */\n  public readonly auth: AuthModule;\n\n  /**\n   * Contains methods for interacting with user data, checking login\n   * status, generating cryptographically-secure ID tokens, and more.\n   */\n  public readonly user: UserModule;\n\n  /**\n   * Contains methods previously under the `ConnectExtension`, including\n   * login, show wallet UI, request user info, and more.\n   */\n  public readonly wallet: WalletModule;\n\n  /**\n   * Contains methods for interacting with NFTs, including purchase.\n   */\n  public readonly nft: NFTModule;\n\n  /**\n   * Contains internal methods for third-party wallets.\n   */\n  public thirdPartyWallets: ThirdPartyWalletsModule;\n\n  /**\n   * Contains a Web3-compliant provider. Pass this module to your Web3/Ethers\n   * instance for automatic compatibility with Ethereum methods.\n   */\n  public readonly rpcProvider: RPCProviderModule;\n\n  /**\n   * Creates an instance of Magic SDK.\n   */\n  constructor(\n    public readonly apiKey: string,\n    options?: MagicSDKAdditionalConfiguration,\n  ) {\n    if (!apiKey) throw createMissingApiKeyError();\n\n    if (SDKEnvironment.platform === 'react-native' && options?.endpoint) {\n      createReactNativeEndpointConfigurationWarning().log();\n    }\n\n    const { defaultEndpoint, version } = SDKEnvironment;\n    this.testMode = !!options?.testMode;\n    this.useStorageCache = !!options?.useStorageCache;\n    this.endpoint = createURL(options?.endpoint ?? defaultEndpoint).origin;\n\n    // Prepare built-in modules\n    this.auth = new AuthModule(this);\n    this.user = new UserModule(this);\n    this.wallet = new WalletModule(this);\n    this.nft = new NFTModule(this);\n    this.thirdPartyWallets = new ThirdPartyWalletsModule(this);\n    this.rpcProvider = new RPCProviderModule(this) as any;\n\n    // Prepare extensions\n    const extConfig: any = prepareExtensions.call(this, options);\n\n    // Encode parameters as base64-JSON\n    this.parameters = encodeJSON<QueryParameters>({\n      API_KEY: this.apiKey,\n      DOMAIN_ORIGIN: window.location ? window.location.origin : '',\n      ETH_NETWORK: options?.network,\n      host: createURL(this.endpoint).host,\n      sdk: sdkNameToEnvName[SDKEnvironment.sdkName],\n      version,\n      ext: isEmpty(extConfig) ? undefined : extConfig,\n      locale: options?.locale || 'en_US',\n      ...(SDKEnvironment.bundleId ? { bundleId: SDKEnvironment.bundleId } : {}),\n      meta: options?.meta,\n    });\n    this.networkHash = getNetworkHash(this.apiKey, options?.network, isEmpty(extConfig) ? undefined : extConfig);\n    if (!options?.deferPreload) this.preload();\n  }\n\n  /**\n   * Represents the view controller associated with this `MagicSDK` instance.\n   */\n  protected get overlay(): ViewController {\n    if (!SDKBase.__overlays__.has(this.parameters)) {\n      const controller = new SDKEnvironment.ViewController(this.endpoint, this.parameters, this.networkHash);\n\n      // @ts-ignore - We don't want to expose this method to the user, but we\n      // need to invoke in here so that the `ViewController` is ready for use.\n      controller.init();\n\n      SDKBase.__overlays__.set(this.parameters, controller);\n    }\n\n    return SDKBase.__overlays__.get(this.parameters)!;\n  }\n\n  /**\n   * Preloads the Magic view, allowing for faster initial requests in browser\n   * environments. Awaiting the returned promise will signal when the Magic view\n   * has completed loading and is ready for requests.\n   */\n  public async preload() {\n    await this.overlay.waitForReady();\n  }\n}\n","import {\n  MagicIncomingWindowMessage,\n  MagicOutgoingWindowMessage,\n  JsonRpcRequestPayload,\n  MagicMessageEvent,\n  MagicMessageRequest,\n  SDKWarningCode,\n} from '@magic-sdk/types';\nimport { JsonRpcResponse } from './json-rpc';\nimport { createPromise } from '../util/promise-tools';\nimport { MagicSDKWarning, createModalNotReadyError } from './sdk-exceptions';\nimport { clearDeviceShares, encryptAndPersistDeviceShare } from '../util/device-share-web-crypto';\nimport {\n  createMagicRequest,\n  persistMagicEventRefreshToken,\n  standardizeResponse,\n  debounce,\n} from '../util/view-controller-utils';\n\ninterface RemoveEventListenerFunction {\n  (): void;\n}\n\nconst SECOND = 1000;\nconst MINUTE = 60 * SECOND;\nconst PING_INTERVAL = 5 * MINUTE; // 5 minutes\nconst INITIAL_HEARTBEAT_DELAY = 60 * MINUTE; // 1 hour\n\nexport abstract class ViewController {\n  public isReadyForRequest = false;\n  protected readonly messageHandlers = new Set<(event: MagicMessageEvent) => any>();\n  protected isConnectedToInternet = true;\n  protected lastPongTime: null | number = null;\n  protected heartbeatIntervalTimer: ReturnType<typeof setInterval> | null = null;\n  /* istanbul ignore next */\n  protected heartbeatDebounce = debounce(() => {\n    // Only do this for web now\n    if (this.endpoint === 'https://auth.magic.link/') {\n      this.heartBeatCheck();\n    }\n  }, INITIAL_HEARTBEAT_DELAY);\n\n  /**\n   * Create an instance of `ViewController`\n   *\n   * @param endpoint - The URL for the relevant iframe context.\n   * @param parameters - The unique, encoded query parameters for the\n   * relevant iframe context.\n   * @param networkHash - The hash of the network that this sdk instance is connected to\n   * for multi-chain scenarios\n   */\n  constructor(\n    protected readonly endpoint: string,\n    protected readonly parameters: string,\n    protected readonly networkHash: string,\n  ) {\n    this.listen();\n  }\n\n  protected abstract init(): void;\n  protected abstract _post(data: MagicMessageRequest): Promise<void>;\n  protected abstract hideOverlay(): void;\n  protected abstract showOverlay(): void;\n  protected abstract checkRelayerExistsInDOM(): Promise<boolean>;\n  protected abstract reloadRelayer(): Promise<void>;\n\n  /**\n   * Send a payload to the Magic `<iframe>` for processing and automatically\n   * handle the acknowledging follow-up event(s).\n   *\n   * @param msgType - The type of message to encode with the data.\n   * @param payload - The JSON RPC payload to emit via `window.postMessage`.\n   */\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload[],\n  ): Promise<JsonRpcResponse<ResultType>[]>;\n\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload,\n  ): Promise<JsonRpcResponse<ResultType>>;\n\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  ): Promise<JsonRpcResponse<ResultType> | JsonRpcResponse<ResultType>[]> {\n    return createPromise(async (resolve, reject) => {\n      if (!this.isConnectedToInternet) {\n        const error = createModalNotReadyError();\n        reject(error);\n      }\n\n      if (!(await this.checkRelayerExistsInDOM())) {\n        this.isReadyForRequest = false;\n        await this.reloadRelayer();\n      }\n\n      if (!this.isReadyForRequest) {\n        await this.waitForReady();\n      }\n\n      const batchData: JsonRpcResponse[] = [];\n      const batchIds = Array.isArray(payload) ? payload.map(p => p.id) : [];\n      const msg = await createMagicRequest(`${msgType}-${this.parameters}`, payload, this.networkHash);\n\n      await this._post(msg);\n\n      /**\n       * Collect successful RPC responses and resolve.\n       */\n      const acknowledgeResponse = (removeEventListener: RemoveEventListenerFunction) => (event: MagicMessageEvent) => {\n        const { id, response } = standardizeResponse(payload, event);\n        persistMagicEventRefreshToken(event);\n        if (response?.payload.error?.message === 'User denied account access.') {\n          clearDeviceShares();\n        } else if (event.data.deviceShare) {\n          const { deviceShare } = event.data;\n          encryptAndPersistDeviceShare(deviceShare, this.networkHash);\n        }\n        if (id && response && Array.isArray(payload) && batchIds.includes(id)) {\n          batchData.push(response);\n\n          // For batch requests, we wait for all responses before resolving.\n          if (batchData.length === payload.length) {\n            removeEventListener();\n            resolve(batchData);\n          }\n        } else if (id && response && !Array.isArray(payload) && id === payload.id) {\n          removeEventListener();\n          resolve(response);\n        }\n      };\n\n      // Listen for and handle responses.\n      const removeResponseListener = this.on(\n        MagicIncomingWindowMessage.MAGIC_HANDLE_RESPONSE,\n        acknowledgeResponse(() => removeResponseListener()),\n      );\n    });\n  }\n\n  /**\n   * Listen for events received with the given `msgType`.\n   *\n   * @param msgType - The `msgType` encoded with the event data.\n   * @param handler - A handler function to execute on each event received.\n   * @return A `void` function to remove the attached event.\n   */\n  public on(\n    msgType: MagicIncomingWindowMessage,\n    handler: (this: Window, event: MagicMessageEvent) => any,\n  ): RemoveEventListenerFunction {\n    const boundHandler = handler.bind(window);\n\n    // We cannot effectively cover this function because it never gets reference\n    // by value. The functionality of this callback is tested within\n    // `initMessageListener`.\n    /* istanbul ignore next */\n    const listener = (event: MagicMessageEvent) => {\n      if (event.data.msgType === `${msgType}-${this.parameters}`) boundHandler(event);\n    };\n\n    this.messageHandlers.add(listener);\n    return () => this.messageHandlers.delete(listener);\n  }\n\n  waitForReady() {\n    return new Promise<void>(resolve => {\n      const unsubscribe = this.on(MagicIncomingWindowMessage.MAGIC_OVERLAY_READY, () => {\n        this.isReadyForRequest = true;\n        resolve();\n        unsubscribe();\n      });\n    });\n  }\n\n  /**\n   * Listen for messages sent from the underlying Magic `<WebView>`.\n   */\n  private listen() {\n    this.on(MagicIncomingWindowMessage.MAGIC_HIDE_OVERLAY, () => {\n      this.hideOverlay();\n    });\n\n    this.on(MagicIncomingWindowMessage.MAGIC_SHOW_OVERLAY, () => {\n      this.showOverlay();\n    });\n\n    this.on(MagicIncomingWindowMessage.MAGIC_SEND_PRODUCT_ANNOUNCEMENT, (event: MagicMessageEvent) => {\n      if (event.data.response.result.product_announcement) {\n        new MagicSDKWarning(SDKWarningCode.ProductAnnouncement, event.data.response.result.product_announcement).log();\n      }\n    });\n  }\n\n  /**\n   * Sends periodic pings to check the connection.\n   * If no pong is received or its stale, the iframe is reloaded.\n   */\n  /* istanbul ignore next */\n  private heartBeatCheck() {\n    let firstPing = true;\n\n    // Helper function to send a ping message.\n    const sendPing = async () => {\n      const message = {\n        msgType: `${MagicOutgoingWindowMessage.MAGIC_PING}-${this.parameters}`,\n        payload: [],\n      };\n      await this._post(message);\n    };\n\n    this.heartbeatIntervalTimer = setInterval(async () => {\n      // If no pong has ever been received.\n      if (!this.lastPongTime) {\n        if (!firstPing) {\n          // On subsequent ping with no previous pong response, reload the iframe.\n          this.reloadRelayer();\n          firstPing = true;\n          return;\n        }\n      } else {\n        // If we have a pong, check how long ago it was received.\n        const timeSinceLastPong = Date.now() - this.lastPongTime;\n        if (timeSinceLastPong > PING_INTERVAL * 2) {\n          // If the pong is too stale, reload the iframe.\n          this.reloadRelayer();\n          firstPing = true;\n          return;\n        }\n      }\n\n      // Send a new ping message and update the counter.\n      await sendPing();\n      firstPing = false;\n    }, PING_INTERVAL);\n  }\n\n  // Debounce revival mechanism\n  // Kill any existing PingPong interval\n  /* istanbul ignore next */\n  protected stopHeartBeat() {\n    this.heartbeatDebounce();\n    this.lastPongTime = null;\n\n    if (this.heartbeatIntervalTimer) {\n      clearInterval(this.heartbeatIntervalTimer);\n      this.heartbeatIntervalTimer = null;\n    }\n  }\n}\n","import { JsonRpcResponse } from '../core/json-rpc';\nimport { JsonRpcRequestPayload, MagicMessageEvent } from '@magic-sdk/types';\nimport { getItem, setItem } from './storage';\nimport { SDKEnvironment } from '../core/sdk-environment';\nimport { getDecryptedDeviceShare } from './device-share-web-crypto';\nimport { createJwt } from './web-crypto';\n\ninterface StandardizedResponse {\n  id?: string | number;\n  response?: JsonRpcResponse;\n}\n\ninterface StandardizedMagicRequest {\n  msgType: string;\n  payload: JsonRpcRequestPayload | JsonRpcRequestPayload[];\n  jwt?: string;\n  rt?: string;\n  deviceShare?: string;\n}\n\n/**\n * Get the originating payload from a batch request using the specified `id`.\n */\nexport function getRequestPayloadFromBatch(\n  requestPayload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  id?: string | number | null,\n): JsonRpcRequestPayload | undefined {\n  return id && Array.isArray(requestPayload)\n    ? requestPayload.find(p => p.id === id)\n    : (requestPayload as JsonRpcRequestPayload);\n}\n\n/**\n * Ensures the incoming response follows the expected schema and parses for a\n * JSON RPC payload ID.\n */\nexport function standardizeResponse(\n  requestPayload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  event: MagicMessageEvent,\n): StandardizedResponse {\n  const id = event.data.response?.id;\n  const requestPayloadResolved = getRequestPayloadFromBatch(requestPayload, id);\n\n  if (id && requestPayloadResolved) {\n    // Build a standardized response object\n    const response = new JsonRpcResponse(requestPayloadResolved)\n      .applyResult(event.data.response.result)\n      .applyError(event.data.response.error);\n\n    return { id, response };\n  }\n\n  return {};\n}\n\nexport async function createMagicRequest(\n  msgType: string,\n  payload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  networkHash: string,\n) {\n  const rt = await getItem<string>('rt');\n  let jwt;\n\n  // only for webcrypto platforms\n  if (SDKEnvironment.platform === 'web') {\n    try {\n      jwt = (await getItem<string>('jwt')) ?? (await createJwt());\n    } catch (e) {\n      console.error('webcrypto error', e);\n    }\n  }\n\n  const request: StandardizedMagicRequest = { msgType, payload };\n\n  if (jwt) {\n    request.jwt = jwt;\n  }\n  if (jwt && rt) {\n    request.rt = rt;\n  }\n\n  // Grab the device share if it exists for the network\n  const decryptedDeviceShare = await getDecryptedDeviceShare(networkHash);\n  if (decryptedDeviceShare) {\n    request.deviceShare = decryptedDeviceShare;\n  }\n\n  return request;\n}\n\nexport async function persistMagicEventRefreshToken(event: MagicMessageEvent) {\n  if (!event.data.rt) {\n    return;\n  }\n\n  await setItem('rt', event.data.rt);\n}\n\nexport function debounce<T extends (...args: unknown[]) => void>(func: T, delay: number) {\n  let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n  return function (...args: Parameters<T>): void {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(() => {\n      func(...args);\n    }, delay);\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}